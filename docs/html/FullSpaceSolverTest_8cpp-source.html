<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OpenSim: robot/control/kinematics/FullSpaceSolverTest.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>robot/control/kinematics/FullSpaceSolverTest.cpp</h1><a href="FullSpaceSolverTest_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/****************************************************************************</span>
00002 <span class="comment">  Copyright (C)2002 David Jung &lt;opensim@pobox.com&gt;</span>
00003 <span class="comment"></span>
00004 <span class="comment">  This program/file is free software; you can redistribute it and/or modify</span>
00005 <span class="comment">  it under the terms of the GNU General Public License as published by</span>
00006 <span class="comment">  the Free Software Foundation; either version 2 of the License, or</span>
00007 <span class="comment">  (at your option) any later version.</span>
00008 <span class="comment">  </span>
00009 <span class="comment">  This program is distributed in the hope that it will be useful,</span>
00010 <span class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00011 <span class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00012 <span class="comment">  GNU General Public License for more details. (http://www.gnu.org)</span>
00013 <span class="comment">  </span>
00014 <span class="comment">  You should have received a copy of the GNU General Public License</span>
00015 <span class="comment">  along with this program; if not, write to the Free Software</span>
00016 <span class="comment">  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00017 <span class="comment">  </span>
00018 <span class="comment">  $Id: FullSpaceSolverTest.cpp,v 1.4 2003/11/19 22:52:34 jungd Exp $</span>
00019 <span class="comment">  $Revision: 1.4 $</span>
00020 <span class="comment">  $Date: 2003/11/19 22:52:34 $</span>
00021 <span class="comment">  $Author: jungd $</span>
00022 <span class="comment"> </span>
00023 <span class="comment">****************************************************************************/</span>
00024 
00025 <span class="preprocessor">#include &lt;<a class="code" href="FullSpaceSolverTest.html">robot/control/kinematics/FullSpaceSolverTest</a>&gt;</span>
00026 
00027 <span class="keyword">using</span> <a class="code" href="classrobot_1_1control_1_1kinematics_1_1FullSpaceSolverTest.html">robot::control::kinematics::FullSpaceSolverTest</a>;
00028 
00029 
00030 
00031 <span class="keyword">using</span> base::equals;
00032 <span class="keyword">using</span> <a class="code" href="classrobot_1_1control_1_1kinematics_1_1FullSpaceSolver.html">robot::control::kinematics::FullSpaceSolver</a>;
00033 
00034 
00035 FullSpaceSolverTest::FullSpaceSolverTest()
00036 {
00037 }
00038 
00039 
00040 <span class="keywordtype">void</span> FullSpaceSolverTest::setUp() 
00041 { 
00042 
00043   <a class="code" href="classrobot_1_1control_1_1kinematics_1_1FullSpaceSolverTest.html#robot_1_1control_1_1kinematics_1_1FullSpaceSolverTestp0">fsp</a> = ref&lt;FullSpaceSolver&gt;(<a class="code" href="MemoryTracer.html#a0">NewObj</a> <a class="code" href="classrobot_1_1control_1_1kinematics_1_1FullSpaceSolver.html">FullSpaceSolver</a>());
00044 }
00045   
00046 
00047 <span class="keywordtype">void</span> FullSpaceSolverTest::tearDown()
00048 { 
00049 }
00050 
00051  
00052 <span class="keywordtype">void</span> FullSpaceSolverTest::testByHandCase1()
00053 {
00054 <span class="keywordflow">return</span>;<span class="comment">//!!!!</span>
00055 <span class="comment"></span>  <span class="comment">// This is from a case worked out by hand by Lonnie Love</span>
00056   <a class="code" href="namespacebase.html#a18">Matrix</a> A( <a class="code" href="namespacebase.html#a101">zeroMatrix</a>(3,6) );
00057                 A(0,1)=-0.325l;
00058   A(1,0)=2.064;                                            A(1,4)=0.54;
00059                 A(2,1)=1.943;  A(2,2)=1.156; A(2,3)=0.674;
00060   
00061   <a class="code" href="namespacebase.html#a29">Vector</a> <a class="code" href="matrix_8c.html#a10">b</a>(3);
00062   <a class="code" href="matrix_8c.html#a10">b</a>[0]=0; <a class="code" href="matrix_8c.html#a10">b</a>[1]=0; <a class="code" href="matrix_8c.html#a10">b</a>[2]=1;
00063   
00064   array&lt;Int&gt; dependentRowsEliminated;
00065   
00066   <a class="code" href="namespacebase.html#a18">Matrix</a> gi = <a class="code" href="classrobot_1_1control_1_1kinematics_1_1FullSpaceSolverTest.html#robot_1_1control_1_1kinematics_1_1FullSpaceSolverTestp0">fsp</a>-&gt;solve(A,b,dependentRowsEliminated);
00067 
00068 <span class="comment">//  Debugln(DJ,"gi=\n" &lt;&lt; gi);</span>
00069 <span class="comment">//abort();//!!!!!  </span>
00070 }
00071 
00072 
00073 <span class="keywordtype">void</span> FullSpaceSolverTest::testSpecialCase1()
00074 {
00075 <span class="keywordflow">return</span>;<span class="comment">//!!!!</span>
00076 <span class="comment"></span>  <span class="comment">// This is the example of special case 1 from the</span>
00077   <span class="comment">// paper FSP (Full Space Parameterization), Version 2.0</span>
00078   <span class="comment">//  Fries, Hacker &amp; Pin</span>
00079   <span class="comment">// ORNL/TM-13021</span>
00080   
00081   <a class="code" href="namespacebase.html#a18">Matrix</a> A( <a class="code" href="namespacebase.html#a101">zeroMatrix</a>(3,9) );
00082   A(0,6)=1; A(0,8)=-0.61;
00083   A(1,0)=-1.236; A(1,1)=0.635; A(1,2)=0.88; A(1,5)=0.343; A(1,7)=1; A(1,8)=-0.893;
00084   A(2,3)=-0.851; A(2,4)=-0.343;
00085   
00086   <a class="code" href="namespacebase.html#a29">Vector</a> <a class="code" href="matrix_8c.html#a10">b</a>( <a class="code" href="namespacebase.html#a204">zeroVector</a>(3) );
00087   <a class="code" href="matrix_8c.html#a10">b</a>(0)=-0.0101;
00088   
00089   array&lt;Int&gt; dependentRowsEliminated;
00090   
00091   <a class="code" href="namespacebase.html#a18">Matrix</a> gi = <a class="code" href="classrobot_1_1control_1_1kinematics_1_1FullSpaceSolverTest.html#robot_1_1control_1_1kinematics_1_1FullSpaceSolverTestp0">fsp</a>-&gt;solve(A,b,dependentRowsEliminated);
00092 
00093   <span class="comment">// now construct the solution given in the paper and compare</span>
00094   <a class="code" href="namespacebase.html#a18">Matrix</a> gi2( <a class="code" href="namespacebase.html#a101">zeroMatrix</a>(7,9) );
00095   gi2(0,6)=-0.0101;
00096   gi2(1,0)=-0.012; gi2(1,8)=0.0166;
00097   gi2(2,1)=0.0233; gi2(2,8)=0.0166;
00098   gi2(3,2)=0.0168; gi2(3,8)=0.0166;
00099   gi2(4,5)=0.0431; gi2(4,8)=0.0166;
00100   gi2(5,7)=0.0148; gi2(5,8)=0.0166;
00101   gi2(6,3)=0.3738; gi2(6,4)=-0.9275; gi2(6,6)=-0.0101;
00102   
00103   gi2.transpose(); <span class="comment">// transpose from row vectors to column vectors</span>
00104   
00105   CPPUNIT_ASSERT( gi.equals(gi2, 0.0001) );
00106   
00107 }
00108 
00109 
00110 
00111 <span class="keywordtype">void</span> FullSpaceSolverTest::testSpecialCase2()
00112 {
00113 <span class="keywordflow">return</span>;<span class="comment">//!!!!</span>
00114 <span class="comment"></span>  <span class="comment">// This is the example of special case 2 from the</span>
00115   <span class="comment">// paper FSP (Full Space Parameterization), Version 2.0</span>
00116   <span class="comment">//  Fries, Hacker &amp; Pin</span>
00117   <span class="comment">// ORNL/TM-13021</span>
00118   
00119   <a class="code" href="namespacebase.html#a18">Matrix</a> A(3,6);
00120   A(0,0)=1; A(0,1)=1; A(0,2)=2; A(0,3)=2; A(0,4)=4; A(0,5)=3;
00121   A(1,0)=2; A(1,1)=5; A(1,2)=4; A(1,3)=0; A(1,4)=9; A(1,5)=6;
00122   A(2,0)=3; A(2,1)=2; A(2,2)=6; A(2,3)=4; A(2,4)=8; A(2,5)=9;
00123   
00124   <a class="code" href="namespacebase.html#a29">Vector</a> <a class="code" href="matrix_8c.html#a10">b</a>(3);
00125   <a class="code" href="matrix_8c.html#a10">b</a>(0)=3; <a class="code" href="matrix_8c.html#a10">b</a>(1)=7; <a class="code" href="matrix_8c.html#a10">b</a>(2)=6;
00126   
00127   array&lt;Int&gt; dependentRowsEliminated;
00128   
00129   <a class="code" href="namespacebase.html#a18">Matrix</a> gi = <a class="code" href="classrobot_1_1control_1_1kinematics_1_1FullSpaceSolverTest.html#robot_1_1control_1_1kinematics_1_1FullSpaceSolverTestp0">fsp</a>-&gt;solve(A,b,dependentRowsEliminated);  
00130 
00131   
00132   <span class="comment">// now construct the solution given in the paper and compare</span>
00133   <a class="code" href="namespacebase.html#a18">Matrix</a> gi2( <a class="code" href="namespacebase.html#a101">zeroMatrix</a>(4,6) );
00134   gi2(0,1)=1.4; gi2(0,3)=0.8;
00135   gi2(1,3)=-0.0556; gi2(1,4)=0.778; 
00136   gi2(2,1)=1.4; gi2(2,2)=-0.8321; gi2(2,3)=0.8; gi2(2,5)=0.5547;
00137   gi2(3,0)=0.9636; gi2(3,1)=1.4; gi2(3,2)=-0.1482; gi2(3,3)=0.8; gi2(3,5)=-0.2224;
00138   gi2.transpose(); <span class="comment">// transpose from row vectors to column vectors</span>
00139   
00140   <a class="code" href="debugtools.html#a7">Debugln</a>(DJ,<span class="stringliteral">"gi (from FSP)=\n"</span> &lt;&lt; gi);
00141   <a class="code" href="debugtools.html#a7">Debugln</a>(DJ,<span class="stringliteral">"gi2 (from paper)=\n"</span> &lt;&lt; gi2);
00142 
00143   CPPUNIT_ASSERT( gi.equals(gi2, 0.0001) );
00144   
00145 }
00146 
00147 
00148 
00149 <span class="keywordtype">void</span> FullSpaceSolverTest::testEnduranceExample()
00150 {
00151   <span class="comment">// This is the example of an endurance test from the</span>
00152   <span class="comment">// paper FSP (Full Space Parameterization), Version 2.0</span>
00153   <span class="comment">//  Fries, Hacker &amp; Pin</span>
00154   <span class="comment">// ORNL/TM-13021</span>
00155 
00156   <a class="code" href="namespacebase.html#a18">Matrix</a> A(4,8);
00157   A(0,0)=1; A(0,1)=0; A(0,2)=0; A(0,3)=0; A(0,4)=0; A(0,5)=1; A(0,6)=0; A(0,7)=0;
00158   A(1,0)=0; A(1,1)=3; A(1,2)=1; A(1,3)=0; A(1,4)=2; A(1,5)=0; A(1,6)=1; A(1,7)=4;
00159   A(2,0)=0; A(2,1)=6; A(2,2)=0; A(2,3)=0; A(2,4)=4; A(2,5)=0; A(2,6)=0; A(2,7)=8;
00160   A(3,0)=0; A(3,1)=5; A(3,2)=6; A(3,3)=0; A(3,4)=0; A(3,5)=0; A(3,6)=6; A(3,7)=0;
00161   
00162   <a class="code" href="namespacebase.html#a29">Vector</a> <a class="code" href="matrix_8c.html#a10">b</a>(4);
00163   <a class="code" href="matrix_8c.html#a10">b</a>[0]=0; <a class="code" href="matrix_8c.html#a10">b</a>[1]=1; <a class="code" href="matrix_8c.html#a10">b</a>[2]=2; <a class="code" href="matrix_8c.html#a10">b</a>[3]=3;
00164   
00165   array&lt;Int&gt; dependentRowsEliminated;
00166   
00167   <a class="code" href="namespacebase.html#a18">Matrix</a> gi = <a class="code" href="classrobot_1_1control_1_1kinematics_1_1FullSpaceSolverTest.html#robot_1_1control_1_1kinematics_1_1FullSpaceSolverTestp0">fsp</a>-&gt;solve(A,b,dependentRowsEliminated);  
00168   
00169   <a class="code" href="debugtools.html#a7">Debugln</a>(DJ,<span class="stringliteral">"gi=\n"</span> &lt;&lt; gi);
00170 }
00171 
00172 
00173 <span class="preprocessor">#ifdef DEBUG</span>
00174 <span class="preprocessor"></span>CPPUNIT_TEST_SUITE_REGISTRATION( <a class="code" href="classrobot_1_1control_1_1kinematics_1_1FullSpaceSolverTest.html">FullSpaceSolverTest</a> );
00175 <span class="preprocessor">#endif</span>
00176 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Jan 17 14:00:27 2004 for OpenSim by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
