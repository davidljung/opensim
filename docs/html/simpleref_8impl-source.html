<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OpenSim: base/simpleref.impl Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>base/simpleref.impl</h1><a href="simpleref_8impl.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/* **-*-c++-*-**************************************************************</span>
00002 <span class="comment">  Copyright (C)2002 David Jung &lt;opensim@pobox.com&gt;</span>
00003 <span class="comment"></span>
00004 <span class="comment">  This program/file is free software; you can redistribute it and/or modify</span>
00005 <span class="comment">  it under the terms of the GNU General Public License as published by</span>
00006 <span class="comment">  the Free Software Foundation; either version 2 of the License, or</span>
00007 <span class="comment">  (at your option) any later version.</span>
00008 <span class="comment">  </span>
00009 <span class="comment">  This program is distributed in the hope that it will be useful,</span>
00010 <span class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00011 <span class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00012 <span class="comment">  GNU General Public License for more details. (http://www.gnu.org)</span>
00013 <span class="comment">  </span>
00014 <span class="comment">  You should have received a copy of the GNU General Public License</span>
00015 <span class="comment">  along with this program; if not, write to the Free Software</span>
00016 <span class="comment">  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00017 <span class="comment">  </span>
00018 <span class="comment">  $Id: simpleref.impl 1029 2004-02-11 20:45:54Z jungd $</span>
00019 <span class="comment">  $Revision: 1.3 $</span>
00020 <span class="comment">  $Date: 2004-02-11 15:45:54 -0500 (Wed, 11 Feb 2004) $</span>
00021 <span class="comment">  $Author: jungd $</span>
00022 <span class="comment"> </span>
00023 <span class="comment">****************************************************************************/</span>
00024 
00025 <span class="preprocessor">#ifndef _BASE_REF_</span>
00026 <span class="preprocessor"></span><span class="preprocessor">#define _BASE_REF_</span>
00027 <span class="preprocessor"></span>
00028 
00029 <span class="preprocessor">#include &lt;functional&gt;</span>           <span class="comment">// for std::less</span>
00030 <span class="preprocessor">#include &lt;typeinfo&gt;</span>             <span class="comment">// for std::bad_cast</span>
00031 <span class="preprocessor">#include &lt;stdexcept&gt;</span>            <span class="comment">// for std::runtime_error</span>
00032 
00033 <span class="keyword">namespace </span><a class="code" href="base_2Jamfile_8ft.html#a0">base</a>
00034 {
00035   
<a name="l00036"></a><a class="code" href="namespacebase_1_1detail.html">00036</a>   <span class="keyword">namespace </span>detail
00037   {
<a name="l00038"></a><a class="code" href="structbase_1_1detail_1_1static__cast__tag.html">00038</a>     <span class="keyword">struct </span><a class="code" href="structbase_1_1detail_1_1static__cast__tag.html">static_cast_tag</a> {};
<a name="l00039"></a><a class="code" href="structbase_1_1detail_1_1dynamic__cast__tag.html">00039</a>     <span class="keyword">struct </span><a class="code" href="structbase_1_1detail_1_1dynamic__cast__tag.html">dynamic_cast_tag</a> {};
00040   }
00041   <span class="comment"></span>
00042 <span class="comment">/// intrusive reference counted smart pointer.  referenced object must</span>
00043 <span class="comment">///  implement reference() and unreference() (e.g. class Referenced)</span>
00044 <span class="comment"></span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
00045 <span class="keyword">class </span><a class="code" href="classbase_1_1ref.html">ref</a> 
00046 {
00047 <span class="keyword">public</span>:
<a name="l00048"></a><a class="code" href="classbase_1_1ref.html#base_1_1refw8">00048</a>   <span class="keyword">typedef</span> T element_type;
<a name="l00049"></a><a class="code" href="classbase_1_1ref.html#base_1_1refw9">00049</a>   <span class="keyword">typedef</span> T* pointer;
<a name="l00050"></a><a class="code" href="classbase_1_1ref.html#base_1_1refw10">00050</a>   <span class="keyword">typedef</span> T&amp; reference;
00051 
<a name="l00052"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa44">00052</a>   <a class="code" href="classbase_1_1ref.html#base_1_1refa0">ref</a>() 
00053     : p(pointer(0)) 
00054   {}
00055 
00056   
<a name="l00057"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa45">00057</a>   <span class="keyword">explicit</span> <a class="code" href="classbase_1_1ref.html#base_1_1refa0">ref</a>(pointer p) 
00058     : p(p)
00059   {
00060     <span class="keywordflow">if</span> (p) p-&gt;reference(); 
00061   }
00062   
00063   
<a name="l00064"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa46">00064</a>   <a class="code" href="classbase_1_1ref.html#base_1_1refa0">ref</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref</a>&amp; r)
00065     : p(r.p)
00066   {
00067     <span class="keywordflow">if</span> (p) p-&gt;reference();
00068   }
00069   
00070   <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T2&gt;
<a name="l00071"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa47">00071</a>   <a class="code" href="classbase_1_1ref.html#base_1_1refa0">ref</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T2&gt;</a>&amp; r)
00072    : p(r.get())
00073   {
00074     <span class="keywordflow">if</span> (p) p-&gt;reference();
00075   }
00076   
00077   
00078   <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T2&gt;
<a name="l00079"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa48">00079</a>   <a class="code" href="classbase_1_1ref.html#base_1_1refa0">ref</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T2&gt;</a>&amp; r, <a class="code" href="structbase_1_1detail_1_1static__cast__tag.html">detail::static_cast_tag</a>)
00080   {
00081     p = static_cast&lt;pointer&gt;(r.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>());
00082     <span class="keywordflow">if</span> (p) p-&gt;reference();
00083   }
00084   
00085   <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T2&gt;
<a name="l00086"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa49">00086</a>   <a class="code" href="classbase_1_1ref.html#base_1_1refa0">ref</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T2&gt;</a>&amp; r, <a class="code" href="structbase_1_1detail_1_1dynamic__cast__tag.html">detail::dynamic_cast_tag</a>)
00087   {
00088     p = dynamic_cast&lt;pointer&gt;(r.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>());
00089     <span class="keywordflow">if</span> (r.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>() &amp;&amp; (!p)) <span class="keywordflow">throw</span> std::bad_cast();
00090     <span class="keywordflow">if</span> (p) p-&gt;reference();
00091   }
00092   
00093   
00094   
<a name="l00095"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa50">00095</a>   <a class="code" href="classbase_1_1ref.html#base_1_1refa11">~ref</a>()
00096   {
00097     <span class="keywordflow">if</span> (p) 
00098       <span class="keywordflow">if</span> (p-&gt;unreference())
00099         <span class="keyword">delete</span> p;
00100   }
00101   
<a name="l00102"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa51">00102</a>   <a class="code" href="classbase_1_1ref.html">ref</a>&amp; <a class="code" href="classbase_1_1ref.html#base_1_1refa7">operator=</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref</a>&amp; r) 
00103   { 
00104     <span class="keywordflow">if</span> (&amp;r != <span class="keyword">this</span>) {
00105       <span class="keywordflow">if</span> (p) 
00106         <span class="keywordflow">if</span> (p-&gt;unreference())
00107           <span class="keyword">delete</span> p;
00108       p=r.<a class="code" href="classbase_1_1ref.html#base_1_1refp0">p</a>; 
00109       <span class="keywordflow">if</span> (p) p-&gt;reference();
00110     }
00111     <span class="keywordflow">return</span> *<span class="keyword">this</span>; 
00112   }
00113   
00114   <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T2&gt;
<a name="l00115"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa52">00115</a>   <a class="code" href="classbase_1_1ref.html">ref</a>&amp; <a class="code" href="classbase_1_1ref.html#base_1_1refa7">operator=</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T2&gt;</a>&amp; r) 
00116   { 
00117     <span class="keywordflow">if</span> (r.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>() != this-&gt;<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>()) {
00118       <span class="keywordflow">if</span> (p) 
00119         <span class="keywordflow">if</span> (p-&gt;unreference())
00120           <span class="keyword">delete</span> p;
00121       p=r.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>(); 
00122       <span class="keywordflow">if</span> (p) p-&gt;reference();
00123     }
00124     <span class="keywordflow">return</span> *<span class="keyword">this</span>; 
00125   }
00126   
<a name="l00127"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa53">00127</a>   pointer <a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> p; }
00128   
<a name="l00129"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa54">00129</a>   <span class="keywordtype">void</span> <a class="code" href="classbase_1_1ref.html#base_1_1refa54">reset</a>(pointer p = <a class="code" href="classbase_1_1ref.html#base_1_1refw9">pointer</a>(0))
00130   {
00131     <span class="keywordflow">if</span> (p == this-&gt;p) {
00132 <span class="preprocessor">#ifdef DEBUG</span>
00133 <span class="preprocessor"></span>      std::cerr &lt;&lt; <span class="stringliteral">"can't reset to same pointer\n"</span>; abort();
00134 <span class="preprocessor">#else</span>
00135 <span class="preprocessor"></span>      <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">"can't reset to same pointer"</span>);
00136 <span class="preprocessor">#endif</span>
00137 <span class="preprocessor"></span>    }
00138     <span class="keywordflow">if</span> (this-&gt;p) 
00139       <span class="keywordflow">if</span> (this-&gt;p-&gt;unreference())
00140         <span class="keyword">delete</span> this-&gt;p;
00141     this-&gt;p = p;
00142   }
00143    
00144    
<a name="l00145"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa55">00145</a>   pointer <a class="code" href="classbase_1_1ref.html#base_1_1refa55">release</a>()
00146   {
00147     pointer rp = p;
00148     <span class="keywordflow">if</span> (p) 
00149       <span class="keywordflow">if</span> (p-&gt;unreference())
00150         <span class="keyword">delete</span> p;
00151     p = <a class="code" href="classbase_1_1ref.html#base_1_1refw9">pointer</a>(0);
00152     <span class="keywordflow">return</span> rp;
00153   }
00154    
<a name="l00155"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa56">00155</a>   <span class="keywordtype">void</span> <a class="code" href="classbase_1_1ref.html#base_1_1refa56">swap</a>(<a class="code" href="classbase_1_1ref.html">ref</a>&amp; r) { std::swap(r.<a class="code" href="classbase_1_1ref.html#base_1_1refp0">p</a>, p); }
00156    
00157   
<a name="l00158"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa57">00158</a>   <span class="keywordtype">bool</span> <a class="code" href="classbase_1_1ref.html#base_1_1refn3">operator==</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref</a>&amp; r)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> p == r.<a class="code" href="classbase_1_1ref.html#base_1_1refp0">p</a>; }
<a name="l00159"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa58">00159</a>   <span class="keywordtype">bool</span> <a class="code" href="classbase_1_1ref.html#base_1_1refn5">operator!=</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref</a>&amp; r)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> p != r.<a class="code" href="classbase_1_1ref.html#base_1_1refp0">p</a>; }
00160   
00161   <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T2&gt;
<a name="l00162"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa59">00162</a>   <span class="keywordtype">bool</span> <a class="code" href="classbase_1_1ref.html#base_1_1refn3">operator==</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T2&gt;</a>&amp; r)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> p == r.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>(); }
00163   
00164   <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T2&gt;
<a name="l00165"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa60">00165</a>   <span class="keywordtype">bool</span> <a class="code" href="classbase_1_1ref.html#base_1_1refn5">operator!=</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T2&gt;</a>&amp; r)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> p != r.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>(); }
00166   
00167   <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T2&gt;
<a name="l00168"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa61">00168</a>   <span class="keywordtype">bool</span> <a class="code" href="classbase_1_1ref.html#base_1_1refn3">operator==</a>(<span class="keyword">const</span> T2* p2)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> p == p2; }
00169   
00170   <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T2&gt;
<a name="l00171"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa62">00171</a>   <span class="keywordtype">bool</span> <a class="code" href="classbase_1_1ref.html#base_1_1refn5">operator!=</a>(<span class="keyword">const</span> T2* p2)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> p != p2; }
00172   
00173   
<a name="l00174"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa63">00174</a>   reference <a class="code" href="classbase_1_1ref.html#base_1_1refa14">operator*</a>() 
00175   {
00176     <span class="keywordflow">if</span> (!p) {
00177 <span class="preprocessor">#ifdef DEBUG</span>
00178 <span class="preprocessor"></span>      std::cerr &lt;&lt; <span class="stringliteral">"null pointer\n"</span>; abort();
00179 <span class="preprocessor">#else</span>
00180 <span class="preprocessor"></span>      <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">"null pointer"</span>);
00181 <span class="preprocessor">#endif</span>
00182 <span class="preprocessor"></span>    }
00183     <span class="keywordflow">return</span> *p; 
00184   }
00185   
<a name="l00186"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa64">00186</a>   reference <a class="code" href="classbase_1_1ref.html#base_1_1refa14">operator*</a>()<span class="keyword"> const</span>
00187 <span class="keyword">  </span>{
00188     <span class="keywordflow">if</span> (!p) {
00189 <span class="preprocessor">#ifdef DEBUG</span>
00190 <span class="preprocessor"></span>      std::cerr &lt;&lt; <span class="stringliteral">"null pointer\n"</span>; abort();
00191 <span class="preprocessor">#else</span>
00192 <span class="preprocessor"></span>      <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">"null pointer"</span>);
00193 <span class="preprocessor">#endif</span>
00194 <span class="preprocessor"></span>    }
00195     <span class="keywordflow">return</span> *p; 
00196   }
00197   
<a name="l00198"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa65">00198</a>   pointer <a class="code" href="classbase_1_1ref.html#base_1_1refa12">operator-&gt;</a>() 
00199   { 
00200     <span class="keywordflow">if</span> (!p) {
00201 <span class="preprocessor">#ifdef DEBUG</span>
00202 <span class="preprocessor"></span>      std::cerr &lt;&lt; <span class="stringliteral">"null pointer\n"</span>; abort();
00203 <span class="preprocessor">#else</span>
00204 <span class="preprocessor"></span>      <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">"null pointer"</span>);
00205 <span class="preprocessor">#endif</span>
00206 <span class="preprocessor"></span>    }
00207     <span class="keywordflow">return</span> p; 
00208   }
00209 
<a name="l00210"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa66">00210</a>   pointer <a class="code" href="classbase_1_1ref.html#base_1_1refa12">operator-&gt;</a>()<span class="keyword"> const</span>
00211 <span class="keyword">  </span>{ 
00212     <span class="keywordflow">if</span> (!p) {
00213 <span class="preprocessor">#ifdef DEBUG</span>
00214 <span class="preprocessor"></span>      std::cerr &lt;&lt; <span class="stringliteral">"null pointer\n"</span>; abort();
00215 <span class="preprocessor">#else</span>
00216 <span class="preprocessor"></span>      <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">"null pointer"</span>);
00217 <span class="preprocessor">#endif</span>
00218 <span class="preprocessor"></span>    }
00219     <span class="keywordflow">return</span> p; 
00220   }
00221   
<a name="l00222"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa67">00222</a>   <span class="keywordtype">bool</span> <a class="code" href="classbase_1_1ref.html#base_1_1refa16">operator!</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> p == 0; }
00223                                                                                                                                                                                                                                             
00224 <span class="keyword">private</span>:
00225     <span class="comment">// Helper for enabling 'if (sp)'</span>
00226     <span class="keyword">struct </span>Tester
00227     {
00228         Tester() {}
00229     <span class="keyword">private</span>:
00230         <span class="keywordtype">void</span> operator delete(<span class="keywordtype">void</span>*);
00231     };
00232     
00233 <span class="keyword">public</span>:
00234     <span class="comment">// enable 'if (sp)'</span>
<a name="l00235"></a><a class="code" href="classbase_1_1ref.html#base_1_1refa68">00235</a>     <a class="code" href="classbase_1_1ref.html#base_1_1refa20">operator Tester*</a>()<span class="keyword"> const</span>
00236 <span class="keyword">    </span>{
00237         <span class="keywordflow">if</span> (!*<span class="keyword">this</span>) <span class="keywordflow">return</span> 0;
00238         <span class="keyword">static</span> Tester t;
00239         <span class="keywordflow">return</span> &amp;t;
00240     }
00241   
00242 <span class="keyword">protected</span>:
<a name="l00243"></a><a class="code" href="classbase_1_1ref.html#base_1_1refp0">00243</a>   pointer p;
00244 };
00245 
00246 
00247 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l00248"></a><a class="code" href="namespacebase.html#a162">00248</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacebase.html#a162">Release</a>(<a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>&amp; r) { r.<a class="code" href="classbase_1_1ref.html#base_1_1refa55">release</a>(); }
00249 
00250 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l00251"></a><a class="code" href="namespacebase.html#a163">00251</a> <span class="keyword">inline</span> <span class="keyword">typename</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>::pointer <a class="code" href="namespacebase.html#a163">GetImplRef</a>(<a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>&amp; r) { <span class="keywordflow">return</span> r.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>(); }
00252 
00253 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l00254"></a><a class="code" href="namespacebase.html#a164">00254</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacebase.html#a164">Reset</a>(<a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>&amp; r, <span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>::pointer p) { r.<a class="code" href="classbase_1_1ref.html#base_1_1refa54">reset</a>(p); }
00255 
00256 
<a name="l00257"></a><a class="code" href="namespacebase.html#a165">00257</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacebase.html#a140">operator==</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>&amp; a, <span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;U&gt;</a>&amp; b)
00258 {
00259     <span class="keywordflow">return</span> a.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>() == b.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>();
00260 }
00261 
<a name="l00262"></a><a class="code" href="namespacebase.html#a166">00262</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacebase.html#a140">operator==</a>(<span class="keyword">const</span> T* a, <span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;U&gt;</a>&amp; b)
00263 {
00264     <span class="keywordflow">return</span> a == b.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>();
00265 }
00266 
<a name="l00267"></a><a class="code" href="namespacebase.html#a167">00267</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacebase.html#a140">operator==</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>&amp; a, <span class="keyword">const</span> U* b)
00268 {
00269     <span class="keywordflow">return</span> a.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>() == b;
00270 }
00271                                                                                                                                                                                                                                            
<a name="l00272"></a><a class="code" href="namespacebase.html#a168">00272</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacebase.html#a142">operator!=</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>&amp; a, <span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;U&gt;</a>&amp; b)
00273 {
00274     <span class="keywordflow">return</span> a.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>() != b.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>();
00275 }
00276 
<a name="l00277"></a><a class="code" href="namespacebase.html#a169">00277</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacebase.html#a142">operator!=</a>(<span class="keyword">const</span> T* a, <span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;U&gt;</a>&amp; b)
00278 {
00279     <span class="keywordflow">return</span> a != b.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>();
00280 }
00281 
<a name="l00282"></a><a class="code" href="namespacebase.html#a170">00282</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacebase.html#a142">operator!=</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>&amp; a, <span class="keyword">const</span> U* b)
00283 {
00284     <span class="keywordflow">return</span> a.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>() != b;
00285 }
00286 
00287 
00288 
<a name="l00289"></a><a class="code" href="namespacebase.html#a171">00289</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator&lt;(const ref&lt;T&gt;&amp; a, <span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;U&gt;</a>&amp; b)
00290 {
00291     <span class="keywordflow">return</span> a.get() &lt; b.get();
00292 }
00293 
<a name="l00294"></a><a class="code" href="namespacebase.html#a172">00294</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator&lt;(const T* a, const ref&lt;U&gt;&amp; b)
00295 {
00296     <span class="keywordflow">return</span> a &lt; b.get();
00297 }
00298 
<a name="l00299"></a><a class="code" href="namespacebase.html#a173">00299</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator&lt;(const ref&lt;T&gt;&amp; a, <span class="keyword">const</span> U* b)
00300 {
00301     <span class="keywordflow">return</span> a.get() &lt; b;
00302 }
00303 
00304 
<a name="l00305"></a><a class="code" href="namespacebase.html#a174">00305</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacebase.html#a146">operator&gt;</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>&amp; a, <span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;U&gt;</a>&amp; b)
00306 {
00307     <span class="keywordflow">return</span> a.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>() &gt; b.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>();
00308 }
00309 
<a name="l00310"></a><a class="code" href="namespacebase.html#a175">00310</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacebase.html#a146">operator&gt;</a>(<span class="keyword">const</span> T* a, <span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;U&gt;</a>&amp; b)
00311 {
00312     <span class="keywordflow">return</span> a &gt; b.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>();
00313 }
00314 
<a name="l00315"></a><a class="code" href="namespacebase.html#a176">00315</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacebase.html#a146">operator&gt;</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>&amp; a, <span class="keyword">const</span> U* b)
00316 {
00317     <span class="keywordflow">return</span> a.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>() &gt; b;
00318 }
00319 
00320 
00321 
<a name="l00322"></a><a class="code" href="namespacebase.html#a177">00322</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator&lt;=(const ref&lt;T&gt;&amp; a, <span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;U&gt;</a>&amp; b)
00323 {
00324     <span class="keywordflow">return</span> a.get() &lt;= b.get();
00325 }
00326 
<a name="l00327"></a><a class="code" href="namespacebase.html#a178">00327</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator&lt;=(const T* a, const ref&lt;U&gt;&amp; b)
00328 {
00329     <span class="keywordflow">return</span> a &lt;= b.get();
00330 }
00331 
<a name="l00332"></a><a class="code" href="namespacebase.html#a179">00332</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator&lt;=(const ref&lt;T&gt;&amp; a, <span class="keyword">const</span> U* b)
00333 {
00334     <span class="keywordflow">return</span> a.get() &lt;= b;
00335 }
00336 
00337 
<a name="l00338"></a><a class="code" href="namespacebase.html#a180">00338</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacebase.html#a150">operator&gt;=</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>&amp; a, <span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;U&gt;</a>&amp; b)
00339 {
00340     <span class="keywordflow">return</span> a.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>() &gt;= b.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>();
00341 }
00342 
<a name="l00343"></a><a class="code" href="namespacebase.html#a181">00343</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacebase.html#a150">operator&gt;=</a>(<span class="keyword">const</span> T* a, <span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;U&gt;</a>&amp; b)
00344 {
00345     <span class="keywordflow">return</span> a &gt;= b.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>();
00346 }
00347 
<a name="l00348"></a><a class="code" href="namespacebase.html#a182">00348</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacebase.html#a150">operator&gt;=</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>&amp; a, <span class="keyword">const</span> U* b)
00349 {
00350     <span class="keywordflow">return</span> a.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>() &gt;= b;
00351 }
00352 
00353 
00354 
00355 
00356 
00357 
<a name="l00358"></a><a class="code" href="namespacebase.html#a183">00358</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a> <a class="code" href="namespacebase.html#a137">static_cast_ref</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;U&gt;</a>&amp; r)
00359 {
00360     <span class="keywordflow">return</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>(r, <a class="code" href="structbase_1_1detail_1_1static__cast__tag.html">detail::static_cast_tag</a>());
00361 }
00362 
<a name="l00363"></a><a class="code" href="namespacebase.html#a184">00363</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a> <a class="code" href="namespacebase.html#a139">narrow_cast_ref</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;U&gt;</a>&amp; r)
00364 {
00365     <span class="keywordflow">return</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>(r, <a class="code" href="structbase_1_1detail_1_1dynamic__cast__tag.html">detail::dynamic_cast_tag</a>());
00366 }
00367  
<a name="l00368"></a><a class="code" href="namespacebase.html#a185">00368</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U&gt; <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a> <a class="code" href="namespacebase.html#a138">dynamic_cast_ref</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">ref&lt;U&gt;</a>&amp; r)
00369 {
00370     <span class="keywordflow">return</span> <a class="code" href="classbase_1_1ref.html">ref&lt;T&gt;</a>(r, <a class="code" href="structbase_1_1detail_1_1dynamic__cast__tag.html">detail::dynamic_cast_tag</a>());
00371 }
00372 
<a name="l00373"></a><a class="code" href="simpleref_8impl.html#a0">00373</a> <span class="preprocessor">#define narrow_ref narrow_cast_ref</span>
00374 <span class="preprocessor"></span>  
00375   
00376 } <span class="comment">// base</span>
00377 
00378 
00379 
00380 <span class="comment">// specialization of std::less for ref</span>
00381 <span class="keyword">namespace </span>std
00382 {
00383   
00384   <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l00385"></a><a class="code" href="structstd_1_1less_3_01base_1_1ref_3_01T_01_4_01_4.html">00385</a>   <span class="keyword">struct </span>less&lt; <a class="code" href="base_2Jamfile_8ft.html#a0">base</a>::ref&lt;T&gt; &gt;
00386     : <span class="keyword">public</span> <a class="code" href="classbinary__function.html">binary_function</a>&lt;base::ref&lt;T&gt;, base::ref&lt;T&gt;, bool&gt;
00387   {
<a name="l00388"></a><a class="code" href="structstd_1_1less_3_01base_1_1ref_3_01T_01_4_01_4.html#std_1_1less_3_01base_1_1ref_3_01T_01_4_01_4a0">00388</a>     <span class="keywordtype">bool</span> operator()(<span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">base::ref&lt;T&gt;</a>&amp; lhs, <span class="keyword">const</span> <a class="code" href="classbase_1_1ref.html">base::ref&lt;T&gt;</a>&amp; rhs)<span class="keyword"> const</span>
00389 <span class="keyword">    </span>{ <span class="keywordflow">return</span> less&lt;T*&gt;()(lhs.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>(), rhs.<a class="code" href="classbase_1_1ref.html#base_1_1refa53">get</a>()); }
00390   };
00391   
00392 }
00393 
00394 
00395 <span class="preprocessor">#endif</span>
00396 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Jul 29 15:56:14 2004 for OpenSim by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
