<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>opensim/base/Matrix3~ Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.8.1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>opensim/base/Matrix3~</h1><a href="Matrix3~.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/****************************************************************************</font>
00002 <font class="comment">  Copyright (C)1996 David Jung &lt;djung@pobox.com&gt;</font>
00003 <font class="comment"></font>
00004 <font class="comment">  This program/file is free software; you can redistribute it and/or modify</font>
00005 <font class="comment">  it under the terms of the GNU General Public License as published by</font>
00006 <font class="comment">  the Free Software Foundation; either version 2 of the License, or</font>
00007 <font class="comment">  (at your option) any later version.</font>
00008 <font class="comment">  </font>
00009 <font class="comment">  This program is distributed in the hope that it will be useful,</font>
00010 <font class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</font>
00011 <font class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</font>
00012 <font class="comment">  GNU General Public License for more details. (http://www.gnu.org)</font>
00013 <font class="comment">  </font>
00014 <font class="comment">  You should have received a copy of the GNU General Public License</font>
00015 <font class="comment">  along with this program; if not, write to the Free Software</font>
00016 <font class="comment">  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</font>
00017 <font class="comment">  </font>
00018 <font class="comment">  $Id: Matrix3,v 1.1 2002/06/24 23:23:16 jungd Exp $</font>
00019 <font class="comment">  $Revision: 1.1 $</font>
00020 <font class="comment">  $Date: 2002/06/24 23:23:16 $</font>
00021 <font class="comment">  $Author: jungd $</font>
00022 <font class="comment"> </font>
00023 <font class="comment">****************************************************************************/</font>
00024 
00025 <font class="preprocessor">#ifndef _BASE_MATRIX3_</font>
00026 <font class="preprocessor"></font><font class="preprocessor">#define _BASE_MATRIX3_</font>
00027 <font class="preprocessor"></font>
00028 <font class="preprocessor">#include &lt;iostream&gt;</font>
00029 
00030 <font class="preprocessor">#include &lt;<a class="code" href="base.html">base/base</a>&gt;</font>
00031 <font class="preprocessor">#include &lt;<a class="code" href="Object.html">base/Object</a>&gt;</font>
00032 <font class="preprocessor">#include &lt;<a class="code" href="Vector3.html">base/Vector3</a>&gt;</font>
00033 
00034 
<a name="l00035"></a><a class="code" href="Matrix3~.html#a0">00035</a> <font class="preprocessor">#define MATRIX3_ACCESS(r,c) (3*(c-1)+r-1)</font>
00036 <font class="preprocessor"></font>
00037 
00038 <font class="keyword">namespace </font>base {
00039 
00040 <font class="keyword">class </font>Matrix3;
00041 
00042 <font class="comment">// classes to help speed up common vector/matrix operations</font>
00043 <font class="comment">//  (not used directly by the user)</font>
00044 
00045 <font class="keyword">struct </font>M3V3mul {
<a name="l00046"></a><a class="code" href="structbase_1_1M3V3mul.html#m0">00046</a>   <font class="keyword">const</font> Matrix3&amp; m;
<a name="l00047"></a><a class="code" href="structbase_1_1M3V3mul.html#m1">00047</a>   <font class="keyword">const</font> Vector3&amp; v;
00048 
<a name="l00049"></a><a class="code" href="structbase_1_1M3V3mul.html#a2">00049</a>   <a class="code" href="structbase_1_1M3V3mul.html#a0">M3V3mul</a>(<font class="keyword">const</font> Matrix3&amp; mm, <font class="keyword">const</font> Vector3&amp; vv) : m(mm), v(vv) {}
00050 
00051   <a class="code" href="structbase_1_1M3V3mul.html#a1">operator Vector3</a>() <font class="keyword">const</font>;
00052 };
00053 
00054 <font class="keyword">struct </font>M3V3mulV3add {
<a name="l00055"></a><a class="code" href="structbase_1_1M3V3mulV3add.html#m0">00055</a>   <font class="keyword">const</font> Matrix3&amp; m;
<a name="l00056"></a><a class="code" href="structbase_1_1M3V3mulV3add.html#m1">00056</a>   <font class="keyword">const</font> Vector3&amp; v;
<a name="l00057"></a><a class="code" href="structbase_1_1M3V3mulV3add.html#m2">00057</a>   <font class="keyword">const</font> Vector3&amp; v2;
00058 
<a name="l00059"></a><a class="code" href="structbase_1_1M3V3mulV3add.html#a2">00059</a>   <a class="code" href="structbase_1_1M3V3mulV3add.html#a0">M3V3mulV3add</a>(<font class="keyword">const</font> M3V3mul&amp; mv, <font class="keyword">const</font> Vector3&amp; vv) : m(mv.m), v(mv.v), v2(vv) {}
00060 
00061   <a class="code" href="structbase_1_1M3V3mulV3add.html#a1">operator Vector3</a>() <font class="keyword">const</font>;
00062 };
00063 
00064 
00065 <font class="comment">//</font>
00066 <font class="comment">// The matrix</font>
00067 <font class="comment">//</font>
00068 
00069 <font class="keyword">class </font>Matrix3 : <font class="keyword">public</font> base::Object
00070 {
00071 
00072 <font class="keyword">public</font>:
<a name="l00073"></a><a class="code" href="classbase_1_1Matrix3.html#a38">00073</a>   <a class="code" href="classbase_1_1Matrix3.html#a0">Matrix3</a>()<font class="keyword"> </font>{ <a class="code" href="classbase_1_1Matrix3.html#a6">setIdentity</a>(); }
<a name="l00074"></a><a class="code" href="classbase_1_1Matrix3.html#a39">00074</a>   <a class="code" href="classbase_1_1Matrix3.html#a0">Matrix3</a>(<font class="keyword">const</font> Matrix3&amp; m)<font class="keyword"> </font>{ this-&gt;<a class="code" href="classbase_1_1Matrix3.html#a22">operator=</a>(m); }
<a name="l00075"></a><a class="code" href="classbase_1_1Matrix3.html#a40">00075</a>   <a class="code" href="classbase_1_1Matrix3.html#a0">Matrix3</a>(<font class="keyword">const</font> Real&amp; s)<font class="keyword"> </font>{ setDiag(s); }
<a name="l00076"></a><a class="code" href="classbase_1_1Matrix3.html#a41">00076</a>   <a class="code" href="classbase_1_1Matrix3.html#a0">Matrix3</a>(Real e11, Real e12, Real e13,
00077           Real e21, Real e22, Real e23,
00078           Real e31, Real e32, Real e33)<font class="keyword"></font>
00079 <font class="keyword">  </font>{
00080     <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(1,1)=e11; <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(1,2)=e12; <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(1,3)=e13;
00081     <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(2,1)=e21; <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(2,2)=e22; <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(2,3)=e23;
00082     <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(3,1)=e31; <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(3,2)=e32; <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(3,3)=e33;
00083   }
<a name="l00084"></a><a class="code" href="classbase_1_1Matrix3.html#a42">00084</a>   <a class="code" href="classbase_1_1Matrix3.html#a4">~Matrix3</a>()<font class="keyword"> </font>{}
00085 
<a name="l00086"></a><a class="code" href="classbase_1_1Matrix3.html#a43">00086</a>   <font class="keyword">virtual</font> String <a class="code" href="classbase_1_1Matrix3.html#a5">className</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="namespace__base.html#a4">String</a>(<font class="stringliteral">"Matrix3"</font>); }
00087   
<a name="l00088"></a><a class="code" href="classbase_1_1Matrix3.html#a44">00088</a>   <font class="keywordtype">void</font> <a class="code" href="classbase_1_1Matrix3.html#a6">setIdentity</a>() <font class="keywordflow">throw</font>()
00089   {
00090     setDiag(<a class="code" href="namespace__base.html#a5">Real</a>(1));
00091   }
00092 
<a name="l00093"></a><a class="code" href="classbase_1_1Matrix3.html#a45">00093</a>   <font class="keywordtype">void</font> <a class="code" href="classbase_1_1Matrix3.html#a7">setZero</a>() <font class="keywordflow">throw</font>()
00094   {
00095     setDiag(<a class="code" href="namespace__base.html#a5">Real</a>(0));
00096   }
00097 
00098 
<a name="l00099"></a><a class="code" href="classbase_1_1Matrix3.html#a46">00099</a>   Real&amp; <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(Int row, Int col) <font class="keywordflow">throw</font>()
00100   { 
00101 <font class="preprocessor">#ifdef DEBUG</font>
00102 <font class="preprocessor"></font>    <font class="keywordflow">if</font> ((row &lt; 1) || (row &gt; 3) || (col &lt; 1) || (col &gt; 3))
00103       <font class="keywordflow">throw</font> std::runtime_error(<a class="code" href="base.html#a12">Exception</a>(<font class="stringliteral">"matrix row or col out of bounds (debug only check)"</font>));
00104 <font class="preprocessor">#endif </font>
00105 <font class="preprocessor"></font>    <font class="keywordflow">return</font> m[<a class="code" href="Matrix3.html#a0">MATRIX3_ACCESS</a>(row,col)]; 
00106   }
00107 
<a name="l00108"></a><a class="code" href="classbase_1_1Matrix3.html#a47">00108</a>   <font class="keyword">const</font> Real&amp; <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(Int row, Int col) <font class="keyword">const</font> <font class="keywordflow">throw</font>()
00109   {
00110 <font class="preprocessor">#ifdef DEBUG</font>
00111 <font class="preprocessor"></font>    <font class="keywordflow">if</font> ((row &lt; 1) || (row &gt; 3) || (col &lt; 1) || (col &gt; 3))
00112       <font class="keywordflow">throw</font> std::runtime_error(<a class="code" href="base.html#a12">Exception</a>(<font class="stringliteral">"matrix row or col out of bounds (debug only check)"</font>));
00113 <font class="preprocessor">#endif </font>
00114 <font class="preprocessor"></font>    <font class="keywordflow">return</font> m[<a class="code" href="Matrix3.html#a0">MATRIX3_ACCESS</a>(row,col)]; 
00115   }
00116 
<a name="l00117"></a><a class="code" href="classbase_1_1Matrix3.html#a48">00117</a>   Real&amp; <a class="code" href="classbase_1_1Matrix3.html#a10">at</a>(Int row, Int col) <font class="keywordflow">throw</font>(std::out_of_range)
00118   {
00119     <font class="keywordflow">if</font> ((row &lt; 1) || (row &gt; 3) || (col &lt; 1) || (col &gt; 3))
00120       <font class="keywordflow">throw</font> std::out_of_range(<a class="code" href="base.html#a12">Exception</a>(<font class="stringliteral">"matrix row or col out of bounds"</font>));
00121 
00122     <font class="keywordflow">return</font> m[<a class="code" href="Matrix3.html#a0">MATRIX3_ACCESS</a>(row,col)];
00123   }
00124 
<a name="l00125"></a><a class="code" href="classbase_1_1Matrix3.html#a49">00125</a>   <font class="keyword">const</font> Real&amp; <a class="code" href="classbase_1_1Matrix3.html#a10">at</a>(Int row, Int col) <font class="keyword">const</font> <font class="keywordflow">throw</font>(std::out_of_range)
00126   {
00127     <font class="keywordflow">if</font> ((row &lt; 1) || (row &gt; 3) || (col &lt; 1) || (col &gt; 3))
00128       <font class="keywordflow">throw</font> std::out_of_range(<a class="code" href="base.html#a12">Exception</a>(<font class="stringliteral">"matrix row or col out of bounds"</font>));
00129 
00130     <font class="keywordflow">return</font> m[<a class="code" href="Matrix3.html#a0">MATRIX3_ACCESS</a>(row,col)];
00131   }
00132 
<a name="l00133"></a><a class="code" href="classbase_1_1Matrix3.html#a50">00133</a>   Real&amp; <a class="code" href="classbase_1_1Matrix3.html#a12">operator()</a>(Int row, Int col) <font class="keywordflow">throw</font>()
00134   {
00135 <font class="preprocessor">#ifdef DEBUG</font>
00136 <font class="preprocessor"></font>    <font class="keywordflow">return</font> <a class="code" href="classbase_1_1Matrix3.html#a10">at</a>(row,col);
00137 <font class="preprocessor">#else</font>
00138 <font class="preprocessor"></font>    <font class="keywordflow">return</font> <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(row,col);
00139 <font class="preprocessor">#endif</font>
00140 <font class="preprocessor"></font>  }
00141 
<a name="l00142"></a><a class="code" href="classbase_1_1Matrix3.html#a51">00142</a>   <font class="keyword">const</font> Real&amp; <a class="code" href="classbase_1_1Matrix3.html#a12">operator()</a>(Int row, Int col) <font class="keyword">const</font> <font class="keywordflow">throw</font>()
00143   {
00144 <font class="preprocessor">#ifdef DEBUG</font>
00145 <font class="preprocessor"></font>    <font class="keywordflow">return</font> <a class="code" href="classbase_1_1Matrix3.html#a10">at</a>(row,col);
00146 <font class="preprocessor">#else</font>
00147 <font class="preprocessor"></font>    <font class="keywordflow">return</font> <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(row,col);
00148 <font class="preprocessor">#endif</font>
00149 <font class="preprocessor"></font>  }
00150 
00151 
00152 
00153 
00154 
<a name="l00155"></a><a class="code" href="classbase_1_1Matrix3.html#a52">00155</a>   Vector3 <a class="code" href="classbase_1_1Matrix3.html#a14">row</a>(Int row) <font class="keyword">const</font>         <font class="comment">// extract row vector</font>
00156   { <font class="keywordflow">return</font> Vector3(<a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(row,1),<a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(row,2),<a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(row,3)); }
00157 
<a name="l00158"></a><a class="code" href="classbase_1_1Matrix3.html#a53">00158</a>   Vector3 <a class="code" href="classbase_1_1Matrix3.html#a15">column</a>(Int col) <font class="keyword">const</font>      <font class="comment">// extract column vector</font>
00159   { <font class="keywordflow">return</font> Vector3(<a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(1,col),<a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(2,col),<a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(3,col)); }
00160 
<a name="l00161"></a><a class="code" href="classbase_1_1Matrix3.html#a54">00161</a>   <font class="keywordtype">void</font> <a class="code" href="classbase_1_1Matrix3.html#a16">setRow</a>(Int row, <font class="keyword">const</font> Vector3&amp; r) <font class="keywordflow">throw</font>()
00162   { <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(row,1)=r.x; <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(row,2)=r.y; <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(row,3)=r.z; }
00163 
<a name="l00164"></a><a class="code" href="classbase_1_1Matrix3.html#a55">00164</a>   <font class="keywordtype">void</font> <a class="code" href="classbase_1_1Matrix3.html#a17">setColumn</a>(Int col, <font class="keyword">const</font> Vector3&amp; c) <font class="keywordflow">throw</font>()
00165   { <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(1,col)=c.x; <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(2,col)=c.y; <a class="code" href="classbase_1_1Matrix3.html#a8">e</a>(3,col)=c.z; }
00166 
<a name="l00167"></a><a class="code" href="classbase_1_1Matrix3.html#a56">00167</a>   <font class="keywordtype">void</font> <a class="code" href="classbase_1_1Matrix3.html#a18">swapColumns</a>(Int col1, Int col2) <font class="keywordflow">throw</font>(std::out_of_range)
00168   {
00169     <font class="keywordflow">if</font> ((col1 &lt; 1) || (col1 &gt; 3) || (col2 &lt; 1) || (col2 &gt; 3))
00170       <font class="keywordflow">throw</font> std::out_of_range(<a class="code" href="base.html#a12">Exception</a>(<font class="stringliteral">"matrix col out of bounds"</font>));
00171 
00172     Vector3 tmp(<a class="code" href="classbase_1_1Matrix3.html#a15">column</a>(col1));
00173     <a class="code" href="classbase_1_1Matrix3.html#a17">setColumn</a>(col1,<a class="code" href="classbase_1_1Matrix3.html#a15">column</a>(col2));
00174     <a class="code" href="classbase_1_1Matrix3.html#a17">setColumn</a>(col2,tmp);
00175   }
00176 
<a name="l00177"></a><a class="code" href="classbase_1_1Matrix3.html#a57">00177</a>   <font class="keywordtype">void</font> <a class="code" href="classbase_1_1Matrix3.html#a19">swapRows</a>(Int row1, Int row2) <font class="keywordflow">throw</font>(std::out_of_range)
00178   {
00179     <font class="keywordflow">if</font> ((row1 &lt; 1) || (row1 &gt; 3) || (row2 &lt; 1) || (row2 &gt; 3))
00180       <font class="keywordflow">throw</font> std::out_of_range(<a class="code" href="base.html#a12">Exception</a>(<font class="stringliteral">"matrix row out of bounds"</font>));
00181 
00182     Vector3 tmp(<a class="code" href="classbase_1_1Matrix3.html#a14">row</a>(row1));
00183     <a class="code" href="classbase_1_1Matrix3.html#a16">setRow</a>(row1,<a class="code" href="classbase_1_1Matrix3.html#a14">row</a>(row2));
00184     <a class="code" href="classbase_1_1Matrix3.html#a16">setRow</a>(row2,tmp);
00185   }
00186 
00187 
<a name="l00188"></a><a class="code" href="classbase_1_1Matrix3.html#a58">00188</a>   Vector3 <a class="code" href="classbase_1_1Matrix3.html#a20">operator[]</a>(Int r) <font class="keyword">const</font>  <font class="comment">// row</font>
00189   { <font class="keywordflow">return</font> <a class="code" href="classbase_1_1Matrix3.html#a14">row</a>(r); }
00190 
00191 
<a name="l00192"></a><a class="code" href="classbase_1_1Matrix3.html#a59">00192</a>   <font class="keywordtype">int</font> <a class="code" href="classbase_1_1Matrix3.html#a21">index</a>(Int row, Int col) <font class="keyword">const</font> <font class="keywordflow">throw</font>()
00193   { <font class="keywordflow">return</font> <a class="code" href="Matrix3.html#a0">MATRIX3_ACCESS</a>(row,col); }
00194 
<a name="l00195"></a><a class="code" href="classbase_1_1Matrix3.html#a60">00195</a>   Matrix3&amp; <a class="code" href="classbase_1_1Matrix3.html#a22">operator=</a>(<font class="keyword">const</font> Matrix3&amp; src) <font class="keywordflow">throw</font>()
00196   { 
00197     <font class="keywordflow">if</font> (&amp;src != <font class="keyword">this</font>)
00198       <font class="keywordflow">for</font>(<font class="keywordtype">int</font> i=0; i&lt;9; i++)
00199         m[i] = src.m[i];
00200     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00201   }
00202 
00203 
<a name="l00204"></a><a class="code" href="classbase_1_1Matrix3.html#a61">00204</a>   <font class="keywordtype">bool</font> <a class="code" href="classbase_1_1Matrix3.html#a23">operator==</a>(<font class="keyword">const</font> Matrix3&amp; m1) <font class="keyword">const</font> <font class="keywordflow">throw</font>()
00205   {
00206     <font class="keywordflow">for</font>(<font class="keywordtype">int</font> i=0; i&lt;9; i++)
00207       <font class="keywordflow">if</font> (m1.m[i]!=m[i]) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00208     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00209   }
00210 
<a name="l00211"></a><a class="code" href="classbase_1_1Matrix3.html#a62">00211</a>   <font class="keywordtype">bool</font> <a class="code" href="classbase_1_1Matrix3.html#a24">equals</a>(<font class="keyword">const</font> Matrix3&amp; m1, Real epsilon = base::epsilon) <font class="keyword">const</font> <font class="keywordflow">throw</font>()
00212   {
00213     <font class="keywordflow">for</font>(<font class="keywordtype">int</font> i=0; i&lt;9; i++)
00214       <font class="keywordflow">if</font> (!<a class="code" href="namespace__base.html#a65">base::equals</a>(m1.m[i],m[i],epsilon)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00215     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00216   }
00217 
00218 
00219   Matrix3&amp; <a class="code" href="classbase_1_1Matrix3.html#a25">transpose</a>();
00220   Matrix3&amp; <a class="code" href="classbase_1_1Matrix3.html#a26">invert</a>();
00221   Matrix3&amp; <a class="code" href="classbase_1_1Matrix3.html#a27">negate</a>() <font class="keywordflow">throw</font>();
00222 
00223   <font class="comment">// Find LUP decomposition.  P is represented by the vector Pi, where the element</font>
00224   <font class="comment">//  values represent the column of P containing a 1. i.e. Pi[i]=j =&gt; P[i][j]=1</font>
00225   <font class="keywordtype">void</font> <a class="code" href="classbase_1_1Matrix3.html#a28">decomposeLUP</a>(Matrix3&amp; L, Matrix3&amp; U, Vector3&amp; Pi) <font class="keyword">const</font>;
00226   
00227   <font class="comment">// Solve Ax=b for x, given b, where A=*this (returns x)</font>
00228   Vector3  <a class="code" href="classbase_1_1Matrix3.html#a29">solve</a>(<font class="keyword">const</font> Vector3&amp; b) <font class="keyword">const</font>; 
00229 
00230   <font class="comment">// Computes the eigen values/vectors in dout &amp; vout resp.</font>
00231   <font class="comment">//  (returns the no. of iterations taken (upto max) )</font>
00232   Int <a class="code" href="classbase_1_1Matrix3.html#a30">eigenJacobi</a>(Matrix3&amp; vout, Vector3&amp; dout, Int maxIter=50) <font class="keyword">const</font>;
00233 
00234   Matrix3&amp; <a class="code" href="classbase_1_1Matrix3.html#a31">operator*=</a>(<font class="keyword">const</font> Matrix3&amp; m2);
00235   Matrix3&amp; <a class="code" href="classbase_1_1Matrix3.html#a32">operator+=</a>(<font class="keyword">const</font> Matrix3&amp; m2);
00236   Matrix3&amp; <a class="code" href="classbase_1_1Matrix3.html#a33">operator-=</a>(<font class="keyword">const</font> Matrix3&amp; m2);
00237   Matrix3&amp; <a class="code" href="classbase_1_1Matrix3.html#a31">operator*=</a>(<font class="keyword">const</font> Real&amp; s);
00238   Matrix3&amp; <a class="code" href="classbase_1_1Matrix3.html#a35">operator/=</a>(<font class="keyword">const</font> Real&amp; s);
00239 
00240 
<a name="l00241"></a><a class="code" href="classbase_1_1Matrix3.html#a74">00241</a>   <font class="keyword">const</font> Real* <a class="code" href="classbase_1_1Matrix3.html#a36">c_array</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> m; }
<a name="l00242"></a><a class="code" href="classbase_1_1Matrix3.html#a75">00242</a>   Real* <a class="code" href="classbase_1_1Matrix3.html#a36">c_array</a>()<font class="keyword"> </font>{ <font class="keywordflow">return</font> m; }
00243 
00244   <font class="comment">// Solve for xA = b, given LUP decomposition of A as L, U and Pi, and given b, returns x</font>
00245   <font class="keyword">static</font> Vector3 <a class="code" href="classbase_1_1Matrix3.html#d0">solveLUP</a>(<font class="keyword">const</font> Matrix3&amp; L, <font class="keyword">const</font> Matrix3&amp; U, <font class="keyword">const</font> Vector3&amp; Pi, <font class="keyword">const</font> Vector3&amp; b);
00246 
<a name="l00247"></a><a class="code" href="classbase_1_1Matrix3.html#d5">00247</a>   <font class="keyword">static</font> <font class="keywordtype">void</font> <a class="code" href="classbase_1_1Matrix3.html#a28">decomposeLUP</a>(<font class="keyword">const</font> Matrix3&amp; A, Matrix3&amp; L, Matrix3&amp; U, Vector3&amp; Pi)<font class="keyword"></font>
00248 <font class="keyword">  </font>{ A.decomposeLUP(L,U,Pi); }
00249 
00250   <font class="comment">// best to use the operators than use these directly</font>
00251   <font class="keyword">static</font> Vector3 <a class="code" href="classbase_1_1Matrix3.html#d2">matrixMulVector</a>(<font class="keyword">const</font> Matrix3&amp; m, <font class="keyword">const</font> Vector3&amp; v); <font class="comment">// m x v</font>
00252   <font class="keyword">static</font> Vector3 <a class="code" href="classbase_1_1Matrix3.html#d3">matrixMulVectorAddVector</a>(<font class="keyword">const</font> Matrix3&amp; m, <font class="keyword">const</font> Vector3&amp; v, <font class="keyword">const</font> Vector3&amp; v2); <font class="comment">// m x v + v2</font>
00253 
00254 
00255 <font class="keyword">private</font>:
00256   Real m[9];
00257   
00258   <font class="keywordtype">void</font> setDiag(<font class="keyword">const</font> Real&amp; d)<font class="keyword"></font>
00259 <font class="keyword">  </font>{
00260     m[0] = d;
00261     m[1] = <a class="code" href="namespace__base.html#a5">Real</a>(0);
00262     m[2] = <a class="code" href="namespace__base.html#a5">Real</a>(0);
00263     m[3] = <a class="code" href="namespace__base.html#a5">Real</a>(0);
00264     m[4] = d;
00265     m[5] = <a class="code" href="namespace__base.html#a5">Real</a>(0);
00266     m[6] = <a class="code" href="namespace__base.html#a5">Real</a>(0);
00267     m[7] = <a class="code" href="namespace__base.html#a5">Real</a>(0);
00268     m[8] = d;
00269   }
00270 
00271 };
00272 
00273 
00274 <font class="comment">// Operations</font>
00275 
00276 
00277 <font class="keyword">inline</font> Matrix3 <a class="code" href="namespace__base.html#a36">operator*</a>(<font class="keyword">const</font> Matrix3&amp; m1, <font class="keyword">const</font> Matrix3&amp; m2) <font class="comment">// Matrix multiplication</font>
00278 { Matrix3 r(m1); <font class="keywordflow">return</font> r *= m2; }
00279 
00280 <font class="keyword">inline</font> Matrix3 <a class="code" href="namespace__base.html#a37">operator+</a>(<font class="keyword">const</font> Matrix3&amp; m1, <font class="keyword">const</font> Matrix3&amp; m2) <font class="comment">// Addition</font>
00281 { Matrix3 r(m1); <font class="keywordflow">return</font> r += m2; }
00282 
00283 <font class="keyword">inline</font> Matrix3 <a class="code" href="namespace__base.html#a38">operator-</a>(<font class="keyword">const</font> Matrix3&amp; m1, <font class="keyword">const</font> Matrix3&amp; m2) <font class="comment">// Subtraction</font>
00284 { Matrix3 r(m1); <font class="keywordflow">return</font> r -= m2; }
00285 
00286 <font class="keyword">inline</font> Matrix3 <a class="code" href="namespace__base.html#a38">operator-</a>(<font class="keyword">const</font> Matrix3&amp; m1) <font class="comment">// Negation</font>
00287 { Matrix3 r(m1); <font class="keywordflow">return</font> r.<a class="code" href="namespace__base.html#a103">negate</a>(); }
00288 
00289 <font class="keyword">inline</font> Matrix3 <a class="code" href="namespace__base.html#a36">operator*</a>(<font class="keyword">const</font> Matrix3&amp; m1, <font class="keyword">const</font> Real&amp; s) <font class="comment">// Scalar multiplication</font>
00290 { Matrix3 r(m1); <font class="keywordflow">return</font> r *= s; }
00291 
00292 <font class="keyword">inline</font> Matrix3 <a class="code" href="namespace__base.html#a36">operator*</a>(<font class="keyword">const</font> Real&amp; s, <font class="keyword">const</font> Matrix3&amp; m1) <font class="comment">// Scalar multiplication</font>
00293 { Matrix3 r(m1); <font class="keywordflow">return</font> r *= s; }
00294 
00295 <font class="keyword">inline</font> Matrix3 <a class="code" href="namespace__base.html#a42">operator/</a>(<font class="keyword">const</font> Matrix3&amp; m1, <font class="keyword">const</font> Real&amp; s) <font class="comment">// Scalar division</font>
00296 { Matrix3 r(m1); <font class="keywordflow">return</font> r /= s; }
00297 
00298 <font class="keyword">inline</font> Matrix3 <a class="code" href="namespace__base.html#a43">transpose</a>(<font class="keyword">const</font> Matrix3&amp; m) <font class="comment">// Transpose</font>
00299 { Matrix3 r(m); <font class="keywordflow">return</font> r.<a class="code" href="namespace__base.html#a43">transpose</a>(); }
00300 
00301 <font class="keyword">inline</font> Matrix3 <a class="code" href="namespace__base.html#a44">inverse</a>(<font class="keyword">const</font> Matrix3&amp; m) <font class="comment">// Inverse</font>
00302 { Matrix3 r(m); <font class="keywordflow">return</font> r.invert(); }
00303 
00304 
00305 
00306 
00307 
00308 <font class="comment">// These functions and the structs above provide closures for common vector matrix</font>
00309 <font class="comment">//  operations.</font>
00310 <font class="comment">// For example, an expression like m*v+v2 will expand to:</font>
00311 <font class="comment">//              Matrix3::matrixMulVectorAddVector(m,v,v2);</font>
00312 <font class="comment">// rather than: Vector3 r(operator*(m,v)); r.operator+=(v2), return r</font>
00313 <font class="comment">//   (saving a couple copies between temporaries)</font>
00314 
00315 <font class="keyword">inline</font> M3V3mulV3add <a class="code" href="namespace__base.html#a37">operator+</a>(<font class="keyword">const</font> M3V3mul&amp; mv, <font class="keyword">const</font> Vector3&amp; vv)<font class="keyword"></font>
00316 <font class="keyword"></font>{ <font class="keywordflow">return</font> M3V3mulV3add(mv,vv); }
00317 
00318 <font class="keyword">inline</font> M3V3mul <a class="code" href="namespace__base.html#a36">operator*</a>(<font class="keyword">const</font> Matrix3&amp; mm, <font class="keyword">const</font> Vector3&amp; vv)<font class="keyword"></font>
00319 <font class="keyword"></font>{ <font class="keywordflow">return</font> M3V3mul(mm,vv); }
00320 
00321 <font class="keyword">inline</font> M3V3mul::operator Vector3()<font class="keyword"> const</font>
00322 <font class="keyword"></font>{ <font class="keywordflow">return</font> Matrix3::matrixMulVector(m,v); }
00323 
00324 <font class="keyword">inline</font> M3V3mulV3add::operator Vector3()<font class="keyword"> const</font>
00325 <font class="keyword"></font>{ <font class="keywordflow">return</font> Matrix3::matrixMulVectorAddVector(m,v,v2); }
00326 
00327 
00328 std::ostream&amp; <a class="code" href="namespace__base.html#a47">operator&lt;&lt;</a>(std::ostream&amp; out, <font class="keyword">const</font> Matrix3&amp; m); <font class="comment">// Output</font>
00329 
00330 
00331 } <font class="comment">// base</font>
00332 
00333 <font class="preprocessor">#endif</font>
00334 <font class="preprocessor"></font>
</pre></div><hr><address><small>Generated at Wed Aug 7 10:30:28 2002 for OpenSim by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.8.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
