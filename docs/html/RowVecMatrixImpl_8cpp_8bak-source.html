<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>base/RowVecMatrixImpl.cpp.bak Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>base/RowVecMatrixImpl.cpp.bak</h1><a href="RowVecMatrixImpl_8cpp_8bak.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/****************************************************************************</font>
00002 <font class="comment">  Copyright (C)1996 David Jung &lt;opensim@pobox.com&gt;</font>
00003 <font class="comment"></font>
00004 <font class="comment">  This program/file is free software; you can redistribute it and/or modify</font>
00005 <font class="comment">  it under the terms of the GNU General Public License as published by</font>
00006 <font class="comment">  the Free Software Foundation; either version 2 of the License, or</font>
00007 <font class="comment">  (at your option) any later version.</font>
00008 <font class="comment">  </font>
00009 <font class="comment">  This program is distributed in the hope that it will be useful,</font>
00010 <font class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</font>
00011 <font class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</font>
00012 <font class="comment">  GNU General Public License for more details. (http://www.gnu.org)</font>
00013 <font class="comment">  </font>
00014 <font class="comment">  You should have received a copy of the GNU General Public License</font>
00015 <font class="comment">  along with this program; if not, write to the Free Software</font>
00016 <font class="comment">  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</font>
00017 <font class="comment">  </font>
00018 <font class="comment">  $Id: Matrix.cpp,v 1.6 2001/05/22 19:24:19 jungd Exp $</font>
00019 <font class="comment">  $Revision: 1.6 $</font>
00020 <font class="comment">  $Date: 2001/05/22 19:24:19 $</font>
00021 <font class="comment">  $Author: jungd $</font>
00022 <font class="comment"> </font>
00023 <font class="comment">****************************************************************************/</font>
00024 
00025 <font class="preprocessor">#include &lt;base/RowVecMatrixImpl&gt;</font>
00026 
00027 <font class="keyword">using</font> <a class="code" href="classbase_1_1MatrixImpl.html">base::MatrixImpl</a>;
00028 <font class="keyword">using</font> <a class="code" href="classbase_1_1RowVecMatrixImpl.html">base::RowVecMatrixImpl</a>;
00029 <font class="keyword">using</font> <a class="code" href="classbase_1_1Vector.html">base::Vector</a>;
00030 <font class="keyword">using</font> <a class="code" href="classbase_1_1Matrix4.html">base::Matrix4</a>;
00031 <font class="keyword">using</font> <a class="code" href="classbase_1_1Vector4.html">base::Vector4</a>;
00032 <font class="keyword">using</font> <a class="code" href="classbase_1_1Matrix3.html">base::Matrix3</a>;
00033 
00034 <font class="keyword">using</font> std::ostream;
00035 
00036 
00037 <font class="keyword">inline</font> <font class="keyword">static</font> <font class="keywordtype">void</font> exchange(<a class="code" href="namespacebase.html#a5">Real</a>&amp; a, <a class="code" href="namespacebase.html#a5">Real</a>&amp; b)
00038 {
00039   <a class="code" href="namespacebase.html#a5">Real</a> t(a);
00040   a = b;
00041   b = t;
00042 }
00043 
00044 
<a name="l00045"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImplb0">00045</a> <font class="keywordtype">void</font> RowVecMatrixImpl::construct(<a class="code" href="namespacebase.html#a2">Int</a> rows, <a class="code" href="namespacebase.html#a2">Int</a> cols)
00046 {
00047   <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpln0">ra</a>.resize(<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a>);
00048   <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> ri=0; ri&lt;<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a>; ri++)
00049     <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpln0">ra</a>[ri].resize(cols);
00050 }
00051 
00052 
00053 
<a name="l00054"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla0">00054</a> RowVecMatrixImpl::RowVecMatrixImpl(<a class="code" href="namespacebase.html#a2">Int</a> rows=1, <a class="code" href="namespacebase.html#a2">Int</a> cols=1)
00055   : MatrixImpl(rows,cols)
00056 {
00057   <font class="keywordflow">if</font> ((<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a>==0) || (cols==0))
00058     <font class="keywordflow">throw</font> std::invalid_argument(<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"Matrix rows and cols must be &gt; 0"</font>));
00059   
00060   <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImplb0">construct</a>(<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a>,cols);
00061 }
00062 
<a name="l00063"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla1">00063</a> RowVecMatrixImpl::RowVecMatrixImpl(<font class="keyword">const</font> MatrixImpl&amp; m) 
00064   : MatrixImpl(m)
00065 {
00066   <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImplb0">construct</a>(<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln1">nr</a>,<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln2">nc</a>);
00067   this-&gt;<a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla16">operator=</a>(m); 
00068 }
00069 
<a name="l00070"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla2">00070</a> RowVecMatrixImpl::RowVecMatrixImpl(<font class="keyword">const</font> RowVecMatrixImpl&amp; m) 
00071   : MatrixImpl(m)
00072 {
00073   <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImplb0">construct</a>(<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln1">nr</a>,<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln2">nc</a>);
00074   this-&gt;<a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla16">operator=</a>(m); 
00075 }
00076 
<a name="l00077"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla3">00077</a> RowVecMatrixImpl::~RowVecMatrixImpl() 
00078 {
00079   <font class="keyword">delete</font> <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpln0">ra</a>; 
00080 }
00081 
00082 
00083 
<a name="l00084"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla14">00084</a> <a class="code" href="namespacebase.html#a5">Real</a>&amp; RowVecMatrixImpl::e(<a class="code" href="namespacebase.html#a2">Int</a> row, <a class="code" href="namespacebase.html#a2">Int</a> col) <font class="keywordflow">throw</font>()
00085 {
00086 <font class="preprocessor">#ifdef DEBUG</font>
00087 <font class="preprocessor"></font>  <font class="keywordflow">if</font> ((row &lt; 1) || (row &gt; rows()) || (col &lt; 1 ) || (col &gt; columns()))
00088     <font class="keywordflow">throw</font> <a class="code" href="classstd_1_1runtime__error.html">std::runtime_error</a>(<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"MatrixImpl row or col out of bounds (debug only check)"</font>));
00089   <font class="keywordflow">if</font> (col &gt; ra[row-1].dimension())
00090     <font class="keywordflow">throw</font> <a class="code" href="classstd_1_1runtime__error.html">std::runtime_error</a>(<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"MatrixImpl column is too short(debug only check)"</font>));
00091 <font class="preprocessor">#endif </font>
00092 <font class="preprocessor"></font>  <font class="keywordflow">return</font> ra[row-1][col];
00093 }
00094 
<a name="l00095"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla15">00095</a> <font class="keyword">const</font> <a class="code" href="namespacebase.html#a5">Real</a>&amp; RowVecMatrixImpl::e(<a class="code" href="namespacebase.html#a2">Int</a> row, <a class="code" href="namespacebase.html#a2">Int</a> col) <font class="keyword">const</font> <font class="keywordflow">throw</font>()
00096 {
00097 <font class="preprocessor">#ifdef DEBUG</font>
00098 <font class="preprocessor"></font>  <font class="keywordflow">if</font> ((row &lt; 1) || (row &gt; rows()) || (col &lt; 1 ) || (col &gt; columns()))
00099     <font class="keywordflow">throw</font> <a class="code" href="classstd_1_1runtime__error.html">std::runtime_error</a>(<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"MatrixImpl row or col out of bounds (debug only check)"</font>));
00100   <font class="keywordflow">if</font> (col &gt; ra[row-1].dimension())
00101     <font class="keywordflow">throw</font> <a class="code" href="classstd_1_1runtime__error.html">std::runtime_error</a>(<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"MatrixImpl column is too short(debug only check)"</font>));
00102 <font class="preprocessor">#endif </font>
00103 <font class="preprocessor"></font>  <font class="keywordflow">return</font> ra[row-1][col];
00104 }
00105 
00106 
<a name="l00107"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla6">00107</a> <font class="keywordtype">void</font> RowVecMatrixImpl::setDiagonal(<a class="code" href="namespacebase.html#a5">Real</a> d) <font class="keywordflow">throw</font>()
00108 {
00109   <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> ri=0; ri&lt;nr; ri++) {
00110     <a class="code" href="namespacebase.html#a30">Vector</a>&amp; <a class="code" href="matrix_8c~.html#a20">r</a>(ra[ri]);
00111     r.setZero();
00112     <font class="keywordflow">if</font> (ri &lt; minimum(nr,nc))
00113       r[ri+1] = d;
00114   }
00115 }
00116 
00117 
00118 
00119 
<a name="l00120"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla13">00120</a> <font class="keywordtype">void</font> RowVecMatrixImpl::resize(<a class="code" href="namespacebase.html#a2">Int</a> rows, <a class="code" href="namespacebase.html#a2">Int</a> cols, <font class="keyword">const</font> <a class="code" href="namespacebase.html#a5">Real</a>&amp; diagonal)
00121 {
00122   <font class="keywordflow">if</font> ((<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a>==0) || (cols==0))
00123     <font class="keywordflow">throw</font> std::invalid_argument(<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"Matrix rows and cols must be &gt; 0"</font>));
00124   
00125   <font class="keywordflow">if</font> (<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a> != <a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln1">nr</a>) {
00126 
00127     <font class="keywordflow">if</font> (<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a> &lt; <a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln1">nr</a>) { <font class="comment">// downsizing, delete the excess</font>
00128       <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpln0">ra</a>.resize(<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a>);
00129     }
00130     <font class="keywordflow">else</font> { <font class="comment">// upsizing, fill in like for identity</font>
00131       <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpln0">ra</a>.resize(<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a>);
00132       <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> ri=<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln1">nr</a>; ri&lt;<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a>; ri++) {
00133         <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpln0">ra</a>[ri] = <a class="code" href="namespacebase.html#a30">Vector</a>(cols);
00134         <font class="keywordflow">if</font> (ri&lt; minimum(<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a>,cols))
00135           <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpln0">ra</a>[ri][ri+1] = diagonal;
00136       }
00137     }
00138   }
00139 
00140   <font class="comment">// Now extend the existing rows to the new no. of columns</font>
00141   <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> ri=0; ri&lt;<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln1">nr</a>; ri++) {
00142     <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpln0">ra</a>[ri].resize(cols);
00143     <font class="keywordflow">if</font> (ri+1&gt;<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln2">nc</a>)
00144       <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpln0">ra</a>[ri][ri+1] = diagonal;
00145   }
00146   
00147   <a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln1">nr</a> = <a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a>; <a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln2">nc</a> = cols;
00148 }
00149 
00150 
00151 
<a name="l00152"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla7">00152</a> <a class="code" href="namespacebase.html#a30">Vector</a> RowVecMatrixImpl::getRow(<a class="code" href="namespacebase.html#a2">Int</a> row) <font class="keyword">const</font> <font class="keywordflow">throw</font>()
00153 {
00154   <font class="keywordflow">return</font> ra[row-1];
00155 }
00156 
<a name="l00157"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla8">00157</a> <font class="keywordtype">void</font> RowVecMatrixImpl::setRow(<a class="code" href="namespacebase.html#a2">Int</a> row, <font class="keyword">const</font> <a class="code" href="namespacebase.html#a30">Vector</a>&amp; rowVector) <font class="keywordflow">throw</font>()
00158 {
00159   ra[row-1] = rowVector;
00160 }
00161 
<a name="l00162"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla9">00162</a> <a class="code" href="namespacebase.html#a30">Vector</a> RowVecMatrixImpl::getColumn(<a class="code" href="namespacebase.html#a2">Int</a> col) <font class="keyword">const</font> <font class="keywordflow">throw</font>()
00163 {
00164   <a class="code" href="namespacebase.html#a30">Vector</a> colVector(nr);
00165   <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> r=1; r&lt;=nr; r++)
00166     colVector[r] = e(r,col);
00167   <font class="keywordflow">return</font> colVector;
00168 }
00169 
<a name="l00170"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla10">00170</a> <font class="keywordtype">void</font> RowVecMatrixImpl::setColumn(<a class="code" href="namespacebase.html#a2">Int</a> col, <font class="keyword">const</font> <a class="code" href="namespacebase.html#a30">Vector</a>&amp; colVector) <font class="keywordflow">throw</font>()
00171 {
00172   <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> r=1; r&lt;=nr; r++)
00173     e(r,col) = colVector[r];
00174 }
00175 
<a name="l00176"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla11">00176</a> <font class="keyword">const</font> <a class="code" href="namespacebase.html#a30">Vector</a>&amp; RowVecMatrixImpl::row(<a class="code" href="namespacebase.html#a2">Int</a> row) <font class="keyword">const</font> <font class="keywordflow">throw</font>(std::runtime_error)
00177 {
00178   <font class="keywordflow">return</font> ra[row-1];
00179 }
00180 
<a name="l00181"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla12">00181</a> <a class="code" href="namespacebase.html#a30">Vector</a>&amp; RowVecMatrixImpl::row(<a class="code" href="namespacebase.html#a2">Int</a> row) <font class="keywordflow">throw</font>(std::runtime_error)
00182 {
00183   <font class="keywordflow">return</font> ra[row-1];
00184 }
00185 
<a name="l00186"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla16">00186</a> MatrixImpl&amp; RowVecMatrixImpl::operator=(<font class="keyword">const</font> MatrixImpl&amp; src) <font class="keywordflow">throw</font>()
00187 {
00188   <font class="keywordflow">if</font> (&amp;src == <font class="keyword">this</font>) <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00189 
00190   <font class="keywordflow">if</font> (<a class="code" href="base.html#a24">instanceof</a>(src,<font class="keyword">const</font> RowVecMatrixImpl))
00191     <font class="keywordflow">return</font> RowVecMatrixImpl::operator=(narrow_cast&lt;const RowVecMatrixImpl&gt;(src));
00192   <font class="keywordflow">else</font>
00193     <font class="keywordflow">return</font> MatrixImpl::operator=(src);
00194 }
00195 
00196 
<a name="l00197"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla17">00197</a> RowVecMatrixImpl&amp; RowVecMatrixImpl::operator=(<font class="keyword">const</font> RowVecMatrixImpl&amp; src) <font class="keywordflow">throw</font>()
00198 { 
00199   <font class="keywordflow">if</font> (&amp;src != <font class="keyword">this</font>) {
00200     nr = src.rows();
00201     nc = src.columns();
00202     ra.resize(nr);
00203     
00204     <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> ri=0; ri&lt;nr; ri++)
00205       ra[ri] = src.ra[ri];
00206   }
00207   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00208 }
00209 
00210 
<a name="l00211"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla18">00211</a> RowVecMatrixImpl&amp; RowVecMatrixImpl::operator=(<font class="keyword">const</font> <a class="code" href="namespacebase.html#a30">Vector</a>&amp; src) <font class="keywordflow">throw</font>()
00212 {
00213   <font class="keywordflow">if</font> ((nr != src.dimension()) || (nc != 1)) {
00214     nr = 1;
00215     nc = src.dimension(); 
00216     ra.resize(nr);
00217   }
00218   ra[0] = src;
00219   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00220 }
00221 
<a name="l00222"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla19">00222</a> <font class="keywordtype">bool</font> RowVecMatrixImpl::operator==(<font class="keyword">const</font> MatrixImpl&amp; <a class="code" href="analytical_8c.html#a20">m1</a>) <font class="keyword">const</font> <font class="keywordflow">throw</font>()
00223 {
00224   <font class="keywordflow">if</font> (&amp;<a class="code" href="analytical_8c.html#a20">m1</a> != <font class="keyword">this</font>) {
00225 
00226     <font class="keywordflow">if</font> (<a class="code" href="base.html#a24">instanceof</a>(<a class="code" href="analytical_8c.html#a20">m1</a>,<font class="keyword">const</font> RowVecMatrixImpl)) {
00227       
00228       <font class="keyword">const</font> RowVecMatrixImpl&amp; m = narrow_cast&lt;const RowVecMatrixImpl&gt;(m1);
00229       <font class="keywordflow">try</font> {
00230         <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> ri=0; ri&lt;nr; ri++)
00231           <font class="keywordflow">if</font> (ra[ri] != m.ra[ri])
00232             <font class="keywordflow">return</font> <font class="keyword">false</font>;
00233 
00234       } <font class="keywordflow">catch</font> (std::invalid_argument&amp; e) {
00235         <a class="code" href="base.html#a22">Assertifm</a>(<font class="keyword">true</font>,<font class="keyword">false</font>,<font class="stringliteral">"this and m1 have a rows of same dimension"</font>);
00236       }
00237     }
00238     <font class="keywordflow">else</font> 
00239       <font class="keywordflow">return</font> MatrixImpl::operator==(<a class="code" href="analytical_8c.html#a20">m1</a>);
00240   }
00241   <font class="keywordflow">return</font> <font class="keyword">true</font>;
00242 }
00243 
00244 
<a name="l00245"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla20">00245</a> <font class="keywordtype">bool</font> RowVecMatrixImpl::equals(<font class="keyword">const</font> MatrixImpl&amp; <a class="code" href="analytical_8c.html#a20">m1</a>) <font class="keyword">const</font> <font class="keywordflow">throw</font>()
00246 {
00247   <font class="keywordflow">if</font> (&amp;<a class="code" href="analytical_8c.html#a20">m1</a> != <font class="keyword">this</font>) {
00248 
00249     <font class="keywordflow">if</font> (<a class="code" href="base.html#a24">instanceof</a>(<a class="code" href="analytical_8c.html#a20">m1</a>,<font class="keyword">const</font> RowVecMatrixImpl)) {
00250    
00251       <font class="keyword">const</font> RowVecMatrixImpl&amp; m = narrow_cast&lt;const RowVecMatrixImpl&gt;(m1);
00252       <font class="keywordflow">try</font> {
00253         <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> ri=0; ri&lt;nr; ri++) 
00254           <font class="keywordflow">if</font> (!ra[ri].equals(m.ra[ri]))
00255             <font class="keywordflow">return</font> <font class="keyword">false</font>;
00256         
00257       } <font class="keywordflow">catch</font> (std::invalid_argument&amp; e) {
00258         <a class="code" href="base.html#a22">Assertifm</a>(<font class="keyword">true</font>,<font class="keyword">false</font>,<font class="stringliteral">"this and m1 have a rows of same dimension"</font>);
00259       }
00260     }
00261     <font class="keywordflow">else</font> 
00262       <font class="keywordflow">return</font> MatrixImpl::equals(<a class="code" href="analytical_8c.html#a20">m1</a>);
00263   }
00264   <font class="keywordflow">return</font> <font class="keyword">true</font>;
00265 }
00266 
00267 
<a name="l00268"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla21">00268</a> MatrixImpl&amp; RowVecMatrixImpl::transpose()
00269 {
00270   <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla0">RowVecMatrixImpl</a> t(<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln2">nc</a>,<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln1">nr</a>);
00271   <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> r=1; r&lt;=<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln1">nr</a>; r++)
00272     <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> c=1; c&lt;=<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln2">nc</a>; c++)
00273       t.e(c,r) = <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla14">e</a>(r,c);
00274   *<font class="keyword">this</font> = t;
00275 
00276   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00277 }
00278 
00279 
00280 
00281 
00282 
<a name="l00283"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla29">00283</a> MatrixImpl&amp; RowVecMatrixImpl::operator-() <font class="keywordflow">throw</font>()
00284 {
00285   <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> ri=0; ri&lt;nr; ri++)
00286     ra[ri].negate();
00287   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00288 }
00289 
00290 <font class="comment">/*</font>
00291 <font class="comment">MatrixImpl SimpleMatrixSimpl::select(const Vector&amp; rowIndices,</font>
00292 <font class="comment">                                     const Vector&amp; colIndices) const throw(std::out_of_range)</font>
00293 <font class="comment">{</font>
00294 <font class="comment">  const Vector&amp; ri(rowIndices); // save typing</font>
00295 <font class="comment">  const Vector&amp; ci(colIndices);</font>
00296 <font class="comment"></font>
00297 <font class="comment">  if ((ri.dimension()==0) || (ci.dimension()==0))</font>
00298 <font class="comment">    throw std::out_of_range(Exception("index arrays can't be empty"));</font>
00299 <font class="comment"></font>
00300 <font class="comment">  RowVecMatrixImpl s(ri.dimension(), ci.dimension());</font>
00301 <font class="comment">  for(Int r=1; r&lt;=ri.dimension(); r++)</font>
00302 <font class="comment">    for(Int c=1; c&lt;=ci.dimension(); c++) {</font>
00303 <font class="comment">      if (   (Int(ri[r]) &lt; 1) || (Int(ri[r]) &gt; nr) </font>
00304 <font class="comment">          || (Int(ci[c]) &lt; 1) || (Int(ci[c]) &gt; nc))</font>
00305 <font class="comment">        throw std::out_of_range(Exception("index out of range"));</font>
00306 <font class="comment">      s.e(r,c) = e(Int(ri[r]), Int(ci[c]));</font>
00307 <font class="comment">    }</font>
00308 <font class="comment">  return s;</font>
00309 <font class="comment">}</font>
00310 <font class="comment">*/</font>
00311 
<a name="l00312"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla22">00312</a> MatrixImpl&amp; RowVecMatrixImpl::swapRows(<a class="code" href="namespacebase.html#a2">Int</a> i, <a class="code" href="namespacebase.html#a2">Int</a> j) <font class="keywordflow">throw</font>()
00313 {
00314   ra[i-1].swap(ra[j-1]);
00315   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00316 }
00317 
<a name="l00318"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla23">00318</a> MatrixImpl&amp; RowVecMatrixImpl::swapCols(<a class="code" href="namespacebase.html#a2">Int</a> i, <a class="code" href="namespacebase.html#a2">Int</a> j) <font class="keywordflow">throw</font>()
00319 {
00320   <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> r=1; r&lt;=nr; r++)
00321     exchange(e(r,i),e(r,j));
00322   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00323 }
00324 
00325 
00326 
<a name="l00327"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla24">00327</a> <font class="keywordtype">void</font> RowVecMatrixImpl::getSubMatrix(<a class="code" href="namespacebase.html#a2">Int</a> row, <a class="code" href="namespacebase.html#a2">Int</a> col, <a class="code" href="namespacebase.html#a2">Int</a> rows, <a class="code" href="namespacebase.html#a2">Int</a> cols, MatrixImpl&amp; sm)<font class="keyword"> const</font>
00328 <font class="keyword"></font>{
00329   <font class="keywordflow">if</font> ((<a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla11">row</a>+<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a>-1 &gt; <a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln1">nr</a>) || (col+cols-1 &gt; <a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln2">nc</a>))
00330     <font class="keywordflow">throw</font> std::invalid_argument(<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"Submatrix is out of bounds"</font>));
00331 
00332   <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> r=<a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla11">row</a>; r&lt;<a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla11">row</a>+<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a>; r++)
00333     <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> c=col; c&lt;col+cols; c++)
00334       sm.e(r-<a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla11">row</a>+1,c-col+1) = <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla14">e</a>(r,c);
00335 }
00336 
00337 
<a name="l00338"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla25">00338</a> <font class="keywordtype">void</font> RowVecMatrixImpl::setSubMatrix(<a class="code" href="namespacebase.html#a2">Int</a> row, <a class="code" href="namespacebase.html#a2">Int</a> col, <font class="keyword">const</font> MatrixImpl&amp; sm)
00339 {
00340   <a class="code" href="namespacebase.html#a2">Int</a> <a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a> = sm.rows();
00341   <a class="code" href="namespacebase.html#a2">Int</a> cols = sm.columns();
00342 
00343   <font class="keywordflow">if</font> ((<a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla11">row</a>+<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a>-1 &gt; <a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln1">nr</a>) || (col+cols-1 &gt; <a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpln2">nc</a>))
00344     <font class="keywordflow">throw</font> std::invalid_argument(<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"Submatrix is out of bounds"</font>));
00345 
00346   <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> r=<a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla11">row</a>; r&lt;<a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla11">row</a>+<a class="code" href="classbase_1_1MatrixImpl.html#base_1_1StandardMatrixImpla31">rows</a>; r++)
00347     <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> c=col; c&lt;col+cols; c++)
00348       <a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla14">e</a>(r,c) = sm.e(r-<a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla11">row</a>+1,c-col+1);
00349 }
00350 
00351 
00352 
00353 
00354 <font class="comment">// Operators</font>
00355 
00356 <font class="comment">// multiplication</font>
<a name="l00357"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla26">00357</a> MatrixImpl&amp; RowVecMatrixImpl::operator*=(<font class="keyword">const</font> MatrixImpl&amp; <a class="code" href="analytical_8c.html#a21">m2</a>) <font class="keywordflow">throw</font>()
00358 {
00359   RowVecMatrixImpl <a class="code" href="matrix_8c~.html#a20">r</a>(nr,<a class="code" href="analytical_8c.html#a21">m2</a>.columns());
00360 
00361   <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> i=1; i&lt;=nr; i++)
00362     <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> j=1; j&lt;=<a class="code" href="analytical_8c.html#a21">m2</a>.columns(); j++) {
00363       r.e(i,j) = <a class="code" href="namespacebase.html#a5">Real</a>(0);
00364       <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> k=1; k&lt;=nc; k++)
00365         r.e(i,j) += e(i,k) * <a class="code" href="analytical_8c.html#a21">m2</a>.e(k,j);
00366     }
00367  
00368   <font class="keywordflow">return</font> (*<font class="keyword">this</font> = r);
00369 }
00370 
00371 <font class="comment">// addition</font>
<a name="l00372"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla27">00372</a> MatrixImpl&amp; RowVecMatrixImpl::operator+=(<font class="keyword">const</font> MatrixImpl&amp; <a class="code" href="analytical_8c.html#a21">m2</a>) <font class="keywordflow">throw</font>()
00373 {
00374   <font class="keywordflow">if</font> (<a class="code" href="base.html#a24">instanceof</a>(<a class="code" href="analytical_8c.html#a21">m2</a>,<font class="keyword">const</font> RowVecMatrixImpl)) {
00375      <font class="keyword">const</font> RowVecMatrixImpl&amp; m = narrow_cast&lt;const RowVecMatrixImpl&gt;(m2);
00376 
00377     <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> ri=0; ri&lt;nr; ri++)
00378       ra[ri] += m.ra[ri];
00379   }
00380   <font class="keywordflow">else</font> {
00381     <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> r=1; r&lt;=nr; r++)
00382       <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> c=1; c&lt;=nc; c++)
00383         e(r,c) += <a class="code" href="analytical_8c.html#a21">m2</a>.e(r,c);
00384   }
00385 
00386   <font class="keywordflow">return</font> (*this);
00387 }
00388 
00389 <font class="comment">// subtration</font>
<a name="l00390"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla28">00390</a> MatrixImpl&amp; RowVecMatrixImpl::operator-=(<font class="keyword">const</font> MatrixImpl&amp; <a class="code" href="analytical_8c.html#a21">m2</a>) <font class="keywordflow">throw</font>()
00391 {
00392   <font class="keywordflow">if</font> (<a class="code" href="base.html#a24">instanceof</a>(<a class="code" href="analytical_8c.html#a21">m2</a>,<font class="keyword">const</font> RowVecMatrixImpl)) {
00393     <font class="keyword">const</font> RowVecMatrixImpl&amp; m = narrow_cast&lt;const RowVecMatrixImpl&gt;(m2);
00394 
00395     <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> ri=0; ri&lt;nr; ri++)
00396       ra[ri] -= m.ra[ri];
00397   }
00398   <font class="keywordflow">else</font>{
00399     <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> r=1; r&lt;=nr; r++)
00400       <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> c=1; c&lt;=nc; c++)
00401         e(r,c) -= <a class="code" href="analytical_8c.html#a21">m2</a>.e(r,c);
00402   }
00403 
00404   <font class="keywordflow">return</font> (*this);
00405 }
00406 
00407 <font class="comment">// Scalar multiplication</font>
<a name="l00408"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla30">00408</a> MatrixImpl&amp; RowVecMatrixImpl::operator*=(<a class="code" href="namespacebase.html#a5">Real</a> s) <font class="keywordflow">throw</font>()
00409 { 
00410   <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> ri=0; ri&lt;nr; ri++)
00411     ra[ri] *= s;
00412   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00413 }
00414 
00415 <font class="comment">// Scalar division</font>
<a name="l00416"></a><a class="code" href="classbase_1_1RowVecMatrixImpl.html#base_1_1RowVecMatrixImpla31">00416</a> MatrixImpl&amp; RowVecMatrixImpl::operator/=(<a class="code" href="namespacebase.html#a5">Real</a> s) <font class="keywordflow">throw</font>()
00417 {
00418   <font class="keywordflow">for</font>(<a class="code" href="namespacebase.html#a2">Int</a> ri=0; ri&lt;nr; ri++)
00419     ra[ri] /= s;
00420   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00421 }
00422 
00423 
00424 
00425 
00426 
00427 
00428 
00429 
00430 
</pre></div><hr><address><small>Generated on Sun Mar 30 14:02:13 2003 for OpenSim by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
