<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OpenSim: robot/control/oldikor/IKOR/useful_UTILS.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>robot/control/oldikor/IKOR/useful_UTILS.c</h1><a href="useful__UTILS_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/* ________________________________________________________</span>
00002 <span class="comment">  |                                                        |</span>
00003 <span class="comment">  | Program Name:   useful_UTILS.c                         |</span>
00004 <span class="comment">  |________________________________________________________|</span>
00005 <span class="comment">  |                                                        |</span>
00006 <span class="comment">  | description: This file contains stuff that I'm not sure|</span>
00007 <span class="comment">  |    where to put it in the system.  Some of them like   |</span>
00008 <span class="comment">  |    Solutions_init really don't belong here, others     |</span>
00009 <span class="comment">  |    might. I recommend that if you too have procedures  |</span>
00010 <span class="comment">  |    to add and not quite sure where they should go,     |</span>
00011 <span class="comment">  |    leave them here_(8^&gt;).                              |</span>
00012 <span class="comment">  |                                                        |</span>
00013 <span class="comment">  | Procedures:                                            |</span>
00014 <span class="comment">  |    IKerror          :                                  |</span>
00015 <span class="comment">  |    Solutions_init   :                                  |</span>
00016 <span class="comment">  |    Solutions_free   :                                  |</span>
00017 <span class="comment">  |    GetData          :                                  |</span>
00018 <span class="comment">  |    spheres          :                                  |</span>
00019 <span class="comment">  |    fmat_pr/fmat_prf :                                  |</span>
00020 <span class="comment">  |    fprint_norm      :                                  |</span>
00021 <span class="comment">  |________________________________________________________| */</span>
00022 
00023 
00024 <span class="preprocessor">#include &lt;<a class="code" href="general_8h.html">IKOR/general.h</a>&gt;</span>       <span class="comment">/* Header File to link all others */</span>
00025 
00026 <span class="comment">/* ________________________________________________________</span>
00027 <span class="comment">  | name:    IKerror                                       |</span>
00028 <span class="comment">  | description: Prints out error message and exits to     |</span>
00029 <span class="comment">  |          to the system, if desired.                    |</span>
00030 <span class="comment">  |                                                        |</span>
00031 <span class="comment">  | inputs:   error_vector and fatal flag.                 |</span>
00032 <span class="comment">  | outputs:  error message displayed to screen.           |</span>
00033 <span class="comment">  |________________________________________________________|</span>
00034 <span class="comment">  | Authors:     Date:     Modifications:                  |</span>
00035 <span class="comment">  | c hacker     3/95      Created                         |</span>
00036 <span class="comment">  |________________________________________________________| */</span>
00037 
<a name="l00038"></a><a class="code" href="useful__UTILS_8c.html#a0">00038</a> <span class="keywordtype">void</span> <a class="code" href="useful__UTILS_8c.html#a0">IKerror</a>(<span class="keywordtype">int</span> error_vector, <span class="keywordtype">int</span> fatal, <span class="keywordtype">char</span> *mesg)
00039 {
00040   fprintf (stderr, <span class="stringliteral">"\nERROR %d: "</span>, error_vector);
00041   <span class="keywordflow">switch</span>  (error_vector) {
00042       <span class="keywordflow">case</span> 10: fprintf (stderr, <span class="stringliteral">"FSP didn't complete!\n"</span>);             <span class="keywordflow">break</span>;
00043       <span class="keywordflow">case</span> 11: fprintf (stderr, <span class="stringliteral">"Unable to Open '%s'\n"</span>, mesg);        <span class="keywordflow">break</span>;
00044       <span class="keywordflow">case</span> 12: fprintf (stderr, <span class="stringliteral">"General File Error in '%s'"</span>, mesg);   <span class="keywordflow">break</span>;
00045       <span class="keywordflow">case</span> 15: fprintf (stderr, <span class="stringliteral">"Too Many Points in Trajectory. '%s'\n"</span>,mesg);
00046                                                                        <span class="keywordflow">break</span>;
00047       <span class="keywordflow">case</span> 16: fprintf (stderr, <span class="stringliteral">"Request Joint Space %d is &gt; %d in %s.\n"</span>,
00048                                                  M, <a class="code" href="general_8h.html#a57">Robot</a>-&gt;<a class="code" href="structManipulator__struct.html#Manipulator__structo0">NA</a>,mesg);   <span class="keywordflow">break</span>;
00049       <span class="keywordflow">case</span> 17: fprintf (stderr, <span class="stringliteral">"Requested Task Space %d is &gt; 6 in %s.\n"</span>,
00050                                                               mesg);   <span class="keywordflow">break</span>;
00051       <span class="keywordflow">case</span> 18: fprintf (stderr, <span class="stringliteral">"Memory allocation error in 's'\n"</span>,mesg);
00052                                                                        <span class="keywordflow">break</span>;
00053       <span class="keywordflow">case</span> 19: fprintf (stderr, <span class="stringliteral">"Manipulator File Integrity Lost \n Bad data"</span>,
00054                                 <span class="stringliteral">" file: ROBOT.dat in '%s'\n"</span>, mesg);   <span class="keywordflow">break</span>;
00055       <span class="keywordflow">case</span> 21: fprintf (stderr, <span class="stringliteral">"SORRY!...more constraints %s %s\n"</span>,
00056                                 <span class="stringliteral">"than D.O.R. in procedure: "</span>, mesg);   <span class="keywordflow">break</span>;
00057       <span class="keywordflow">case</span> 23: fprintf (stderr, <span class="stringliteral">"Defaulting to using one-shot in %s.\n"</span>,
00058                                                               mesg);   <span class="keywordflow">break</span>;
00059       <span class="keywordflow">case</span> 24: fprintf (stderr, <span class="stringliteral">"Platform does not exist, see %s.\n"</span>, mesg);
00060                                                                        <span class="keywordflow">break</span>;
00061       <span class="keywordflow">case</span> 25: fprintf (stderr, <span class="stringliteral">"System did not complete.\n"</span>);         <span class="keywordflow">break</span>;
00062       <span class="keywordflow">case</span> 26: fprintf (stderr, <span class="stringliteral">"Requested dx[%s] too large.\n"</span>,mesg); <span class="keywordflow">break</span>;
00063       <span class="keywordflow">case</span> 29: fprintf (stderr, <span class="stringliteral">"%s%s%s\n"</span>, <span class="stringliteral">"System Error: Did not Execute One"</span>,
00064                                 <span class="stringliteral">" Step or Two Step in "</span>,mesg);         <span class="keywordflow">break</span>;
00065       <span class="keywordflow">case</span> 30: fprintf (stderr, <span class="stringliteral">"Division by zero in Analytical.c\n"</span>); <span class="keywordflow">break</span>;
00066       <span class="keywordflow">case</span> 31: fprintf (stderr, <span class="stringliteral">"Option UnImplemented: %s\n"</span>,mesg);    <span class="keywordflow">break</span>;
00067       <span class="keywordflow">default</span>: fprintf (stderr, <span class="stringliteral">"No such Error. error_vector doesn't exist.\n"</span>);
00068   }
00069 
00070   <span class="keywordflow">if</span> (fatal == <a class="code" href="general_8h.html#a23">FATAL</a>)
00071      { fprintf(stderr, <span class="stringliteral">"FATAL Error.  aborting... \n"</span>); abort(); }
00072   <span class="keywordflow">else</span> fprintf(stderr, <span class="stringliteral">"Error not Fatal.  Continuing execution...\n"</span>);
00073 }
00074 
00075 
00076 <span class="comment">/* ________________________________________________________</span>
00077 <span class="comment">  | name:    Solutions_init                                |</span>
00078 <span class="comment">  | description: The Solutions structure is explained in   |</span>
00079 <span class="comment">  |     structures.h, this procedure is used to declare    |</span>
00080 <span class="comment">  |     and allocate memory for the structure.             |</span>
00081 <span class="comment">  |                                                        |</span>
00082 <span class="comment">  | inputs:  M (joint space) and N (Task space)            |</span>
00083 <span class="comment">  | outputs: Allocates memory for the three Matrixes as    |</span>
00084 <span class="comment">  |     well as the structure itself. Also initializes     |</span>
00085 <span class="comment">  |     M, N, Mred, Nred (Mred and Nred are the current    |</span>
00086 <span class="comment">  |     delienators of the space, they are changed in      |</span>
00087 <span class="comment">  |     the file FSP.c in the function ReduceA.            |</span>
00088 <span class="comment">  |________________________________________________________|</span>
00089 <span class="comment">  | Authors:     Date:     Modifications:                  |</span>
00090 <span class="comment">  | c hacker     3/95      Created                         |</span>
00091 <span class="comment">  |________________________________________________________| */</span>
00092 
<a name="l00093"></a><a class="code" href="useful__UTILS_8c.html#a1">00093</a> <a class="code" href="structSolutions.html">Solutions</a> *<a class="code" href="useful__UTILS_8c.html#a1">Solutions_init</a>(<span class="keywordtype">int</span> M, <span class="keywordtype">int</span> N)
00094 {
00095   <span class="keywordtype">int</span> i, j;
00096   <a class="code" href="structSolutions.html">Solutions</a> *Temp;
00097 
00098   Temp = (<a class="code" href="structSolutions.html">Solutions</a> *) malloc( <span class="keyword">sizeof</span>( <a class="code" href="structSolutions.html">Solutions</a> ) );
00099   Temp-&gt;<a class="code" href="structSolutions.html#Solutionso6">g</a>       = <a class="code" href="matrix_8h.html#a25">mat_malloc</a>( M, M);         <span class="comment">/* Soln   */</span>
00100   Temp-&gt;<a class="code" href="structSolutions.html#Solutionso7">Qarray</a>  = <a class="code" href="matrix_8h.html#a25">mat_malloc</a>( M, 1);         <span class="comment">/* Angles */</span>
00101   Temp-&gt;<a class="code" href="structSolutions.html#Solutionso10">Xelim</a>   = <a class="code" href="matrix_8h.html#a25">mat_malloc</a>( M, 1);         <span class="comment">/* Angles */</span>
00102   Temp-&gt;<a class="code" href="structSolutions.html#Solutionso9">betall</a>  = <a class="code" href="matrix_8h.html#a25">mat_malloc</a>( M - N + 15, M); <span class="comment">/* Betas  */</span>
00103 
00104   <span class="keywordflow">for</span> (i=0; i&lt; Temp-&gt;<a class="code" href="structSolutions.html#Solutionso9">betall</a>-&gt;<a class="code" href="structMATRIX.html#MATRIXo1">rows</a>; i++)
00105         <span class="keywordflow">for</span> (j=0; j&lt;Temp-&gt;<a class="code" href="structSolutions.html#Solutionso9">betall</a>-&gt;<a class="code" href="structMATRIX.html#MATRIXo2">cols</a>; j++)
00106                 Temp-&gt;<a class="code" href="structSolutions.html#Solutionso9">betall</a>-&gt;<a class="code" href="structMATRIX.html#MATRIXo0">p</a>[i][j]=0.0;
00107 
00108   <span class="keywordflow">if</span>(!Temp) <a class="code" href="useful__UTILS_8c.html#a0">IKerror</a>(18, <a class="code" href="general_8h.html#a23">FATAL</a>, <span class="stringliteral">"Solutions_init"</span>);
00109 
00110   Temp-&gt;<a class="code" href="structSolutions.html#Solutionso0">M</a> = Temp-&gt;<a class="code" href="structSolutions.html#Solutionso2">Mred</a> = M;    <span class="comment">/* init  space size */</span>
00111   Temp-&gt;<a class="code" href="structSolutions.html#Solutionso1">N</a> = Temp-&gt;<a class="code" href="structSolutions.html#Solutionso3">Nred</a> = N;
00112   Temp-&gt;<a class="code" href="structSolutions.html#Solutionso4">cn</a> = 0;                <span class="comment">/* init # constrnts */</span>
00113 
00114   <span class="keywordflow">return</span> (Temp);
00115 }
00116 
00117 <span class="comment">/* ________________________________________________________</span>
00118 <span class="comment">  | name:    Solutions_free                                |</span>
00119 <span class="comment">  | description: The Solutions structure is explained in   |</span>
00120 <span class="comment">  |     structures.h, this procedure is used to free       |</span>
00121 <span class="comment">  |     any allocated memory for the structure.            |</span>
00122 <span class="comment">  |                                                        |</span>
00123 <span class="comment">  | inputs:  M (joint space) and N (Task space)            |</span>
00124 <span class="comment">  | outputs: Deallocates memory for the three Matrixes as  |</span>
00125 <span class="comment">  |     well as the structure itself.                      |</span>
00126 <span class="comment">  |________________________________________________________|</span>
00127 <span class="comment">  | Authors:     Date:     Modifications:                  |</span>
00128 <span class="comment">  | c hacker     3/95      Created                         |</span>
00129 <span class="comment">  |________________________________________________________| */</span>
00130 
<a name="l00131"></a><a class="code" href="useful__UTILS_8c.html#a2">00131</a> <span class="keywordtype">void</span> <a class="code" href="useful__UTILS_8c.html#a2">Solutions_free</a>( <a class="code" href="structSolutions.html">Solutions</a> *Temp )
00132 {
00133   <a class="code" href="matrix_8h.html#a8">mat_free</a>(Temp-&gt;<a class="code" href="structSolutions.html#Solutionso9">betall</a>);
00134   <a class="code" href="matrix_8h.html#a8">mat_free</a>(Temp-&gt;<a class="code" href="structSolutions.html#Solutionso7">Qarray</a>);
00135   <a class="code" href="matrix_8h.html#a8">mat_free</a>(Temp-&gt;<a class="code" href="structSolutions.html#Solutionso10">Xelim</a>);
00136   <a class="code" href="matrix_8h.html#a8">mat_free</a>(Temp-&gt;<a class="code" href="structSolutions.html#Solutionso6">g</a>);
00137   free ( (<span class="keywordtype">char</span> *) Temp);
00138 }
00139 
00140 
00141 <span class="comment">/* ________________________________________________________</span>
00142 <span class="comment">  | name:    GetData                                       |</span>
00143 <span class="comment">  | description:    read in A and b vector to be used for  |</span>
00144 <span class="comment">  |     testing the code with a single jacobian and dx. The|</span>
00145 <span class="comment">  |     macro DEBUG_FSP must be defined in the file:       |</span>
00146 <span class="comment">  |                    general.h.                          |</span>
00147 <span class="comment">  |                                                        |</span>
00148 <span class="comment">  | inputs:  A file called : FSP_data                      |</span>
00149 <span class="comment">  | outputs: Aorig, borig                                  |</span>
00150 <span class="comment">  |________________________________________________________|</span>
00151 <span class="comment">  | Authors:     Date:     Modifications:                  |</span>
00152 <span class="comment">  |  K Morgansn  6/94      Created                         |</span>
00153 <span class="comment">  |  c hacker    3/95      Removed struct from header      |</span>
00154 <span class="comment">  |________________________________________________________| */</span>
00155 
<a name="l00156"></a><a class="code" href="useful__UTILS_8c.html#a3">00156</a> <a class="code" href="useful__UTILS_8c.html#a3">GetData</a> ( <a class="code" href="structMATRIX.html">MATRIX</a> *A,  <a class="code" href="structMATRIX.html">MATRIX</a> *b)
00157 {
00158   FILE *fpin;
00159   <span class="keywordtype">int</span> i, j;
00160 
00161   fpin = fopen(<span class="stringliteral">"FSP_data"</span>, <span class="stringliteral">"r"</span>);
00162 
00163   <span class="keywordflow">for</span> (i=0; i&lt;N; i++)
00164     <span class="keywordflow">for</span> (j=0; j&lt;M; j++)
00165       fscanf(fpin, <span class="stringliteral">"%f"</span>, &amp;A-&gt;<a class="code" href="structMATRIX.html#MATRIXo0">p</a>[i][j]);
00166 
00167   <span class="keywordflow">for</span> (i=0; i&lt;N; i++)
00168     fscanf(fpin, <span class="stringliteral">"%f"</span>, &amp;b-&gt;<a class="code" href="structMATRIX.html#MATRIXo0">p</a>[i][0]);
00169 
00170   fclose(fpin);
00171 }
00172 
00173 
00174 <span class="comment">/* ________________________________________________________</span>
00175 <span class="comment">  | name:    spheres                                       |</span>
00176 <span class="comment">  | description: spheres reads a datafile, or user's input |</span>
00177 <span class="comment">  |     for data concerning spherical objects.  However, I |</span>
00178 <span class="comment">  |     rarely use this in an windows interface becuase it |</span>
00179 <span class="comment">  |     is easier to just change the sphere_data file it-  |</span>
00180 <span class="comment">  |     self, but to each his own.                         |</span>
00181 <span class="comment">  | inputs:  spheredata a 2D array                         |</span>
00182 <span class="comment">  | outputs: spheredata contains spherical obstacles.      |</span>
00183 <span class="comment">  |________________________________________________________|</span>
00184 <span class="comment">  | Authors:     Date:     Modifications:                  |</span>
00185 <span class="comment">  | F Tulloch    2/93      Created                         |</span>
00186 <span class="comment">  | c hacker    10/94      removed spheredata as global    |</span>
00187 <span class="comment">  |________________________________________________________| */</span>
00188 
<a name="l00189"></a><a class="code" href="useful__UTILS_8c.html#a4">00189</a> <span class="keywordtype">int</span> <a class="code" href="useful__UTILS_8c.html#a4">spheres</a>(spheredata, datafp)
00190 FILE  *<a class="code" href="general_8h.html#a34">datafp</a>;
00191 <span class="keywordtype">double</span> spheredata[4][4];
00192 {
00193   <span class="keywordtype">int</span>   ns, sphere_no, i;
00194   FILE *sphere_file;
00195   <span class="keywordtype">char</span>  question=<span class="charliteral">'n'</span>;
00196 
00197   <span class="keywordflow">if</span> (<a class="code" href="general_8h.html#a56">CHANGE_SPHERES</a>)
00198   {
00199     fprintf(stdout, <span class="stringliteral">"\nDo you want to change the spheres? "</span>);
00200     scanf(<span class="stringliteral">" %c"</span>, &amp;question);
00201   }
00202 
00203   <span class="keywordflow">if</span> ((sphere_file = fopen(<span class="stringliteral">"sphere_data"</span>, <span class="stringliteral">"r+"</span>)) == NULL)
00204   { <a class="code" href="useful__UTILS_8c.html#a0">IKerror</a>(11, <a class="code" href="general_8h.html#a24">OK</a>, <span class="stringliteral">"sphere_data"</span>); <span class="keywordflow">return</span> 0; }
00205   
00206   <span class="keywordflow">if</span> ((question != <span class="charliteral">'Y'</span>) &amp;&amp; (question != <span class="charliteral">'y'</span>))
00207   {
00208     fscanf(sphere_file, <span class="stringliteral">"%d"</span>, &amp;ns);
00209     <span class="keywordflow">for</span> (sphere_no = 0; sphere_no &lt; ns; sphere_no++)
00210       <span class="keywordflow">for</span> (i = 0; i &lt; 4; i++)
00211         fscanf(sphere_file, <span class="stringliteral">"%lf"</span>, &amp;spheredata[sphere_no][i]);
00212   }
00213   <span class="keywordflow">else</span>
00214   {
00215     fprintf(stdout, <span class="stringliteral">"How many spheres? (4 max): "</span>);
00216 
00217     <span class="comment">/*IF FILE EXISTS IT MUST  define how        */</span>
00218     <span class="comment">/*  many spheres to read even if 0 spheres  */</span>
00219     <span class="comment">/* (don't just have an empty file.)         */</span>
00220     scanf(<span class="stringliteral">"%d"</span>, &amp;ns);
00221     <span class="keywordflow">if</span> (ns &gt; 4)  ns = 4; <span class="comment">/*LIMITATION*/</span>
00222 
00223     <span class="keywordflow">for</span> (i = 0; i &lt; ns; i++)
00224     {
00225       fprintf(stdout, <span class="stringliteral">"xcenter of sphere[%d]: "</span>, i);
00226       fscanf(stdin, <span class="stringliteral">"%f"</span>, &amp;spheredata[i][0]);
00227       fprintf(stdout, <span class="stringliteral">"ycenter of sphere[%d]: "</span>, i);
00228       fscanf(stdin, <span class="stringliteral">"%f"</span>, &amp;spheredata[i][1]);
00229       fprintf(stdout, <span class="stringliteral">"zcenter of sphere[%d]: "</span>, i);
00230       fscanf(stdin, <span class="stringliteral">"%f"</span>, &amp;spheredata[i][2]);
00231       fprintf(stdout, <span class="stringliteral">" radius of sphere[%d]: "</span>, i);
00232       fscanf(stdin, <span class="stringliteral">"%f"</span>, &amp;spheredata[i][3]);
00233     }
00234 
00235     fprintf(sphere_file, <span class="stringliteral">"%i\n"</span>, ns);
00236     <span class="keywordflow">for</span> (sphere_no = 0; sphere_no &lt; ns; sphere_no++)
00237     {
00238       <span class="keywordflow">for</span> (i = 0; i &lt; 4; i++)
00239         fprintf(sphere_file, <span class="stringliteral">"%f "</span>, spheredata[sphere_no][i]);
00240       fprintf(sphere_file, <span class="stringliteral">"\n"</span>);
00241     }
00242   }                          <span class="comment">/******* end else ********/</span>
00243 
00244   fprintf(<a class="code" href="general_8h.html#a34">datafp</a>,<span class="stringliteral">"\n Spheres read into the system..."</span>);
00245   <span class="keywordflow">for</span> (i=0; i&lt; ns; i++)        <span class="comment">/* confirm proper initialization  */</span>
00246     fprintf(<a class="code" href="general_8h.html#a34">datafp</a>,<span class="stringliteral">"\n%i: &lt;%f, %f, %f&gt; %f"</span>,i,
00247         spheredata[i][0], spheredata[i][1], spheredata[i][2], spheredata[i][3]);
00248 
00249   fclose(sphere_file);
00250   <span class="keywordflow">return</span> (ns);
00251 }                            <span class="comment">/* end spheres... */</span>
00252 
00253 
00254 <span class="comment">/* ________________________________________________________</span>
00255 <span class="comment">  | name:    fmat_pr/ fmat_prf                             |</span>
00256 <span class="comment">  | description: Disqusted with the inability to print the |</span>
00257 <span class="comment">  |     MATRIX to a file which is currently the way IKOR   |</span>
00258 <span class="comment">  |     communicates with the outside world, I have alter- |</span>
00259 <span class="comment">  |     ed the mat_pr function in matrix.c. The function   |</span>
00260 <span class="comment">  |     that ends with an 'f' means more decimal places    |</span>
00261 <span class="comment">  |     will be printed out.                               |</span>
00262 <span class="comment">  | inputs:  Datafile, description string, and a MATRIX    |</span>
00263 <span class="comment">  | outputs: The checkfile contains the input string and   |</span>
00264 <span class="comment">  |     MATRIX.                                            |</span>
00265 <span class="comment">  |________________________________________________________|</span>
00266 <span class="comment">  | Authors:     Date:     Modifications:                  |</span>
00267 <span class="comment">  | c hacker    10/94      Created                         |</span>
00268 <span class="comment">  |              3/95      took struct from "struct MATRIX"|</span>
00269 <span class="comment">  |________________________________________________________| */</span>
00270 
<a name="l00271"></a><a class="code" href="useful__UTILS_8c.html#a5">00271</a> <span class="keywordtype">void</span> <a class="code" href="useful__UTILS_8c.html#a5">fmat_pr</a> (FILE *checkfile, <span class="keywordtype">char</span> *string, <a class="code" href="structMATRIX.html">MATRIX</a> *a)
00272 { 
00273   <span class="keywordtype">int</span> i, j;
00274 
00275   fprintf(checkfile, <span class="stringliteral">"\n   %s ROWS: %d, COLS: %d\n"</span>, 
00276         string, a-&gt;<a class="code" href="structMATRIX.html#MATRIXo1">rows</a>, a-&gt;<a class="code" href="structMATRIX.html#MATRIXo2">cols</a>);
00277   <span class="keywordflow">for</span> (i = 0; i &lt; a-&gt;<a class="code" href="structMATRIX.html#MATRIXo1">rows</a>; i++)
00278   {
00279     <span class="keywordflow">for</span> (j = 0; j &lt; a-&gt;<a class="code" href="structMATRIX.html#MATRIXo2">cols</a>; j++)
00280       fprintf(checkfile, <span class="stringliteral">"%8.4f "</span>, a-&gt;<a class="code" href="structMATRIX.html#MATRIXo0">p</a>[i][j]);
00281     fprintf(checkfile, <span class="stringliteral">"\n"</span>);
00282   }
00283   fprintf(checkfile, <span class="stringliteral">"\n"</span>);
00284 }
00285 
<a name="l00286"></a><a class="code" href="useful__UTILS_8c.html#a6">00286</a> <span class="keywordtype">void</span> <a class="code" href="useful__UTILS_8c.html#a6">fmat_prf</a>(FILE *checkfile, <span class="keywordtype">char</span> *string, <a class="code" href="structMATRIX.html">MATRIX</a> *a)
00287 {
00288   <span class="keywordtype">int</span> i, j;
00289 
00290   fprintf(checkfile, <span class="stringliteral">"\n   %s Rows: %d, Cols: %d\n"</span>,
00291          string, a-&gt;<a class="code" href="structMATRIX.html#MATRIXo1">rows</a>, a-&gt;<a class="code" href="structMATRIX.html#MATRIXo2">cols</a>);
00292   <span class="keywordflow">for</span> (i = 0; i &lt; a-&gt;<a class="code" href="structMATRIX.html#MATRIXo1">rows</a>; i++)
00293   {
00294     <span class="keywordflow">for</span> (j = 0; j &lt; a-&gt;<a class="code" href="structMATRIX.html#MATRIXo2">cols</a>; j++)
00295     {
00296       fprintf(checkfile,<span class="stringliteral">"   %16.12f"</span>, a-&gt;<a class="code" href="structMATRIX.html#MATRIXo0">p</a>[i][j]);
00297       }
00298     fprintf(checkfile, <span class="stringliteral">"\n"</span>);
00299   }
00300   fprintf(checkfile, <span class="stringliteral">"\n"</span>);
00301 }
00302 
00303 
00304 <span class="comment">/* ________________________________________________________</span>
00305 <span class="comment">  | name:       fprint_norm                                |</span>
00306 <span class="comment">  | description: Prints out the Norm of the change in      |</span>
00307 <span class="comment">  |     angles.  This has been used mostly to compare the  |</span>
00308 <span class="comment">  |     psuedo inverse against the FSP.                    |</span>
00309 <span class="comment">  | inputs:  Datafile, change in angles                    |</span>
00310 <span class="comment">  | outputs: The datafile contains the least norm.         |</span>
00311 <span class="comment">  |________________________________________________________|</span>
00312 <span class="comment">  | Authors:     Date:     Modifications:                  |</span>
00313 <span class="comment">  | D Carlson    2/92      Created                         |</span>
00314 <span class="comment">  | c hacker    10/94      Removed Squarroot function      |</span>
00315 <span class="comment">  |              3/95      took struct from "struct MATRIX"|</span>
00316 <span class="comment">  |________________________________________________________| */</span>
<a name="l00317"></a><a class="code" href="useful__UTILS_8c.html#a7">00317</a> <span class="keywordtype">void</span> <a class="code" href="useful__UTILS_8c.html#a7">fprint_norm</a>(outfile,dq,datafp)
00318 <a class="code" href="structMATRIX.html">MATRIX</a> *dq;
00319 FILE   *outfile, *<a class="code" href="general_8h.html#a34">datafp</a>;
00320 {
00321   <span class="keywordtype">int</span> i;
00322   <span class="keywordtype">double</span> temp, result;
00323 
00324 <span class="comment">/*</span>
00325 <span class="comment">fprintf(stderr, "\ntemp: %8.4f  ", temp);</span>
00326 <span class="comment">fprintf(stderr, "temp^2: %8.4f   ", temp);  </span>
00327 <span class="comment">fprintf(stderr, "result: %8.4f", result);  </span>
00328 <span class="comment">*/</span>
00329 
00330   <span class="keywordflow">for</span> (i = 0, result = 0.0; i &lt; dq-&gt;rows; i++)
00331   {
00332     temp    = (dq-&gt;p[i][0]);
00333     temp   *= temp;
00334     result += sqrt((temp * temp));
00335   }
00336 
00337   <span class="keywordflow">if</span> (<a class="code" href="fsp_8c.html#a0">DEBUG</a>) fprintf(<a class="code" href="general_8h.html#a34">datafp</a>, <span class="stringliteral">"\n NORM value: %lf"</span>, result);
00338 
00339   fprintf (outfile, <span class="stringliteral">" %14.10f\n"</span>, result);
00340 }
00341 
00342 
00343 <span class="comment">/* ________________________________________________________</span>
00344 <span class="comment">  | name:       fprint_hist                                |</span>
00345 <span class="comment">  | description: Prints out the the contents of the history|</span>
00346 <span class="comment">  | inputs:  history                                       |</span>
00347 <span class="comment">  | outputs:                                               |</span>
00348 <span class="comment">  |________________________________________________________|</span>
00349 <span class="comment">  | Authors:     Date:     Modifications:                  |</span>
00350 <span class="comment">  | K Morgansen   8/95      Created                        |</span>
00351 <span class="comment">  |________________________________________________________| */</span>
00352 
<a name="l00353"></a><a class="code" href="useful__UTILS_8c.html#a8">00353</a> <span class="keywordtype">void</span> <a class="code" href="useful__UTILS_8c.html#a8">fprint_hist</a>(outfile, Old_DQs)
00354 FILE *outfile;
00355 <a class="code" href="structHistory.html">History</a> *Old_DQs;
00356 {
00357   <span class="keywordtype">int</span> i, j;
00358 
00359   fprintf(outfile, <span class="stringliteral">"index pointer at:  %d\n"</span>, Old_DQs-&gt;<a class="code" href="structHistory.html#Historyo0">whereami</a>);
00360   fprintf(outfile, <span class="stringliteral">"times:\n"</span>);
00361   <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="structures_8h.html#a0">HIST_SIZE</a>; i++)
00362     fprintf(outfile, <span class="stringliteral">"  %5.6lf   "</span>, Old_DQs-&gt;<a class="code" href="structHistory.html#Historyo1">dq</a>[i].<a class="code" href="structHistory__Element.html#History__Elemento0">time</a>);
00363   fprintf(outfile, <span class="stringliteral">"\n\n"</span>);
00364   <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="structures_8h.html#a0">HIST_SIZE</a>; i++)
00365     {
00366     <span class="keywordflow">for</span> (j=0; j&lt;Old_DQs-&gt;<a class="code" href="structHistory.html#Historyo1">dq</a>[i].<a class="code" href="structHistory__Element.html#History__Elemento1">DQ</a>-&gt;<a class="code" href="structMATRIX.html#MATRIXo1">rows</a>; j++)
00367       fprintf(outfile, <span class="stringliteral">"%8.6lf  "</span>, Old_DQs-&gt;<a class="code" href="structHistory.html#Historyo1">dq</a>[i].<a class="code" href="structHistory__Element.html#History__Elemento1">DQ</a>-&gt;<a class="code" href="structMATRIX.html#MATRIXo0">p</a>[j][0]);
00368     fprintf(outfile, <span class="stringliteral">"\n"</span>);
00369     }
00370   fprintf(outfile, <span class="stringliteral">"\t==========================================\n\n"</span>);
00371 
00372 }
00373 
00374 
00375 <span class="comment">/* ________________________________________________________</span>
00376 <span class="comment">  | name:       fdq_pr                                     |</span>
00377 <span class="comment">  | description: Prints out the the contents of dq         |</span>
00378 <span class="comment">  | inputs:  dq                                            |</span>
00379 <span class="comment">  | outputs:                                               |</span>
00380 <span class="comment">  |________________________________________________________|</span>
00381 <span class="comment">  | Authors:     Date:     Modifications:                  |</span>
00382 <span class="comment">  | K Morgansen   8/95      Created                        |</span>
00383 <span class="comment">  |________________________________________________________| */</span>
00384 
<a name="l00385"></a><a class="code" href="useful__UTILS_8c.html#a9">00385</a> <span class="keywordtype">void</span> <a class="code" href="useful__UTILS_8c.html#a9">fdq_pr</a> (DQFile, Old_DQs)
00386 FILE *DQFile;
00387 <a class="code" href="structHistory.html">History</a> Old_DQs;
00388 {
00389   <span class="keywordtype">int</span> now,
00390       i;
00391 
00392   now = Old_DQs.<a class="code" href="structHistory.html#Historyo0">whereami</a>-1;
00393   <span class="keywordflow">if</span> (now == -1) now = <a class="code" href="structures_8h.html#a0">HIST_SIZE</a> - 1;
00394   fprintf(DQFile, <span class="stringliteral">"%8.6lf  "</span>, Old_DQs.<a class="code" href="structHistory.html#Historyo1">dq</a>[now].<a class="code" href="structHistory__Element.html#History__Elemento0">time</a>);
00395   <span class="keywordflow">for</span> (i=0; i&lt;M; i++)
00396     fprintf(DQFile, <span class="stringliteral">"%8.6lf  "</span>, Old_DQs.<a class="code" href="structHistory.html#Historyo1">dq</a>[now].<a class="code" href="structHistory__Element.html#History__Elemento1">DQ</a>-&gt;<a class="code" href="structMATRIX.html#MATRIXo0">p</a>[i][0]);
00397   fprintf(DQFile, <span class="stringliteral">"\n"</span>);
00398 }
00399 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Jul 29 15:56:35 2004 for OpenSim by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
