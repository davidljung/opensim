<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OpenSim: robot/sim/IKORTest Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>robot/sim/IKORTest</h1><a href="IKORTest.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/* **-*-c++-*-**************************************************************</span>
00002 <span class="comment">  Copyright (C)2003 David Jung &lt;opensim@pobox.com&gt;</span>
00003 <span class="comment"></span>
00004 <span class="comment">  This program/file is free software; you can redistribute it and/or modify</span>
00005 <span class="comment">  it under the terms of the GNU General Public License as published by</span>
00006 <span class="comment">  the Free Software Foundation; either version 2 of the License, or</span>
00007 <span class="comment">  (at your option) any later version.</span>
00008 <span class="comment">  </span>
00009 <span class="comment">  This program is distributed in the hope that it will be useful,</span>
00010 <span class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00011 <span class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00012 <span class="comment">  GNU General Public License for more details. (http://www.gnu.org)</span>
00013 <span class="comment">  </span>
00014 <span class="comment">  You should have received a copy of the GNU General Public License</span>
00015 <span class="comment">  along with this program; if not, write to the Free Software</span>
00016 <span class="comment">  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00017 <span class="comment">  </span>
00018 <span class="comment">  $Id: IKORTest 1033 2004-02-11 20:47:52Z jungd $</span>
00019 <span class="comment">  $Revision: 1.5 $</span>
00020 <span class="comment">  $Date: 2004-02-11 15:47:52 -0500 (Wed, 11 Feb 2004) $</span>
00021 <span class="comment">  $Author: jungd $</span>
00022 <span class="comment"> </span>
00023 <span class="comment">****************************************************************************/</span>
00024 
00025 <span class="preprocessor">#ifndef _ROBOT_SIM_IKORTEST_</span>
00026 <span class="preprocessor"></span><span class="preprocessor">#define _ROBOT_SIM_IKORTEST_</span>
00027 <span class="preprocessor"></span>
00028 <span class="preprocessor">#include &lt;<a class="code" href="sim.html">robot/sim/sim</a>&gt;</span>
00029 
00030 <span class="preprocessor">#include &lt;<a class="code" href="Externalizable.html">base/Externalizable</a>&gt;</span>
00031 <span class="preprocessor">#include &lt;<a class="code" href="Named.html">base/Named</a>&gt;</span>
00032 <span class="preprocessor">#include &lt;<a class="code" href="Vector.html">base/Vector</a>&gt;</span>
00033 <span class="preprocessor">#include &lt;<a class="code" href="Time.html">base/Time</a>&gt;</span>
00034 <span class="preprocessor">#include &lt;<a class="code" href="Trajectory.html">base/Trajectory</a>&gt;</span>
00035 <span class="preprocessor">#include &lt;<a class="code" href="PathName.html">base/PathName</a>&gt;</span>
00036 
00037 <span class="preprocessor">#include &lt;<a class="code" href="KinematicChain.html">robot/KinematicChain</a>&gt;</span>
00038 <span class="preprocessor">#include &lt;<a class="code" href="TestBasicEnvironment.html">robot/sim/TestBasicEnvironment</a>&gt;</span>
00039 <span class="preprocessor">#include &lt;<a class="code" href="SimulatedBasicEnvironment.html">robot/sim/SimulatedBasicEnvironment</a>&gt;</span>
00040 <span class="preprocessor">#include &lt;<a class="code" href="InverseKinematicsSolver.html">robot/control/kinematics/InverseKinematicsSolver</a>&gt;</span>
00041 <span class="preprocessor">#include &lt;<a class="code" href="FullSpaceSolver.html">robot/control/kinematics/FullSpaceSolver</a>&gt;</span>
00042 <span class="preprocessor">#include &lt;<a class="code" href="BetaFormConstraints.html">robot/control/kinematics/BetaFormConstraints</a>&gt;</span>
00043 <span class="preprocessor">#include &lt;<a class="code" href="IKOR.html">robot/control/kinematics/IKOR</a>&gt;</span>
00044 
00045 <span class="preprocessor">#include &lt;set&gt;</span>
00046 
00047 
00048 <span class="keyword">namespace </span><a class="code" href="robot_2Jamfile_8ft.html#a0">robot</a> {
00049 <span class="keyword">namespace </span><a class="code" href="robot_2Jamfile_8ft.html#a3">sim</a> {
00050 
00051 <span class="comment"></span>
00052 <span class="comment">/// Test case for the IKOR tester</span>
00053 <span class="comment">/// Holds the description of a test to be run for IKOR (and optionally the results) -   </span>
00054 <span class="comment">/// environment (robot, tools, obstacles); trajectory sequences etc.</span>
00055 <span class="comment">/// \todo later, rather than instantiating a TestBasicEnvironment to externalize in, it should be</span>
00056 <span class="comment">///       left to the tester to instantiate.  This will require an EnvironmentDescription heirarchy</span>
00057 <span class="comment">///       to mirror the Environment classes (in robot::sim)</span>
<a name="l00058"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html">00058</a> <span class="comment"></span><span class="keyword">class </span><a class="code" href="classrobot_1_1sim_1_1IKORTest.html">IKORTest</a> :  <span class="keyword">public</span> <a class="code" href="base_2Jamfile_8ft.html#a0">base</a>::Named, <span class="keyword">public</span> <a class="code" href="base_2Jamfile_8ft.html#a0">base</a>::Externalizable, <span class="keyword">public</span> <a class="code" href="base_2Jamfile_8ft.html#a0">base</a>::ReferencedObject
00059 {
00060 <span class="keyword">public</span>:
00061   <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1IKORTesta0">IKORTest</a>(<a class="code" href="classbase_1_1ref.html">ref&lt;base::VFile&gt;</a> testSpecification,
00062            <a class="code" href="classbase_1_1ref.html">ref&lt;base::VFileSystem&gt;</a> fs, <a class="code" href="classbase_1_1ref.html">ref&lt;base::Cache&gt;</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp6">cache</a>);
00063 
<a name="l00064"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1IKORTesta1">00064</a>   <span class="keyword">virtual</span> String <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1IKORTesta1">className</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> String(<span class="stringliteral">"IKORTest"</span>); }
00065 
00066   <span class="comment"></span>
00067 <span class="comment">  /// an individual test </span>
00068 <span class="comment">  /// IKORTest comprises a sequence of these Tests.  The environment is persistent</span>
00069 <span class="comment">  ///  accross the tests</span>
<a name="l00070"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html">00070</a> <span class="comment"></span>  <span class="keyword">class </span><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html">Test</a> : <span class="keyword">public</span> <a class="code" href="base_2Jamfile_8ft.html#a0">base</a>::Named, <span class="keyword">public</span> <a class="code" href="base_2Jamfile_8ft.html#a0">base</a>::Externalizable
00071   {
00072   <span class="keyword">public</span>:
00073     <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testa0">Test</a>(<span class="keyword">const</span> String&amp; name = <span class="stringliteral">""</span>);
00074 
<a name="l00075"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testa1">00075</a>     <span class="keyword">virtual</span> String <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testa1">className</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> String(<span class="stringliteral">"Test"</span>); }
00076 
00077     
<a name="l00078"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo0">00078</a>     <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo0">initialConfigSpecified</a>; <span class="comment">///&lt; if true, use q as the initial joint configuration, otherwise use the currrent configuration</span>
<a name="l00079"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo1">00079</a> <span class="comment"></span>    <a class="code" href="classbase_1_1vector.html">base::Vector</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo1">initq</a>;      <span class="comment">///&lt; initial joint configuration</span>
<a name="l00080"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo2">00080</a> <span class="comment"></span>    <a class="code" href="classbase_1_1Trajectory.html">base::Trajectory</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo2">traj</a>;   <span class="comment">///&lt; trajectory/path for manipulator to follow</span>
00081 <span class="comment"></span>
<a name="l00082"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo3">00082</a>     <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo3">toolAttached</a>;
<a name="l00083"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo4">00083</a>     String <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo4">toolName</a>;
00084 
<a name="l00085"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo5">00085</a>     Robot::CoordFrame frame;      <span class="comment">///&lt; reference frame of specified the trajectory</span>
<a name="l00086"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo6">00086</a> <span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo6">timeIntervalSpecified</a>;   <span class="comment">///&lt; true if an overriding time interval was specified for the trajectory</span>
<a name="l00087"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo7">00087</a> <span class="comment"></span>    <a class="code" href="classbase_1_1vector.html">Vector</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo7">timeInterval</a>;
00088 
<a name="l00089"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo8">00089</a>     <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo8">maxdxSpecified</a>;         <span class="comment">///&lt; true if a maximum dx length was specified</span>
<a name="l00090"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo9">00090</a> <span class="comment"></span>    Real <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo9">maxdx</a>;                  <span class="comment">///&lt; maximum value of dx length for any trajectory step</span>
00091 <span class="comment"></span>
<a name="l00092"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo10">00092</a>     <span class="keywordtype">bool</span> orientationControl;
00093 
<a name="l00094"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo11">00094</a>     <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo11">jointWeightsSpecified</a>;
<a name="l00095"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo12">00095</a>     <a class="code" href="classbase_1_1vector.html">base::Vector</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo12">jointWeights</a>;   <span class="comment">///&lt; joint params weights </span>
00096 <span class="comment"></span>    
00097     
<a name="l00098"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testw2">00098</a>     <span class="keyword">enum</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testw2">SolutionMethod</a> { <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testw2robot_1_1sim_1_1IKORTest_1_1Testw0">PseudoInverse</a>, <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testw2robot_1_1sim_1_1IKORTest_1_1Testw1">FullSpace</a> };
00099     
<a name="l00100"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo13">00100</a>     <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testw2">SolutionMethod</a>                                                               <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo13">solutionMethod</a>;
<a name="l00101"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo14">00101</a>     robot::control::kinematics::InverseKinematicsSolver::OptimizationMethod      optMethod;
<a name="l00102"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo15">00102</a>     robot::control::kinematics::InverseKinematicsSolver::OptimizationCriterion   <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo15">optCriteria</a>;
<a name="l00103"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo16">00103</a>     <a class="code" href="classrobot_1_1control_1_1kinematics_1_1InverseKinematicsSolver.html#robot_1_1control_1_1kinematics_1_1OldIKORw0">robot::control::kinematics::InverseKinematicsSolver::OptimizationConstraints</a> optConstraints; 
00104 
<a name="l00105"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo17">00105</a>     <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo17">resultsPresent</a>; <span class="comment">///&lt; are there test results recorded? (either via externalization input or generated by execution)</span>
00106 <span class="comment"></span>    
00107     <span class="comment">// test output records - all indices correspond (except that qs, xs &amp; times have an extra final element at the end)</span>
<a name="l00108"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo18">00108</a>     array&lt;base::Vector&gt; qs;    <span class="comment">///&lt; test output; sequence of 'joint' parameter vectors</span>
<a name="l00109"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo19">00109</a> <span class="comment"></span>    array&lt;base::Vector&gt; <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo19">xs</a>;    <span class="comment">///&lt; test output; sequence of end-effector positions/orientations</span>
<a name="l00110"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo20">00110</a> <span class="comment"></span>    array&lt;base::Vector&gt; <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo20">dxs</a>;   <span class="comment">///&lt; test output; sequence of end-effector displacements</span>
<a name="l00111"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo21">00111</a> <span class="comment"></span>    array&lt;base::Vector&gt; <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo21">dqs</a>;   <span class="comment">///&lt; test output; sequence of 'joint' parameter displacements</span>
<a name="l00112"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo22">00112</a> <span class="comment"></span>    array&lt;base::Time&gt; times;   <span class="comment">///&lt; test output; sequence of times</span>
<a name="l00113"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo23">00113</a> <span class="comment"></span>    array&lt;base::Matrix&gt; <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo23">Js</a>;    <span class="comment">///&lt; test output; sequence of J(q) jacobian matrices</span>
00114 <span class="comment"></span>    
<a name="l00115"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo24">00115</a>     <a class="code" href="classrobot_1_1ManipulatorJointTrajectory.html">ManipulatorJointTrajectory</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo24">jtraj</a>; <span class="comment">///&lt; test output trajectory in 'joint' space (dim is chain.dof() - so also includes any platform dofs)</span>
00116 <span class="comment"></span>    
<a name="l00117"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo25">00117</a>     <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo25">testCompleted</a>; <span class="comment">///&lt; true if the test completed, fasle if an error occured and only partial results are available</span>
<a name="l00118"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo26">00118</a> <span class="comment"></span>    String <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo26">failureString</a>; <span class="comment">///&lt; if !testCompleted, provides the failure error message</span>
00119 <span class="comment"></span>    
<a name="l00120"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo27">00120</a>     <a class="code" href="classbase_1_1PathName.html">base::PathName</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo27">outputFileName</a>; <span class="comment">///&lt; output file specified in testspec file</span>
<a name="l00121"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo28">00121</a> <span class="comment"></span>    <a class="code" href="classbase_1_1PathName.html">base::PathName</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo28">inputFilePath</a>;  <span class="comment">///&lt; path from which testspec was loaded</span>
00122 <span class="comment"></span>
00123     
00124     <span class="comment">// some display related flags (read/written by test result viewers)</span>
00125     
<a name="l00126"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo29">00126</a>     <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo29">displayRangeSpecified</a>; <span class="comment">///&lt; true if a subrange of the result joint trajectory has been specified for display purposes</span>
<a name="l00127"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo30">00127</a> <span class="comment"></span>    Int <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo30">displayStartIndex</a> , <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testo31">displayEndIndex</a>;
00128     
00129     
00130     
00131     
00132     <span class="keywordtype">void</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testa2">saveResult</a>(<a class="code" href="classbase_1_1ref.html">ref&lt;base::VFileSystem&gt;</a> filesystem, <a class="code" href="classbase_1_1PathName.html">base::PathName</a> alternateOutputFileName = <a class="code" href="classbase_1_1PathName.html">base::PathName</a>());
00133                            
00134     <span class="comment">// Externalizable</span>
<a name="l00135"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testa3">00135</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testa3">formatSupported</a>(<span class="keyword">const</span> String format, Real version = 1.0, ExternalizationType type = IO)<span class="keyword"> const</span>
00136 <span class="keyword">    </span>{ <span class="keywordflow">return</span> ( (format==<span class="stringliteral">"xml"</span>) &amp;&amp; (version==1.0) ); }
00137     
00138     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html#robot_1_1sim_1_1IKORTest_1_1Testa4">externalize</a>(<a class="code" href="classbase_1_1Externalizer.html">base::Externalizer</a>&amp; e, String format = <span class="stringliteral">""</span>, Real version = 1.0);
00139 
00140   };
00141 
00142 
00143 <span class="comment"></span>
00144 <span class="comment">  /// the environment in which tests are performed</span>
<a name="l00145"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta7">00145</a> <span class="comment"></span>  <a class="code" href="classbase_1_1ref.html">ref&lt;BasicEnvironment&gt;</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta7">getEnvironment</a>() { <span class="keywordflow">return</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp7">env</a>; } 
<a name="l00146"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta8">00146</a>   <a class="code" href="classbase_1_1ref.html">ref&lt;const BasicEnvironment&gt;</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta7">getEnvironment</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp7">env</a>; } 
00147   <span class="keywordtype">void</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta9">setEnvironment</a>(<a class="code" href="classbase_1_1ref.html">ref&lt;BasicEnvironment&gt;</a> env);
00148 <span class="comment"></span>
00149 <span class="comment">  /// which robot is to be tested?</span>
<a name="l00150"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta10">00150</a> <span class="comment"></span>  <a class="code" href="classbase_1_1ref.html">ref&lt;Robot&gt;</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta10">getRobot</a>() { <span class="keywordflow">return</span> narrow_ref&lt;Robot&gt;(<a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp7">env</a>-&gt;getRobot(<a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp8">testRobotIndex</a>)); }
<a name="l00151"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta11">00151</a>   <a class="code" href="classbase_1_1ref.html">ref&lt;const Robot&gt;</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta10">getRobot</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> narrow_ref&lt;const Robot&gt;(<a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp7">env</a>-&gt;getRobot(<a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp8">testRobotIndex</a>)); }
00152   <span class="comment"></span>
00153 <span class="comment">  /// which of the robot's manipulators is to be tested?</span>
<a name="l00154"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta12">00154</a> <span class="comment"></span>  Int <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta12">getManipulatorIndex</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp9">testManipulatorIndex</a>; }
00155   
<a name="l00156"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta13">00156</a>   Int <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta13">numTests</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp10">tests</a>.size(); }
<a name="l00157"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta14">00157</a>   <a class="code" href="classrobot_1_1sim_1_1IKORTest_1_1Test.html">Test</a>&amp; <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta14">getTest</a>(Int index) { <a class="code" href="base.html#a19">Assert</a>(index &lt; <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta13">numTests</a>()); <span class="keywordflow">return</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp10">tests</a>[index]; }
00158   <span class="comment"></span>
00159 <span class="comment">  /// the VFileSystem path from which the test specification was read</span>
<a name="l00160"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta15">00160</a> <span class="comment"></span>  <a class="code" href="classbase_1_1PathName.html">base::PathName</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta15">getTestInputPath</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp11">inputPath</a>; }
00161   <span class="comment"></span>
00162 <span class="comment">  /// save the test and any results </span>
00163 <span class="comment">  /// Externalizes the entire IKORTest specification with results (if present)</span>
00164 <span class="comment">  /// Also, if saveTrajFiles is true, the result trajectory of each test is saved in</span>
00165 <span class="comment">  ///  a seperate file (per test)</span>
00166 <span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesta16">saveResults</a>(<span class="keywordtype">bool</span> saveTrajFiles = <span class="keyword">true</span>, <a class="code" href="classbase_1_1PathName.html">base::PathName</a> alternateOutputFileName = <a class="code" href="classbase_1_1PathName.html">base::PathName</a>());
00167   
00168 
00169   <span class="comment">// some display related flags (read/written by test result viewers)</span>
00170   
<a name="l00171"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesto0">00171</a>   <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesto0">displayObstacles</a>; <span class="comment">///&lt; true if obstacles are selected for display</span>
<a name="l00172"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesto1">00172</a> <span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesto1">displayAxes</a>;      <span class="comment">///&lt; true if coordinate axes selected for display</span>
<a name="l00173"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesto2">00173</a> <span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesto2">displayPlatform</a>;  <span class="comment">///&lt; true if the platform should be displayed</span>
<a name="l00174"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesto3">00174</a> <span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesto3">displayEEPath</a>;    <span class="comment">///&lt; true if the path of the manip/tool is selected for display</span>
<a name="l00175"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesto4">00175</a> <span class="comment"></span>  Int  <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesto4">displayStepMod</a>;   <span class="comment">///&lt; only display every nth step (1 for all steps)</span>
00176 <span class="comment"></span><span class="comment"></span>
00177 <span class="comment">  /// camera parameters (as in gfx::LookAtCameraManipulator)</span>
<a name="l00178"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesto5">00178</a> <span class="comment"></span>  <a class="code" href="classbase_1_1Vector3.html">base::Point3</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesto5">lookAtTarget</a>; 
<a name="l00179"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTesto7">00179</a>   Real alpha, theta, d;
00180   
00181     
00182   <span class="comment">// Externalizable</span>
<a name="l00183"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1IKORTesta12">00183</a>   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1IKORTesta12">formatSupported</a>(<span class="keyword">const</span> String format, Real version = 1.0, ExternalizationType type = IO)<span class="keyword"> const</span>
00184 <span class="keyword">    </span>{ <span class="keywordflow">return</span> ( (format==<span class="stringliteral">"xml"</span>) &amp;&amp; (version==1.0) ); }
00185 
00186   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1IKORTesta13">externalize</a>(<a class="code" href="classbase_1_1Externalizer.html">base::Externalizer</a>&amp; e, String format = <span class="stringliteral">""</span>, Real version = 1.0);
00187 
00188 <span class="keyword">protected</span>:
<a name="l00189"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp5">00189</a>   <a class="code" href="classbase_1_1ref.html">ref&lt;base::VFileSystem&gt;</a> filesystem;
<a name="l00190"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp6">00190</a>   <a class="code" href="classbase_1_1ref.html">ref&lt;base::Cache&gt;</a> cache;
<a name="l00191"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp7">00191</a>   <a class="code" href="classbase_1_1ref.html">ref&lt;SimulatedBasicEnvironment&gt;</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp7">env</a>;
<a name="l00192"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp8">00192</a>   Int <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp8">testRobotIndex</a>;       <span class="comment">///&lt; which robot from the environment is used for testing </span>
<a name="l00193"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp9">00193</a> <span class="comment"></span>  Int <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp9">testManipulatorIndex</a>; <span class="comment">///&lt; which manipulator (in case the robot has multiple) is used for testing</span>
00194 <span class="comment"></span>
00195 
<a name="l00196"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp10">00196</a>   array&lt;Test&gt; <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp10">tests</a>;
<a name="l00197"></a><a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp11">00197</a>   <a class="code" href="classbase_1_1PathName.html">base::PathName</a> <a class="code" href="classrobot_1_1sim_1_1IKORTest.html#robot_1_1sim_1_1VisualIKORTestp11">inputPath</a>;
00198 
00199 };
00200 
00201 
00202 } <span class="comment">// namespace sim</span>
00203 } <span class="comment">// namespace robot</span>
00204 
00205 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Jul 29 15:56:38 2004 for OpenSim by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
