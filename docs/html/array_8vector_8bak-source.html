<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>base/array.vector.bak Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>base/array.vector.bak</h1><a href="array_8vector_8bak.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/****************************************************************************</font>
00002 <font class="comment">  Copyright (C)1996 David Jung &lt;opensim@pobox.com&gt;</font>
00003 <font class="comment"></font>
00004 <font class="comment">  This program/file is free software; you can redistribute it and/or modify</font>
00005 <font class="comment">  it under the terms of the GNU General Public License as published by</font>
00006 <font class="comment">  the Free Software Foundation; either version 2 of the License, or</font>
00007 <font class="comment">  (at your option) any later version.</font>
00008 <font class="comment">  </font>
00009 <font class="comment">  This program is distributed in the hope that it will be useful,</font>
00010 <font class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</font>
00011 <font class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</font>
00012 <font class="comment">  GNU General Public License for more details. (http://www.gnu.org)</font>
00013 <font class="comment">  </font>
00014 <font class="comment">  You should have received a copy of the GNU General Public License</font>
00015 <font class="comment">  along with this program; if not, write to the Free Software</font>
00016 <font class="comment">  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</font>
00017 <font class="comment">  </font>
00018 <font class="comment">  $Id: array,v 1.3 2002/09/25 18:54:09 jungd Exp $</font>
00019 <font class="comment">  $Revision: 1.3 $</font>
00020 <font class="comment">  $Date: 2002/09/25 18:54:09 $</font>
00021 <font class="comment">  $Author: jungd $</font>
00022 <font class="comment"> </font>
00023 <font class="comment">****************************************************************************/</font>
00024 
00025 <font class="preprocessor">#ifndef _BASE_ARRAY_</font>
00026 <font class="preprocessor"></font><font class="preprocessor">#define _BASE_ARRAY_</font>
00027 <font class="preprocessor"></font>
00028 <font class="preprocessor">#include &lt;vector&gt;</font>
00029 <font class="preprocessor">#include &lt;iterator&gt;</font>
00030 <font class="preprocessor">#include &lt;stdexcept&gt;</font>
00031 
00032 
00033 <font class="keyword">namespace </font>base {
00034 
00035 <font class="keyword">template</font>&lt;<font class="keyword">typename</font> T&gt;
00036 <font class="keyword">class </font>array 
00037 {
00038 <font class="keyword">public</font>:
<a name="l00039"></a><a class="code" href="classbase_1_1array.html#base_1_1arrays11">00039</a>   <font class="keyword">typedef</font> <font class="keyword">typename</font> std::vector&lt;T&gt;::value_type <a class="code" href="classbase_1_1array.html#base_1_1arrays0">value_type</a>;
<a name="l00040"></a><a class="code" href="classbase_1_1array.html#base_1_1arrays12">00040</a>   <font class="keyword">typedef</font> <font class="keyword">typename</font> std::vector&lt;T&gt;::pointer <a class="code" href="classbase_1_1array.html#base_1_1arrays1">pointer</a>;
<a name="l00041"></a><a class="code" href="classbase_1_1array.html#base_1_1arrays13">00041</a>   <font class="keyword">typedef</font> <font class="keyword">typename</font> std::vector&lt;T&gt;::const_pointer <a class="code" href="classbase_1_1array.html#base_1_1arrays2">const_pointer</a>;
<a name="l00042"></a><a class="code" href="classbase_1_1array.html#base_1_1arrays14">00042</a>   <font class="keyword">typedef</font> <font class="keyword">typename</font> std::vector&lt;T&gt;::iterator <a class="code" href="classbase_1_1array.html#base_1_1arrays3">iterator</a>;
<a name="l00043"></a><a class="code" href="classbase_1_1array.html#base_1_1arrays15">00043</a>   <font class="keyword">typedef</font> <font class="keyword">typename</font> std::vector&lt;T&gt;::const_iterator <a class="code" href="classbase_1_1array.html#base_1_1arrays4">const_iterator</a>;
<a name="l00044"></a><a class="code" href="classbase_1_1array.html#base_1_1arrays16">00044</a>   <font class="keyword">typedef</font> <font class="keyword">typename</font> std::vector&lt;T&gt;::reference <a class="code" href="classbase_1_1array.html#base_1_1arrays5">reference</a>;
<a name="l00045"></a><a class="code" href="classbase_1_1array.html#base_1_1arrays17">00045</a>   <font class="keyword">typedef</font> <font class="keyword">typename</font> std::vector&lt;T&gt;::const_reference <a class="code" href="classbase_1_1array.html#base_1_1arrays6">const_reference</a>;
00046   <font class="comment">//  typedef size_t size_type;</font>
00047   <font class="comment">//  typedef ptrdiff_t difference_type;</font>
<a name="l00048"></a><a class="code" href="classbase_1_1array.html#base_1_1arrays18">00048</a>   <font class="keyword">typedef</font> <a class="code" href="namespacebase.html#a2">Int</a> <a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a>;
<a name="l00049"></a><a class="code" href="classbase_1_1array.html#base_1_1arrays19">00049</a>   <font class="keyword">typedef</font> <a class="code" href="namespacebase.html#a1">SInt</a> <a class="code" href="classbase_1_1array.html#base_1_1arrays8">difference_type</a>;
00050 
<a name="l00051"></a><a class="code" href="classbase_1_1array.html#base_1_1arrays20">00051</a>   <font class="keyword">typedef</font> std::reverse_iterator&lt;const_iterator&gt; <a class="code" href="classbase_1_1array.html#base_1_1arrays9">const_reverse_iterator</a>;
<a name="l00052"></a><a class="code" href="classbase_1_1array.html#base_1_1arrays21">00052</a>   <font class="keyword">typedef</font> std::reverse_iterator&lt;iterator&gt; <a class="code" href="classbase_1_1array.html#base_1_1arrays10">reverse_iterator</a>;
00053 
<a name="l00054"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya35">00054</a>   <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>() { init(0,1,T()); }
<a name="l00055"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya36">00055</a>   <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>(<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> n) { init(n,n,T()); }
<a name="l00056"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya37">00056</a>   <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>(<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> n, <a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> initial_capacity, <font class="keyword">const</font> T&amp; initializer = T()) { init(n,initial_capacity, initializer); }
00057 
<a name="l00058"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya38">00058</a>   <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>(<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> n, std::vector&lt;T&gt;&amp; v, <font class="keywordtype">bool</font> by_reference=<font class="keyword">true</font>) {
00059     <font class="keywordflow">if</font> (!by_reference) {
00060       init(n,n,v[0]);
00061       <font class="keywordflow">for</font>(<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> e=0; e&lt;n; ++e) (*_a)[e] = v[e];
00062     }
00063     <font class="keywordflow">else</font> {
00064       _size = _capacity = n;
00065       _a = &amp;v;
00066       _owner = <font class="keyword">false</font>;
00067     }
00068   }
00069   
<a name="l00070"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya39">00070</a>   <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>(<font class="keyword">const</font> <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>&amp; a) { 
00071     init(a._size,a._size,a[0]);
00072     copy(a);
00073   }
00074   
<a name="l00075"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya40">00075</a>   <a class="code" href="classbase_1_1array.html#base_1_1arraya5">~array</a>() {
00076     <font class="keywordflow">if</font> (_owner) <font class="keyword">delete</font> _a;
00077   }
00078   
00079   
<a name="l00080"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya41">00080</a>   <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>&amp; <a class="code" href="classbase_1_1array.html#base_1_1arraya6">operator=</a>(<font class="keyword">const</font> <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>&amp; a)
00081   {
00082     copy(a);
00083     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00084   }
00085 
<a name="l00086"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya42">00086</a>   <font class="keywordtype">bool</font> <a class="code" href="classbase_1_1array.html#base_1_1arraya7">operator==</a>(<font class="keyword">const</font> <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>&amp; a)<font class="keyword"> const</font>
00087 <font class="keyword">  </font>{
00088     <font class="keywordflow">if</font> (_size != a._size) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00089     <font class="keywordflow">for</font>(<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> e=0; e&lt;_size; ++e)
00090       <font class="keywordflow">if</font> (!((*_a)[e] == (*a._a)[e])) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00091     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00092   }
00093 
<a name="l00094"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya43">00094</a>   <font class="keywordtype">bool</font> <a class="code" href="classbase_1_1array.html#base_1_1arraya8">operator!=</a>(<font class="keyword">const</font> <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>&amp; a)<font class="keyword"> const</font>
00095 <font class="keyword">  </font>{
00096     <font class="keywordflow">if</font> (_size != a._size) <font class="keywordflow">return</font> <font class="keyword">true</font>;
00097     <font class="keywordflow">for</font>(<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> e=0; e&lt;_size; ++e)
00098       <font class="keywordflow">if</font> ((*_a)[e] != (*a._a)[e]) <font class="keywordflow">return</font> <font class="keyword">true</font>;
00099     <font class="keywordflow">return</font> <font class="keyword">false</font>;
00100   }
00101 
00102 
00103 
00104   <font class="comment">// 0-based indexing</font>
<a name="l00105"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya44">00105</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays5">reference</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya9">operator[]</a>(<a class="code" href="classbase_1_1array.html#base_1_1arrays8">difference_type</a> i) {
00106 <font class="preprocessor">#ifdef DEBUG</font>
00107 <font class="preprocessor"></font>    <font class="keywordflow">if</font> ((<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a>(i) &gt;= _size) || (i&lt;0))
00108       <font class="keywordflow">throw</font> <a class="code" href="classstd_1_1runtime__error.html">std::runtime_error</a>(<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"array index out of bounds (debug only check)"</font>));
00109 <font class="preprocessor">#endif</font>
00110 <font class="preprocessor"></font>    <font class="keywordflow">return</font> (*_a)[i];
00111   }
<a name="l00112"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya45">00112</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays6">const_reference</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya9">operator[]</a>(<a class="code" href="classbase_1_1array.html#base_1_1arrays8">difference_type</a> i)<font class="keyword"> const </font>{
00113 <font class="preprocessor">#ifdef DEBUG</font>
00114 <font class="preprocessor"></font>    <font class="keywordflow">if</font> ((<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a>(i) &gt;= _size) || (i&lt;0))
00115       <font class="keywordflow">throw</font> <a class="code" href="classstd_1_1runtime__error.html">std::runtime_error</a>(<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"array index out of bounds (debug only check)"</font>));
00116 <font class="preprocessor">#endif</font>
00117 <font class="preprocessor"></font>    <font class="keywordflow">return</font> (*_a)[i];
00118   }
00119 
00120   <font class="comment">// 1-based indexing</font>
<a name="l00121"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya46">00121</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays5">reference</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya11">operator()</a>(<a class="code" href="classbase_1_1array.html#base_1_1arrays8">difference_type</a> i) {
00122 <font class="preprocessor">#ifdef DEBUG</font>
00123 <font class="preprocessor"></font>    <font class="keywordflow">if</font> ((<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a>(i) &gt; _size) || (i&lt;1))
00124       <font class="keywordflow">throw</font> <a class="code" href="classstd_1_1runtime__error.html">std::runtime_error</a>(<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"array index out of bounds (debug only check)"</font>));
00125 <font class="preprocessor">#endif</font>
00126 <font class="preprocessor"></font>    <font class="keywordflow">return</font> (*_a)[i-1];
00127   }
<a name="l00128"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya47">00128</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays6">const_reference</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya11">operator()</a>(<a class="code" href="classbase_1_1array.html#base_1_1arrays8">difference_type</a> i)<font class="keyword"> const </font>{
00129 <font class="preprocessor">#ifdef DEBUG</font>
00130 <font class="preprocessor"></font>    <font class="keywordflow">if</font> ((<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a>(i) &gt; _size) || (i&lt;1))
00131       <font class="keywordflow">throw</font> <a class="code" href="classstd_1_1runtime__error.html">std::runtime_error</a>(<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"array index out of bounds (debug only check)"</font>));
00132 <font class="preprocessor">#endif</font>
00133 <font class="preprocessor"></font>    <font class="keywordflow">return</font> (*_a)[i-1];
00134   }
00135 
00136   <font class="comment">// auto resize to index (0-based)</font>
<a name="l00137"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya48">00137</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays5">reference</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya13">at</a>(<a class="code" href="classbase_1_1array.html#base_1_1arrays8">difference_type</a> i) <font class="keywordflow">throw</font>(std::out_of_range) {
00138     <font class="keywordflow">if</font> (<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a>(i) &gt;= _size) {
00139       <font class="keywordflow">if</font> (_owner) 
00140         <a class="code" href="classbase_1_1array.html#base_1_1arraya32">resize</a>(i+1);
00141       <font class="keywordflow">else</font>
00142         <font class="keywordflow">throw</font> std::out_of_range(<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"array index out of bounds"</font>));
00143     }
00144     <font class="keywordflow">return</font> (*_a)[i];
00145   }
00146   
<a name="l00147"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya49">00147</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya14">size</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> _size; }
<a name="l00148"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya50">00148</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya15">capacity</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> _capacity; }
00149   
<a name="l00150"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya51">00150</a>   <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>&amp; <a class="code" href="classbase_1_1array.html#base_1_1arraya16">clear</a>(<font class="keyword">const</font> T&amp; initializer = T()) 
00151   {
00152     <font class="keywordflow">if</font> (_owner) <font class="keyword">delete</font> _a;
00153     init(0,1, initializer);
00154     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00155   }
00156   
<a name="l00157"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya52">00157</a>   <font class="keywordtype">bool</font> <a class="code" href="classbase_1_1array.html#base_1_1arraya17">empty</a>() { <font class="keywordflow">return</font> _size == <a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a>(0); }
00158 
00159   
00160   <font class="comment">// swap content of this with a</font>
<a name="l00161"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya53">00161</a>   <font class="keywordtype">void</font> <a class="code" href="classbase_1_1array.html#base_1_1arraya18">swap</a>(<a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>&amp; a) {
00162     std::vector&lt;T&gt;* tmp_a = _a;
00163     <a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> tmp_size = _size;
00164     <a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> tmp_capacity = _capacity;
00165     <font class="keywordtype">bool</font> tmp_owner = _owner;
00166     
00167     _a = a._a;
00168     _size = a._size;
00169     _capacity = a._capacity;
00170     _owner = a._owner;
00171 
00172     a._a = tmp_a;
00173     a._size = tmp_size;
00174     a._capacity = tmp_capacity;
00175     a._owner = tmp_owner;
00176   }
00177 
00178   
00179   <font class="comment">// stack operations</font>
<a name="l00180"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya54">00180</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays5">reference</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya19">front</a>() <font class="keywordflow">throw</font>(std::out_of_range) {
00181     <font class="keywordflow">if</font> (_size&gt;0)
00182       <font class="keywordflow">return</font> (*_a)[0];
00183     <font class="keywordflow">else</font>
00184       <font class="keywordflow">throw</font> std::out_of_range((<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"array has no elements (no front)"</font>)));
00185   }
00186   
<a name="l00187"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya55">00187</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays6">const_reference</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya19">front</a>() <font class="keyword">const</font> <font class="keywordflow">throw</font>(std::out_of_range) {
00188     <font class="keywordflow">if</font> (_size&gt;0)
00189       <font class="keywordflow">return</font> (*_a)[0];
00190     <font class="keywordflow">else</font>
00191       <font class="keywordflow">throw</font> std::out_of_range((<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"array has no elements (no front)"</font>)));
00192   }
00193   
<a name="l00194"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya56">00194</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays5">reference</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya21">back</a>() <font class="keywordflow">throw</font>(std::out_of_range) {
00195     <font class="keywordflow">if</font> (_size&gt;0)
00196       <font class="keywordflow">return</font> (*_a)[_size-1];
00197     <font class="keywordflow">else</font>
00198       <font class="keywordflow">throw</font> std::out_of_range((<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"array has no elements (no back)"</font>)));
00199   }
00200 
<a name="l00201"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya57">00201</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays6">const_reference</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya21">back</a>() <font class="keyword">const</font> <font class="keywordflow">throw</font>(std::out_of_range) {
00202     <font class="keywordflow">if</font> (_size&gt;0)
00203       <font class="keywordflow">return</font> (*_a)[_size-1];
00204     <font class="keywordflow">else</font>
00205       <font class="keywordflow">throw</font> std::out_of_range((<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"array has no elements (no back)"</font>)));
00206   }
00207 
<a name="l00208"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya58">00208</a>   <font class="keywordtype">void</font> <a class="code" href="classbase_1_1array.html#base_1_1arraya23">push_back</a>(<font class="keyword">const</font> T&amp; e) {
00209     <a class="code" href="classbase_1_1array.html#base_1_1arraya32">resize</a>(_size+1);
00210     (*_a)[_size-1] = e;
00211   }
00212   
<a name="l00213"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya59">00213</a>   <font class="keywordtype">void</font> <a class="code" href="classbase_1_1array.html#base_1_1arraya24">pop_back</a>() <font class="keywordflow">throw</font>(std::out_of_range) {
00214     <font class="keywordflow">if</font> (_size&gt;0)
00215       <a class="code" href="classbase_1_1array.html#base_1_1arraya32">resize</a>(_size-1);
00216     <font class="keywordflow">else</font>
00217       <font class="keywordflow">throw</font> std::out_of_range((<a class="code" href="base.html#a14">Exception</a>(<font class="stringliteral">"array has no elements (nothing to pop)"</font>)));
00218   }
00219 
00220 
<a name="l00221"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya60">00221</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays3">iterator</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya25">begin</a>() { <font class="keywordflow">return</font> _a-&gt;begin(); }
<a name="l00222"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya61">00222</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays4">const_iterator</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya25">begin</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> _a-&gt;begin(); }
00223   
<a name="l00224"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya62">00224</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays3">iterator</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya27">end</a>() { <font class="keywordflow">return</font> _a-&gt;end()-(_capacity-_size); }
<a name="l00225"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya63">00225</a>   <a class="code" href="classbase_1_1array.html#base_1_1arrays4">const_iterator</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya27">end</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> _a-&gt;end()-(_capacity-_size); }
00226 
<a name="l00227"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya64">00227</a>   <a class="code" href="classbase_1_1array.html#base_1_1arraya29">operator T*</a>() { <font class="keywordflow">return</font> (*_a)[0]; }
00228 
00229 
<a name="l00230"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya65">00230</a>   <font class="keywordtype">void</font> <a class="code" href="classbase_1_1array.html#base_1_1arraya30">extend</a>(<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> new_min_capacity, <font class="keyword">const</font> T&amp; initializer = T())
00231   {
00232     <a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> newcapacity = _capacity;
00233     <font class="keywordflow">while</font> (newcapacity &lt; new_min_capacity)
00234       newcapacity = <a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a>((<a class="code" href="namespacebase.html#a5">Real</a>(newcapacity) * 1.5) +1);
00235     
00236     <font class="keywordflow">if</font> (newcapacity &gt; _capacity) {
00237       std::vector&lt;T&gt; *_olda = _a;
00238       _a = <font class="keyword">new</font> std::vector&lt;T&gt;(newcapacity,initializer);
00239       <font class="keywordflow">for</font>(<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> e=0; e&lt;_size; ++e)
00240         (*_a)[e] = (*_olda)[e];
00241       
00242       <font class="keywordflow">if</font> (_owner) <font class="keyword">delete</font> _olda;
00243       _capacity = newcapacity;
00244       _owner=<font class="keyword">true</font>;
00245     }
00246   }
00247 
00248 
<a name="l00249"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya66">00249</a>   <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>&amp; <a class="code" href="classbase_1_1array.html#base_1_1arraya31">trim</a>()
00250   {
00251     <font class="keywordflow">if</font> (!_owner) <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00252     <font class="keywordflow">if</font> (_capacity == _size) <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00253     <a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> newcapacity = _size;
00254     <font class="keywordflow">if</font> (newcapacity==0) newcapacity=1;
00255     std::vector&lt;T&gt; *_olda = _a;
00256     _a = <font class="keyword">new</font> std::vector&lt;T&gt;(newcapacity,(*_olda)[0]);
00257     <font class="keywordflow">for</font>(<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> e=0; e&lt;_size; ++e)
00258       (*_a)[e] = (*_olda)[e];
00259     <font class="keyword">delete</font> _olda;
00260     _capacity = newcapacity;
00261     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00262   }
00263 
00264   
<a name="l00265"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya67">00265</a>   <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>&amp; <a class="code" href="classbase_1_1array.html#base_1_1arraya32">resize</a>(<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> newsize, <font class="keyword">const</font> T&amp; initializer = T())
00266   {
00267     <font class="keywordflow">if</font> (newsize &gt; _capacity) <a class="code" href="classbase_1_1array.html#base_1_1arraya30">extend</a>(newsize, initializer);
00268     _size = newsize;
00269     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00270   }
00271 
00272 
<a name="l00273"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya68">00273</a>   <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>&amp; <a class="code" href="classbase_1_1array.html#base_1_1arraya33">destructive_resize</a>(<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> newsize, <font class="keyword">const</font> T&amp; initializer = T())
00274   {
00275     <font class="keywordflow">if</font> (_owner) <font class="keyword">delete</font>[] _a;
00276     _size = _capacity = newsize;
00277     _a = <font class="keyword">new</font> std::vector&lt;T&gt;(_capacity,initializer);
00278     owner=<font class="keyword">true</font>;
00279     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00280   }
00281 
00282   
<a name="l00283"></a><a class="code" href="classbase_1_1array.html#base_1_1arraya69">00283</a>   T *<a class="code" href="classbase_1_1array.html#base_1_1arraya34">c_array</a>()<font class="keyword"> const</font>
00284 <font class="keyword">  </font>{
00285     <font class="keywordflow">return</font> &amp;((*_a)[0]);
00286   }
00287   
00288   
00289 <font class="keyword">private</font>:
00290   std::vector&lt;T&gt; *_a;
00291   <a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> _size;
00292   <a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> _capacity;
00293   <font class="keywordtype">bool</font>      _owner;  <font class="comment">// true if we alloc'd _a, false is it was provided</font>
00294 
00295   <font class="keywordtype">void</font> init(<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> <a class="code" href="classbase_1_1array.html#base_1_1arraya14">size</a>, <a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> cap, <font class="keyword">const</font> T&amp; initializer) {
00296     <font class="keywordflow">if</font> (cap&lt;<a class="code" href="classbase_1_1array.html#base_1_1arraya14">size</a>) cap = <a class="code" href="classbase_1_1array.html#base_1_1arraya14">size</a>;
00297     _size=<a class="code" href="classbase_1_1array.html#base_1_1arraya14">size</a>; _capacity=cap;
00298     _a = <font class="keyword">new</font> std::vector&lt;T&gt;(_capacity, initializer);
00299     _owner = <font class="keyword">true</font>;
00300   }
00301   
00302   <font class="keywordtype">void</font> copy(<font class="keyword">const</font> <a class="code" href="classbase_1_1array.html#base_1_1arraya0">array</a>&amp; a)
00303   {
00304     <font class="keywordflow">if</font> (_owner)
00305       <a class="code" href="classbase_1_1array.html#base_1_1arraya32">resize</a>(a._size);
00306     <a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> minsize = (_size&lt;a._size)?_size:a._size;
00307     <font class="keywordflow">for</font>(<a class="code" href="classbase_1_1array.html#base_1_1arrays7">size_type</a> e=0; e&lt;minsize; ++e)
00308       (*_a)[e] = (*a._a)[e];
00309   }
00310 
00311 };
00312 
00313 } <font class="comment">// base</font>
00314 
00315 <font class="preprocessor">#endif</font>
</pre></div><hr><address><small>Generated on Sun Mar 30 14:02:02 2003 for OpenSim by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
