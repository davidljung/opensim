<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/home/jungd/unix/dev/OpenSim/opensim/base/SliceVectorImpl.bak Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>/home/jungd/unix/dev/OpenSim/opensim/base/SliceVectorImpl.bak</h1><a href="SliceVectorImpl_8bak.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/****************************************************************************</font>
00002 <font class="comment">  Copyright (C)1996 David Jung &lt;djung@pobox.com&gt;</font>
00003 <font class="comment"></font>
00004 <font class="comment">  This program/file is free software; you can redistribute it and/or modify</font>
00005 <font class="comment">  it under the terms of the GNU General Public License as published by</font>
00006 <font class="comment">  the Free Software Foundation; either version 2 of the License, or</font>
00007 <font class="comment">  (at your option) any later version.</font>
00008 <font class="comment">  </font>
00009 <font class="comment">  This program is distributed in the hope that it will be useful,</font>
00010 <font class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</font>
00011 <font class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</font>
00012 <font class="comment">  GNU General Public License for more details. (http://www.gnu.org)</font>
00013 <font class="comment">  </font>
00014 <font class="comment">  You should have received a copy of the GNU General Public License</font>
00015 <font class="comment">  along with this program; if not, write to the Free Software</font>
00016 <font class="comment">  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</font>
00017 <font class="comment">  </font>
00018 <font class="comment">  $Id: Vector3.hpp,v 1.6 2001/05/26 01:15:40 jungd Exp $</font>
00019 <font class="comment">  $Revision: 1.6 $</font>
00020 <font class="comment">  $Date: 2001/05/26 01:15:40 $</font>
00021 <font class="comment">  $Author: jungd $</font>
00022 <font class="comment"> </font>
00023 <font class="comment">****************************************************************************/</font>
00024 
00025 <font class="preprocessor">#ifndef _BASE_SLICEVECTORIMPL_</font>
00026 <font class="preprocessor"></font><font class="preprocessor">#define _BASE_SLICEVECTORIMPL_</font>
00027 <font class="preprocessor"></font>
00028 <font class="preprocessor">#include &lt;math.h&gt;</font>
00029 <font class="preprocessor">#include &lt;valarray&gt;</font>
00030 
00031 <font class="preprocessor">#include &lt;<a class="code" href="base.html">base/base</a>&gt;</font>
00032 <font class="preprocessor">#include &lt;base/VectorImpl&gt;</font>
00033 <font class="preprocessor">#include &lt;base/ValArrayVectorImpl&gt;</font>
00034 
00035 
00036 <font class="keyword">namespace </font><a class="code" href="boost_8jamfile.html#a0">base</a> {
00037 
00038 
<a name="l00039"></a><a class="code" href="classbase_1_1SliceVectorImpl.html">00039</a> <font class="keyword">class </font>SliceVectorImpl : <font class="keyword">public</font> VectorImpl
00040 {
00041 
00042 <font class="keyword">public</font>:
00043   <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla0">SliceVectorImpl</a>(<a class="code" href="classbase_1_1VectorImpl.html#base_1_1VectorImpla0">VectorImpl</a>&amp; v, <a class="code" href="namespacebase.html#a2">Int</a> start, <a class="code" href="namespacebase.html#a2">Int</a> size, <a class="code" href="namespacebase.html#a2">Int</a> stride);
00044   <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla0">SliceVectorImpl</a>(<font class="keyword">const</font> <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla0">SliceVectorImpl</a>&amp; v);
00045   <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla2">~SliceVectorImpl</a>();
00046 
<a name="l00047"></a><a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla3">00047</a>   <font class="keyword">virtual</font> <a class="code" href="namespacebase.html#a4">String</a> <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla3">className</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="namespacebase.html#a4">String</a>(<font class="stringliteral">"SliceVectorImpl"</font>); }
<a name="l00048"></a><a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla4">00048</a>   <font class="keyword">virtual</font> <a class="code" href="classbase_1_1Object.html#base_1_1Objecta0">Object</a>&amp; <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla4">clone</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> *<font class="keyword">new</font> <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla0">SliceVectorImpl</a>(*<font class="keyword">this</font>); }
00049     
00050   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla5">setZero</a>() <font class="keywordflow">throw</font>();
00051 
00052   <font class="comment">// Not supported</font>
00053   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla6">resize</a>(<a class="code" href="namespacebase.html#a2">Int</a> <a class="code" href="classbase_1_1VectorImpl.html#base_1_1VectorImpln0">d</a>)            <font class="keywordflow">throw</font>(std::runtime_error);
00054   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla7">destructiveResize</a>(<a class="code" href="namespacebase.html#a2">Int</a> <a class="code" href="classbase_1_1VectorImpl.html#base_1_1VectorImpln0">d</a>) <font class="keywordflow">throw</font>(std::runtime_error);
00055 
00056   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla8">swap</a>(<a class="code" href="classbase_1_1VectorImpl.html#base_1_1VectorImpla0">VectorImpl</a>&amp; v)      <font class="keywordflow">throw</font>(std::runtime_error);
00057 
00058   <font class="keyword">virtual</font> <a class="code" href="namespacebase.html#a5">Real</a>&amp; <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla9">e</a>(<a class="code" href="namespacebase.html#a2">Int</a> i) <font class="keywordflow">throw</font>();
00059   <font class="keyword">virtual</font> <a class="code" href="namespacebase.html#a5">Real</a>  <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla9">e</a>(<a class="code" href="namespacebase.html#a2">Int</a> i) <font class="keyword">const</font> <font class="keywordflow">throw</font>();
00060 
00061   <font class="keyword">virtual</font> <a class="code" href="classbase_1_1VectorImpl.html#base_1_1VectorImpla0">VectorImpl</a>&amp; <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla11">operator=</a>(<font class="keyword">const</font> <a class="code" href="classbase_1_1VectorImpl.html#base_1_1VectorImpla0">VectorImpl</a>&amp; src) <font class="keywordflow">throw</font>();
00062   <font class="keyword">virtual</font> <a class="code" href="classbase_1_1VectorImpl.html#base_1_1VectorImpla0">VectorImpl</a>&amp; <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla11">operator=</a>(<a class="code" href="namespacebase.html#a5">Real</a> src) <font class="keywordflow">throw</font>();
00063 
00064   <font class="keyword">virtual</font> <font class="keywordtype">bool</font> <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla13">operator==</a>(<font class="keyword">const</font> <a class="code" href="classbase_1_1VectorImpl.html#base_1_1VectorImpla0">VectorImpl</a>&amp; v) <font class="keyword">const</font> <font class="keywordflow">throw</font>();
00065 
00066 <font class="keyword">protected</font>:
<a name="l00067"></a><a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpln0">00067</a>   ref&lt;VectorImpl&gt; <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpln0">vec</a>;
<a name="l00068"></a><a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpln1">00068</a>   std::slice  <a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpln1">slice</a>;
00069 };
00070   
00071 
00072 <font class="comment">// inlines</font>
<a name="l00073"></a><a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla0">00073</a> <font class="keyword">inline</font> SliceVectorImpl::SliceVectorImpl(VectorImpl&amp; v, <a class="code" href="namespacebase.html#a2">Int</a> start, <a class="code" href="namespacebase.html#a2">Int</a> size, <a class="code" href="namespacebase.html#a2">Int</a> stride)
00074   : VectorImpl(size), vec(&amp;v),
00075     slice(start,size,stride)
00076 {}
00077 
<a name="l00078"></a><a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla1">00078</a> <font class="keyword">inline</font> SliceVectorImpl::SliceVectorImpl(<font class="keyword">const</font> SliceVectorImpl&amp; v)
00079   : VectorImpl(v), vec(v.vec), slice(v.slice)
00080 {}
00081 
00082 
<a name="l00083"></a><a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla2">00083</a> <font class="keyword">inline</font> SliceVectorImpl::~SliceVectorImpl() {}
00084 
00085 
<a name="l00086"></a><a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla8">00086</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> SliceVectorImpl::swap(VectorImpl&amp; v) <font class="keywordflow">throw</font>(std::runtime_error)
00087 {
00088   <font class="keywordflow">if</font> (!<a class="code" href="base.html#a22">instanceof</a>(v, <font class="keyword">const</font> SliceVectorImpl))
00089     <font class="keywordflow">throw</font> <a class="code" href="classstd_1_1runtime__error.html">std::runtime_error</a>(<a class="code" href="base.html#a12">Exception</a>(<font class="stringliteral">"only supported for SliceVectorImpl implementation"</font>));
00090 
00091   SliceVectorImpl&amp; sv = narrow_cast&lt;SliceVectorImpl&gt;(v);
00092 
00093   ref&lt;VectorImpl&gt; tmpvec(vec);
00094   vec = sv.vec;
00095   sv.vec = tmpvec;
00096 
00097   std::slice tmpslice(slice);
00098   slice = sv.slice;
00099   sv.slice = tmpslice;
00100 
00101   <a class="code" href="namespacebase.html#a2">Int</a> tmpd = d;
00102   d = sv.d;
00103   sv.d = tmpd;
00104 }
00105 
<a name="l00106"></a><a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla7">00106</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> SliceVectorImpl::destructiveResize(<a class="code" href="namespacebase.html#a2">Int</a> d) <font class="keywordflow">throw</font>(std::runtime_error)
00107 { <font class="keywordflow">throw</font> <a class="code" href="classstd_1_1runtime__error.html">std::runtime_error</a>(<a class="code" href="base.html#a12">Exception</a>(<font class="stringliteral">"not supported for this Vector implementation"</font>)); }
00108 
<a name="l00109"></a><a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla9">00109</a> <font class="keyword">inline</font> <a class="code" href="namespacebase.html#a5">Real</a>&amp; SliceVectorImpl::e(<a class="code" href="namespacebase.html#a2">Int</a> i) <font class="keywordflow">throw</font>()
00110 { 
00111   <font class="keywordflow">return</font> vec-&gt;e(slice.start() + i*slice.stride());
00112 }
00113 
<a name="l00114"></a><a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla10">00114</a> <font class="keyword">inline</font> <a class="code" href="namespacebase.html#a5">Real</a> SliceVectorImpl::e(<a class="code" href="namespacebase.html#a2">Int</a> i) <font class="keyword">const</font> <font class="keywordflow">throw</font>()
00115 { 
00116   <font class="keywordflow">return</font> vec-&gt;e(slice.start() + i*slice.stride());
00117 }
00118 
<a name="l00119"></a><a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla12">00119</a> <font class="keyword">inline</font> VectorImpl&amp; SliceVectorImpl::operator=(<a class="code" href="namespacebase.html#a5">Real</a> src) <font class="keywordflow">throw</font>()
00120 {
00121   d = 1;
00122   slice = std::slice(slice.start(), dim(), slice.stride());
00123   e(1) = src;
00124   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00125 }
00126 
00127 
<a name="l00128"></a><a class="code" href="classbase_1_1SliceVectorImpl.html#base_1_1SliceVectorImpla13">00128</a> <font class="keyword">inline</font> <font class="keywordtype">bool</font> SliceVectorImpl::operator==(<font class="keyword">const</font> VectorImpl&amp; v) <font class="keyword">const</font> <font class="keywordflow">throw</font>()
00129 {
00130   <font class="keywordflow">if</font> (<a class="code" href="base.html#a22">instanceof</a>(v,<font class="keyword">const</font> SliceVectorImpl)) {
00131     <font class="keyword">const</font> SliceVectorImpl&amp; sv = narrow_cast&lt;const SliceVectorImpl&gt;(v);
00132 
00133     <font class="keywordflow">if</font> ((slice.start() == sv.slice.start()) &amp;&amp; (slice.stride() == sv.slice.stride())
00134   &amp;&amp; (vec == sv.vec))
00135       <font class="keywordflow">return</font> <font class="keyword">true</font>;
00136   }
00137 
00138   <font class="keywordflow">return</font> VectorImpl::operator==(v);
00139 }
00140 
00141 
00142 } <font class="comment">// base</font>
00143 
00144 <font class="preprocessor">#endif</font>
</pre></div><hr><address><small>Generated on Thu Aug 29 16:45:54 2002 for OpenSim by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
