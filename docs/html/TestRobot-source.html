<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OpenSim: robot/TestRobot Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>robot/TestRobot</h1><a href="TestRobot.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/* **-*-c++-*-**************************************************************</span>
00002 <span class="comment">  Copyright (C)2002 David Jung &lt;opensim@pobox.com&gt;</span>
00003 <span class="comment"></span>
00004 <span class="comment">  This program/file is free software; you can redistribute it and/or modify</span>
00005 <span class="comment">  it under the terms of the GNU General Public License as published by</span>
00006 <span class="comment">  the Free Software Foundation; either version 2 of the License, or</span>
00007 <span class="comment">  (at your option) any later version.</span>
00008 <span class="comment">  </span>
00009 <span class="comment">  This program is distributed in the hope that it will be useful,</span>
00010 <span class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00011 <span class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00012 <span class="comment">  GNU General Public License for more details. (http://www.gnu.org)</span>
00013 <span class="comment">  </span>
00014 <span class="comment">  You should have received a copy of the GNU General Public License</span>
00015 <span class="comment">  along with this program; if not, write to the Free Software</span>
00016 <span class="comment">  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00017 <span class="comment">  </span>
00018 <span class="comment">  $Id: TestRobot 1039 2004-02-11 20:50:52Z jungd $</span>
00019 <span class="comment">  $Revision: 1.9 $</span>
00020 <span class="comment">  $Date: 2004-02-11 15:50:52 -0500 (Wed, 11 Feb 2004) $</span>
00021 <span class="comment">  $Author: jungd $</span>
00022 <span class="comment"> </span>
00023 <span class="comment">****************************************************************************/</span>
00024 
00025 <span class="preprocessor">#ifndef _ROBOT_TESTROBOT_</span>
00026 <span class="preprocessor"></span><span class="preprocessor">#define _ROBOT_TESTROBOT_</span>
00027 <span class="preprocessor"></span>
00028 <span class="preprocessor">#include &lt;<a class="code" href="Robot.html">robot/Robot</a>&gt;</span>
00029 
00030 <span class="preprocessor">#include &lt;<a class="code" href="VFile.html">base/VFile</a>&gt;</span>
00031 <span class="preprocessor">#include &lt;<a class="code" href="Vector.html">base/Vector</a>&gt;</span>
00032 <span class="preprocessor">#include &lt;<a class="code" href="BasicControlInterface.html">robot/BasicControlInterface</a>&gt;</span>
00033 <span class="preprocessor">#include &lt;<a class="code" href="KinematicChain.html">robot/KinematicChain</a>&gt;</span>
00034 <span class="preprocessor">#include &lt;<a class="code" href="ToolDescription.html">robot/ToolDescription</a>&gt;</span>
00035 
00036 
00037 <span class="keyword">namespace </span><a class="code" href="robot_2Jamfile_8ft.html#a0">robot</a> {
00038 
00039 <span class="comment"></span>
00040 <span class="comment">/**</span>
00041 <span class="comment"> * A concrete Robot class that doesn't correspond to any</span>
00042 <span class="comment"> *  real robot.  It is useful for testing. </span>
00043 <span class="comment"> *  The RobotDescription provided depends on the constructor used for instantiation.</span>
00044 <span class="comment"> */</span>
<a name="l00045"></a><a class="code" href="classrobot_1_1TestRobot.html">00045</a> <span class="keyword">class </span><a class="code" href="classrobot_1_1TestRobot.html">TestRobot</a> : <span class="keyword">public</span> <a class="code" href="classrobot_1_1Robot.html">Robot</a> 
00046 {
00047 <span class="keyword">public</span>:
<a name="l00048"></a><a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobotw2">00048</a>   <span class="keyword">enum</span> <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobotw2">JointType</a> { Prismatic = KinematicChain::Link::Prismatic,
00049                    Revolute = KinematicChain::Link::Revolute };
00050 <span class="comment"></span>
00051 <span class="comment">  /// instantiate default robot (fixed platform with a single Puma manipulator)</span>
00052 <span class="comment"></span>  <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota0">TestRobot</a>();
00053 <span class="comment"></span>
00054 <span class="comment">  /// instantiate robot from file specification</span>
00055 <span class="comment"></span>  <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota0">TestRobot</a>(<a class="code" href="classbase_1_1ref.html">ref&lt;base::VFile&gt;</a> robotSpecification,
00056             <span class="keyword">const</span> <a class="code" href="classbase_1_1Vector3.html">base::Point3</a>&amp; initialPosition, <span class="keyword">const</span> <a class="code" href="classbase_1_1Orient.html">base::Orient</a>&amp; initialOrientation);
00057 <span class="comment"></span>
00058 <span class="comment">  /// instantiate robot from a description</span>
00059 <span class="comment"></span>  <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota0">TestRobot</a>(<a class="code" href="classbase_1_1ref.html">ref&lt;const robot::RobotDescription&gt;</a> robotDescription,
00060                   <span class="keyword">const</span> <a class="code" href="classbase_1_1Vector3.html">base::Point3</a>&amp; initialPosition, <span class="keyword">const</span> <a class="code" href="classbase_1_1Orient.html">base::Orient</a>&amp; initialOrientation);
00061 <span class="comment"></span>
00062 <span class="comment">  /// instantiate a fixed platform with a single manipulator specified via D-H parameters</span>
00063 <span class="comment"></span>  <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota0">TestRobot</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">base::IVector</a>&amp; jointType, <span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">base::Vector</a>&amp; alpha, <span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">base::Vector</a>&amp; a, <span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">base::Vector</a>&amp; d, <span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">base::Vector</a>&amp; theta);
00064 
00065 
<a name="l00066"></a><a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota4">00066</a>   <span class="keyword">virtual</span> String <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota4">className</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> String(<span class="stringliteral">"TestRobot"</span>); }
00067 
00068   <span class="keyword">virtual</span> array&lt;std::pair&lt;String,String&gt; &gt; <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota5">controlInterfaces</a>() <span class="keyword">const</span>; 
00069 <span class="comment"></span>
00070 <span class="comment">  /**</span>
00071 <span class="comment">   * TestRobot provides the following ControlInterfaces (name:type):</span>
00072 <span class="comment">   *</span>
00073 <span class="comment">   *  platformPosition:PlatformPositionControl        </span>
00074 <span class="comment">   *    - outputs control the x,y and angle of the platform w.r.t to the world coordinate frame.</span>
00075 <span class="comment">   *       The angle is clockwise relative to the x-axis (about z).</span>
00076 <span class="comment">   *</span>
00077 <span class="comment">   *  manipulatorPositionN:JointPositionControl</span>
00078 <span class="comment">   *    - outputs control the position of a manipulators joints (angle for revolute joints</span>
00079 <span class="comment">   *      and extension for prismatic joints)</span>
00080 <span class="comment">   *</span>
00081 <span class="comment">   *  manipulatorProximityN:LinkProximitySensors</span>
00082 <span class="comment">   *     - Inputs provide proximity sensor information.</span>
00083 <span class="comment">   *</span>
00084 <span class="comment">   *  manipulatorToolGripN:ToolGripControl</span>
00085 <span class="comment">   *     - single scalar input represents tool proximity to tool grip mechanism.</span>
00086 <span class="comment">   *       0 =&gt; not in range to be grasped, 1 =&gt; in range to be grasped (or currently grasped)</span>
00087 <span class="comment">   *       single scalar output controls tool gripper latch</span>
00088 <span class="comment">   *       1 =&gt; grasp/latch tool, 0 =&gt; ungrasp/unlatch tool</span>
00089 <span class="comment">   *</span>
00090 <span class="comment">   *  toolPositionN:JointPositionControl</span>
00091 <span class="comment">   *     - joint position for tool joints (if any).  Note that the inputSize() and outputSize()</span>
00092 <span class="comment">   *       change dynamically depending on which tool is grasped (0 when no tool is grasped)</span>
00093 <span class="comment">   *</span>
00094 <span class="comment">   */</span>
00095   <span class="keyword">virtual</span> <a class="code" href="classbase_1_1ref.html">ref&lt;ControlInterface&gt;</a> <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota6">getControlInterface</a>(String interfaceName=<span class="stringliteral">""</span>) <span class="keywordflow">throw</span>(std::invalid_argument);
00096 
<a name="l00097"></a><a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota7">00097</a>   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota7">isDescriptionProvided</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }
00098 
<a name="l00099"></a><a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota8">00099</a>   <span class="keyword">const</span> <a class="code" href="classbase_1_1Vector3.html">base::Point3</a> <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota8">getPosition</a>() <span class="keyword">const</span>          <span class="comment">///&lt; get world frame position of robot</span>
00100 <span class="comment"></span>    { <span class="keywordflow">return</span> position; }             
<a name="l00101"></a><a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota9">00101</a>   <span class="keyword">const</span> <a class="code" href="classbase_1_1Orient.html">base::Orient</a> <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota9">getOrientation</a>() <span class="keyword">const</span>       <span class="comment">///&lt; get world frame orientation of robot</span>
00102 <span class="comment"></span>    { <span class="keywordflow">return</span> orientation; }       
<a name="l00103"></a><a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota10">00103</a>   <span class="keywordtype">void</span> <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota10">setPosition</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1Vector3.html">base::Point3</a>&amp; pos)       <span class="comment">///&lt; set world frame position of robot</span>
00104 <span class="comment"></span>    { position = pos; }          
<a name="l00105"></a><a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota11">00105</a>   <span class="keywordtype">void</span> <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota11">setOrientation</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1Orient.html">base::Orient</a>&amp; orient) <span class="comment">///&lt; set world frame orientation of robot</span>
00106 <span class="comment"></span>    { orientation = orient; }
00107   <span class="comment"></span>
00108 <span class="comment">  /// because tools are not physically simulated, we can 'magically' indicate that</span>
00109 <span class="comment">  ///  a tool is within grasping range of the end-effector</span>
00110 <span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota12">placeToolInProximity</a>(<a class="code" href="classbase_1_1ref.html">ref&lt;const ToolDescription&gt;</a> toolDescription, Int manipIndex=0);
00111 <span class="comment"></span>
00112 <span class="comment">  /// remove any tool from within grasping range of the end-effector</span>
00113 <span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobota13">removeToolFromProximity</a>(Int manipIndex=0);
00114 
00115 
00116 <span class="keyword">protected</span>:
00117   <span class="keywordtype">void</span> <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobotb0">create</a>(String manipName, <span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">base::IVector</a>&amp; jointType, <span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">base::Vector</a>&amp; alpha, <span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">base::Vector</a>&amp; a, <span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">base::Vector</a>&amp; d, <span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">base::Vector</a>&amp; theta);
00118   <span class="keywordtype">void</span> <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobotb1">initManipulators</a>();
00119 
<a name="l00120"></a><a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobotp0">00120</a>   <a class="code" href="classbase_1_1Vector3.html">base::Point3</a> position;    <span class="comment">///&lt; world frame position of robot</span>
<a name="l00121"></a><a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobotp1">00121</a> <span class="comment"></span>  <a class="code" href="classbase_1_1Orient.html">base::Orient</a> orientation; <span class="comment">///&lt; world frame orientation of robot</span>
00122 <span class="comment"></span>
<a name="l00123"></a><a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobotp2">00123</a>   array&lt;Vector&gt; <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobotp2">qa</a>;  <span class="comment">///&lt; joint parameters of manipulators</span>
<a name="l00124"></a><a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobotp3">00124</a> <span class="comment"></span>  array&lt;Vector&gt; <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobotp3">tqa</a>; <span class="comment">///&lt; joint parameters of tools (index corresponds to manipulators (qa) - i.e. at most one tool per manipulator)</span>
00125 <span class="comment"></span>
<a name="l00126"></a><a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobotp4">00126</a>   array&lt;bool&gt;            <a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobotp4">toolProximity</a>; <span class="comment">///&lt; is a tool in proximity of manipulator end-effector?</span>
<a name="l00127"></a><a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobotp5">00127</a> <span class="comment"></span>  array&lt;bool&gt;            toolGrasped;   <span class="comment">///&lt; is manipulator grasping a tool?</span>
<a name="l00128"></a><a class="code" href="classrobot_1_1TestRobot.html#robot_1_1TestRobotp6">00128</a> <span class="comment"></span>  array&lt;ref&lt;const ToolDescription&gt; &gt; tools;         <span class="comment">///&lt; which tool (in proximity and possibly being grasped)</span>
00129 <span class="comment"></span>
00130 
<a name="l00131"></a><a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html">00131</a>   <span class="keyword">class </span><a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html">ManipulatorControlInterface</a> : <span class="keyword">public</span> <a class="code" href="classrobot_1_1BasicControlInterface.html">BasicControlInterface</a>
00132   {
00133   <span class="keyword">public</span>:
<a name="l00134"></a><a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea0">00134</a>     <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea0">ManipulatorControlInterface</a>(<span class="keyword">const</span> String&amp; name, <span class="keyword">const</span> String&amp; type, <a class="code" href="classbase_1_1ref.html">ref&lt;TestRobot&gt;</a> robot, Int manipIndex)
00135       : <a class="code" href="classrobot_1_1BasicControlInterface.html">BasicControlInterface</a>(name, type, 
00136                               robot-&gt;qa[manipIndex].size(), robot-&gt;qa[manipIndex].size()
00137                               ),
00138             robot(robot), <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacep1">mi</a>(manipIndex) {}
00139 
<a name="l00140"></a><a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea1">00140</a>     <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea0">ManipulatorControlInterface</a>(<span class="keyword">const</span> <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html">ManipulatorControlInterface</a>&amp; mci)
00141       : <a class="code" href="classrobot_1_1BasicControlInterface.html">BasicControlInterface</a>(mci), robot(mci.robot), <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacep1">mi</a>(mci.<a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacep1">mi</a>) {}
00142 
<a name="l00143"></a><a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea2">00143</a>     <span class="keyword">virtual</span> String <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea2">className</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> String(<span class="stringliteral">"ManipulatorControlInterface"</span>); }
<a name="l00144"></a><a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea3">00144</a>     <span class="keyword">virtual</span> Object&amp; <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea3">clone</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *<a class="code" href="MemoryTracer.html#a0">NewObj</a> <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea0">ManipulatorControlInterface</a>(*<span class="keyword">this</span>); } 
00145 
<a name="l00146"></a><a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea4">00146</a>     <span class="keyword">virtual</span> String        <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea4">inputName</a>(Int i)<span class="keyword"> const</span>
00147 <span class="keyword">      </span>{ <span class="keywordflow">return</span> String(<span class="stringliteral">"jointPosition"</span>)+<a class="code" href="namespacebase.html#a50">base::intToString</a>(i); }
00148 
<a name="l00149"></a><a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea5">00149</a>     <span class="keyword">virtual</span> Real          <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea5">getInput</a>(Int i)<span class="keyword"> const</span>
00150 <span class="keyword">    </span>{ 
00151       <a class="code" href="base.html#a19">Assert</a>(i &lt; <a class="code" href="classrobot_1_1BasicControlInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea8">inputSize</a>());
00152       <span class="keywordflow">return</span> robot-&gt;qa[<a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacep1">mi</a>][i];
00153     }
00154     
<a name="l00155"></a><a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea6">00155</a>     <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">Vector</a>&amp; <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea6">getInputs</a>()<span class="keyword"> const </span>
00156 <span class="keyword">    </span>{
00157       <span class="keywordflow">return</span> robot-&gt;qa[<a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacep1">mi</a>];
00158     }
00159     
<a name="l00160"></a><a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea7">00160</a>     <span class="keyword">virtual</span> String <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea7">outputName</a>(Int i)<span class="keyword"> const</span>
00161 <span class="keyword">    </span>{ 
00162       <span class="keywordflow">return</span> String(<span class="stringliteral">"jointPosition"</span>)+<a class="code" href="namespacebase.html#a50">base::intToString</a>(i); 
00163     }
00164     
<a name="l00165"></a><a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea8">00165</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span>   <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea8">setOutput</a>(Int i, Real value)
00166     {
00167       <a class="code" href="base.html#a19">Assert</a>(i &lt; <a class="code" href="classrobot_1_1BasicControlInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea10">outputSize</a>());
00168       robot-&gt;qa[<a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacep1">mi</a>][i]=value;
00169     }
00170     
<a name="l00171"></a><a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea9">00171</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span>   <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacea9">setOutputs</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">Vector</a>&amp; values) 
00172     {
00173       <a class="code" href="base.html#a19">Assert</a>(values.<a class="code" href="classbase_1_1vector.html#base_1_1vectora12">size</a>() == robot-&gt;qa[<a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacep1">mi</a>].size());
00174       robot-&gt;qa[<a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacep1">mi</a>] = values;
00175     }
00176 
00177   <span class="keyword">protected</span>:
<a name="l00178"></a><a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacep0">00178</a>     <a class="code" href="classbase_1_1ref.html">ref&lt;TestRobot&gt;</a> robot;
<a name="l00179"></a><a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacep1">00179</a>     Int <a class="code" href="classrobot_1_1TestRobot_1_1ManipulatorControlInterface.html#robot_1_1TestRobot_1_1ManipulatorControlInterfacep1">mi</a>;
00180   }; 
00181 
00182 
00183 
00184 
<a name="l00185"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html">00185</a>   <span class="keyword">class </span><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html">ToolControlInterface</a> : <span class="keyword">public</span> <a class="code" href="classrobot_1_1BasicControlInterface.html">BasicControlInterface</a>
00186   {
00187   <span class="keyword">public</span>:
<a name="l00188"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea0">00188</a>     <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea0">ToolControlInterface</a>(<span class="keyword">const</span> String&amp; name, <span class="keyword">const</span> String&amp; type, <a class="code" href="classbase_1_1ref.html">ref&lt;TestRobot&gt;</a> robot, Int manipIndex, <span class="keywordtype">bool</span> gripControl)
00189       : <a class="code" href="classrobot_1_1BasicControlInterface.html">BasicControlInterface</a>(name, type, gripControl?1:0, gripControl?1:0),
00190         gripControl(gripControl), robot(robot), mi(manipIndex) {}
00191     
<a name="l00192"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea1">00192</a>     <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea0">ToolControlInterface</a>(<span class="keyword">const</span> <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html">ToolControlInterface</a>&amp; tci)
00193       : <a class="code" href="classrobot_1_1BasicControlInterface.html">BasicControlInterface</a>(tci), gripControl(tci.gripControl), 
00194         robot(tci.robot), mi(tci.mi) {}
00195 
<a name="l00196"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea2">00196</a>     <span class="keyword">virtual</span> String <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea2">className</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> String(<span class="stringliteral">"ToolControlInterface"</span>); }
<a name="l00197"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea3">00197</a>     <span class="keyword">virtual</span> Object&amp; <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea3">clone</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *<a class="code" href="MemoryTracer.html#a0">NewObj</a> <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea0">ToolControlInterface</a>(*<span class="keyword">this</span>); }
00198 
<a name="l00199"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea4">00199</a>     <span class="keyword">virtual</span> Int           <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea4">inputSize</a>()<span class="keyword"> const </span>
00200 <span class="keyword">    </span>{
00201       <span class="keywordflow">return</span> (gripControl)?1:robot-&gt;tqa[mi].size();
00202     }
00203 
<a name="l00204"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea5">00204</a>     <span class="keyword">virtual</span> String        <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea5">inputName</a>(Int i)<span class="keyword"> const</span>
00205 <span class="keyword">      </span>{ <span class="keywordflow">return</span> gripControl?String(<span class="stringliteral">"toolProximity"</span>):String(<span class="stringliteral">"jointPosition"</span>)+<a class="code" href="namespacebase.html#a50">base::intToString</a>(i); }
00206 
<a name="l00207"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea6">00207</a>     <span class="keyword">virtual</span> Real          <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea6">getInput</a>(Int i)<span class="keyword"> const</span>
00208 <span class="keyword">      </span>{ 
00209         <a class="code" href="base.html#a19">Assert</a>(i &lt; <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea4">inputSize</a>());
00210         <span class="keywordflow">if</span> (gripControl) 
00211           <span class="keywordflow">return</span> (robot-&gt;toolProximity[mi]?1.0:0.0);
00212         <span class="keywordflow">return</span> robot-&gt;tqa[mi][i];
00213       }
00214 
<a name="l00215"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea7">00215</a>     <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">Vector</a>&amp; <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea7">getInputs</a>()<span class="keyword"> const </span>
00216 <span class="keyword">    </span>{
00217       lastInputs.<a class="code" href="classbase_1_1vector.html#base_1_1vectora14">resize</a>(<a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea4">inputSize</a>());
00218       <span class="keywordflow">for</span>(Int i=0; i&lt;lastInputs.<a class="code" href="classbase_1_1vector.html#base_1_1vectora12">size</a>(); i++)
00219         lastInputs[i] = <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea6">getInput</a>(i);
00220       <span class="keywordflow">return</span> lastInputs;
00221     }
00222 
<a name="l00223"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea8">00223</a>     <span class="keyword">virtual</span> Int    <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea8">outputSize</a>()<span class="keyword"> const </span>
00224 <span class="keyword">    </span>{
00225       <span class="keywordflow">return</span> (gripControl)?1:robot-&gt;tqa[mi].size();
00226     }
00227 
<a name="l00228"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea9">00228</a>     <span class="keyword">virtual</span> String <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea9">outputName</a>(Int i)<span class="keyword"> const</span>
00229 <span class="keyword">      </span>{ 
00230         <span class="keywordflow">return</span> gripControl?String(<span class="stringliteral">"toolGrasp"</span>):String(<span class="stringliteral">"jointPosition"</span>)+<a class="code" href="namespacebase.html#a50">base::intToString</a>(i); 
00231       }
00232 
<a name="l00233"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea10">00233</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span>   <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea10">setOutput</a>(Int i, Real value)
00234       {
00235         <a class="code" href="base.html#a19">Assert</a>(i &lt; <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea8">outputSize</a>());
00236         <span class="keywordflow">if</span> (gripControl) {
00237           <span class="keywordflow">if</span> (Math::equals(value,0)) {
00238             robot-&gt;toolGrasped[mi]=<span class="keyword">false</span>;
00239             robot-&gt;tqa[mi].resize(0); <span class="comment">// can't control an ungrasped tool</span>
00240           }
00241           <span class="keywordflow">else</span>
00242             <span class="keywordflow">if</span> (robot-&gt;toolProximity[mi]) { <span class="comment">// can only grasp when a tool is in proximity</span>
00243               <span class="keywordflow">if</span> (!robot-&gt;toolGrasped[mi]) {
00244                 robot-&gt;toolGrasped[mi]=<span class="keyword">true</span>;
00245                 <span class="comment">// set initial configuration to 0</span>
00246                 robot-&gt;tqa[mi].reset( zeroVector(robot-&gt;tools[mi]-&gt;getKinematicChain().dof()) );
00247               }
00248             }
00249           <span class="keywordflow">return</span>;
00250         }
00251         robot-&gt;tqa[mi][i]=value;
00252       }
00253 
<a name="l00254"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea11">00254</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span>   <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea11">setOutputs</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">Vector</a>&amp; values) 
00255     {
00256       numOutputs = <a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacea8">outputSize</a>();
00257       BasicControlInterface::setOutputs(values);
00258     }
00259 
00260   <span class="keyword">protected</span>:
<a name="l00261"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacep0">00261</a>     <span class="keywordtype">bool</span> gripControl; <span class="comment">///&lt; is this a ToolGripControl? (or a JointPositionControl)</span>
<a name="l00262"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacep1">00262</a> <span class="comment"></span>    <a class="code" href="classbase_1_1ref.html">ref&lt;TestRobot&gt;</a> robot;
<a name="l00263"></a><a class="code" href="classrobot_1_1TestRobot_1_1ToolControlInterface.html#robot_1_1TestRobot_1_1ToolControlInterfacep2">00263</a>     Int mi;
00264   };
00265 
00266 
00267 
00268 
<a name="l00269"></a><a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html">00269</a>   <span class="keyword">class </span><a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html">PlatformControlInterface</a> : <span class="keyword">public</span> <a class="code" href="classrobot_1_1BasicControlInterface.html">BasicControlInterface</a>
00270   {
00271   <span class="keyword">public</span>:
<a name="l00272"></a><a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea0">00272</a>     <a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea0">PlatformControlInterface</a>(<span class="keyword">const</span> String&amp; name, <span class="keyword">const</span> String&amp; type, 
00273                              <a class="code" href="classbase_1_1ref.html">ref&lt;TestRobot&gt;</a> robot, <span class="keywordtype">bool</span> mobilePlatform)
00274       : <a class="code" href="classrobot_1_1BasicControlInterface.html">BasicControlInterface</a>(name, type,mobilePlatform?3:0,mobilePlatform?3:0),
00275         robot(robot) {}
00276 
<a name="l00277"></a><a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea1">00277</a>     <a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea0">PlatformControlInterface</a>(<span class="keyword">const</span> <a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html">PlatformControlInterface</a>&amp; pci)
00278       : <a class="code" href="classrobot_1_1BasicControlInterface.html">BasicControlInterface</a>(pci), robot(pci.robot) {}
00279 
<a name="l00280"></a><a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea2">00280</a>     <span class="keyword">virtual</span> String <a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea2">className</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> String(<span class="stringliteral">"PlatformControlInterface"</span>); }
<a name="l00281"></a><a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea3">00281</a>     <span class="keyword">virtual</span> Object&amp; <a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea3">clone</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *<a class="code" href="MemoryTracer.html#a0">NewObj</a> <a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea0">PlatformControlInterface</a>(*<span class="keyword">this</span>); } 
00282 
<a name="l00283"></a><a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea4">00283</a>     <span class="keyword">virtual</span> String        <a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea4">inputName</a>(Int i)<span class="keyword"> const</span>
00284 <span class="keyword">    </span>{ <span class="keywordflow">return</span> (i==0)?String(<span class="stringliteral">"worldX"</span>):( (i==1)?String(<span class="stringliteral">"worldY"</span>):String(<span class="stringliteral">"worldTheta"</span>) ); }
00285 
<a name="l00286"></a><a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea5">00286</a>     <span class="keyword">virtual</span> Real          <a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea5">getInput</a>(Int i)<span class="keyword"> const</span>
00287 <span class="keyword">      </span>{ 
00288         <a class="code" href="base.html#a19">Assert</a>(i &lt; <a class="code" href="classrobot_1_1BasicControlInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea8">inputSize</a>());
00289         <span class="keywordflow">if</span> (i==0) <span class="keywordflow">return</span> robot-&gt;position.x;
00290         <span class="keywordflow">if</span> (i==1) <span class="keywordflow">return</span> robot-&gt;position.y;
00291         <span class="comment">// extract rotation about Z-axis component</span>
00292         <a class="code" href="classbase_1_1Vector3.html">Vector3</a> xaxis(1,0,0);
00293         <a class="code" href="classbase_1_1Vector3.html">Vector3</a> txaxis = robot-&gt;orientation.getQuat4().rotate(xaxis);
00294         txaxis.<a class="code" href="classbase_1_1Vector3.html#base_1_1Vector3o2">z</a>=0; txaxis.<a class="code" href="classbase_1_1Vector3.html#base_1_1Vector3a22">normalize</a>(); <span class="comment">// project into x-y plane</span>
00295         Real angle = Math::acos(xaxis.<a class="code" href="classbase_1_1Vector3.html#base_1_1Vector3a26">dot</a>(txaxis));<span class="comment"></span>
00296 <span class="comment">        ///!!! check this works for a full circle - as acos(dot) is just the angle between vectors</span>
00297 <span class="comment"></span>        <span class="keywordflow">return</span> Math::normalizeAngle(angle);
00298       }
00299 
<a name="l00300"></a><a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea6">00300</a>     <span class="keyword">virtual</span> String <a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea6">outputName</a>(Int i)<span class="keyword"> const</span>
00301 <span class="keyword">      </span>{ 
00302         <span class="keywordflow">return</span> (i==0)?String(<span class="stringliteral">"worldX"</span>):( (i==1)?String(<span class="stringliteral">"worldY"</span>):String(<span class="stringliteral">"worldTheta"</span>) ); 
00303       }
00304 
<a name="l00305"></a><a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea7">00305</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span>   <a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacea7">setOutput</a>(Int i, Real value)
00306       {
00307         <a class="code" href="base.html#a19">Assert</a>(i &lt; <a class="code" href="classrobot_1_1BasicControlInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea10">outputSize</a>());
00308         <span class="keywordflow">if</span> ((i==0)||(i==1)) {
00309           <a class="code" href="classbase_1_1Vector3.html">base::Point3</a> newpos( robot-&gt;position );
00310           <span class="keywordflow">if</span> (i==0) newpos.<a class="code" href="classbase_1_1Vector3.html#base_1_1Vector3o0">x</a> = value;
00311           <span class="keywordflow">if</span> (i==1) newpos.<a class="code" href="classbase_1_1Vector3.html#base_1_1Vector3o1">y</a> = value;
00312           robot-&gt;position = newpos;
00313         }
00314         <span class="keywordflow">else</span> {
00315           <a class="code" href="classbase_1_1Orient.html">base::Orient</a> neworient( robot-&gt;orientation );
00316           <span class="comment">// !!! for now we ignore the rotation components about y,z axes and</span>
00317           <span class="comment">//  just create a rot about z-axis by value</span>
00318           neworient = <a class="code" href="classbase_1_1Orient.html">base::Orient</a>(<a class="code" href="classbase_1_1Quat4.html">base::Quat4</a>(<a class="code" href="classbase_1_1Vector3.html">base::Vector3</a>(0,0,1),value));
00319           robot-&gt;orientation = neworient;
00320         }
00321       }
00322 
00323   <span class="keyword">protected</span>:
<a name="l00324"></a><a class="code" href="classrobot_1_1TestRobot_1_1PlatformControlInterface.html#robot_1_1TestRobot_1_1PlatformControlInterfacep0">00324</a>     <a class="code" href="classbase_1_1ref.html">ref&lt;TestRobot&gt;</a> robot;
00325   };
00326 
00327   
00328   
00329   
<a name="l00330"></a><a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html">00330</a>   <span class="keyword">class </span><a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html">ProximitySensorInterface</a> : <span class="keyword">public</span> <a class="code" href="classrobot_1_1BasicControlInterface.html">BasicControlInterface</a>
00331   {
00332   <span class="keyword">public</span>:
<a name="l00333"></a><a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea0">00333</a>     <a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea0">ProximitySensorInterface</a>(<span class="keyword">const</span> String&amp; name, <span class="keyword">const</span> String&amp; type, 
00334                              <a class="code" href="classbase_1_1ref.html">ref&lt;TestRobot&gt;</a> robot, Int manipIndex)
00335       : <a class="code" href="classrobot_1_1BasicControlInterface.html">BasicControlInterface</a>(name, type,4,0),
00336         robot(robot), mi(manipIndex) {}
00337 
<a name="l00338"></a><a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea1">00338</a>     <a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea0">ProximitySensorInterface</a>(<span class="keyword">const</span> <a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html">ProximitySensorInterface</a>&amp; psi)
00339       : <a class="code" href="classrobot_1_1BasicControlInterface.html">BasicControlInterface</a>(psi), robot(psi.robot), mi(psi.mi) {}
00340 
<a name="l00341"></a><a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea2">00341</a>     <span class="keyword">virtual</span> String <a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea2">className</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> String(<span class="stringliteral">"ProximitySensorInterface"</span>); }
<a name="l00342"></a><a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea3">00342</a>     <span class="keyword">virtual</span> Object&amp; <a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea3">clone</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *<a class="code" href="MemoryTracer.html#a0">NewObj</a> <a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea0">ProximitySensorInterface</a>(*<span class="keyword">this</span>); } 
00343 
<a name="l00344"></a><a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea4">00344</a>     <span class="keyword">virtual</span> String        <a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea4">inputName</a>(Int i)<span class="keyword"> const</span>
00345 <span class="keyword">    </span>{
00346       <span class="keywordflow">return</span> (i==0)?String(<span class="stringliteral">"link"</span>):String(<span class="stringliteral">"xyz"</span>).substr(i-1,1);
00347     }
00348 
<a name="l00349"></a><a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea5">00349</a>     <span class="keyword">virtual</span> Real          <a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea5">getInput</a>(Int i)<span class="keyword"> const</span>
00350 <span class="keyword">      </span>{ 
00351         <a class="code" href="base.html#a19">Assert</a>(i &lt; <a class="code" href="classrobot_1_1BasicControlInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea8">inputSize</a>());
00352         <span class="keywordflow">return</span> 0;
00353       }
00354 
<a name="l00355"></a><a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea6">00355</a>     <span class="keyword">virtual</span> String <a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea6">outputName</a>(Int i)<span class="keyword"> const</span>
00356 <span class="keyword">      </span>{ 
00357         <span class="keywordflow">return</span> String();
00358       }
00359 
<a name="l00360"></a><a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea7">00360</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span>   <a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea7">setOutput</a>(Int i, Real value)
00361       { <a class="code" href="base.html#a19">Assert</a>(i &lt; <a class="code" href="classrobot_1_1BasicControlInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacea10">outputSize</a>()); }
00362 
00363   <span class="keyword">protected</span>:
<a name="l00364"></a><a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacep0">00364</a>     <a class="code" href="classbase_1_1ref.html">ref&lt;TestRobot&gt;</a> robot;
<a name="l00365"></a><a class="code" href="classrobot_1_1TestRobot_1_1ProximitySensorInterface.html#robot_1_1TestRobot_1_1ProximitySensorInterfacep1">00365</a>     Int mi;
00366   };
00367 
00368 };
00369 
00370 
00371 } <span class="comment">// robot</span>
00372 
00373 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Jul 29 15:56:44 2004 for OpenSim by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
