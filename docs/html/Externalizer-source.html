<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OpenSim: base/Externalizer Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>base/Externalizer</h1><a href="Externalizer.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/* *-*-c++-*-****************************************************************</span>
00002 <span class="comment">  Copyright (C)2002 David Jung &lt;opensim@pobox.com&gt;</span>
00003 <span class="comment"></span>
00004 <span class="comment">  This program/file is free software; you can redistribute it and/or modify</span>
00005 <span class="comment">  it under the terms of the GNU General Public License as published by</span>
00006 <span class="comment">  the Free Software Foundation; either version 2 of the License, or</span>
00007 <span class="comment">  (at your option) any later version.</span>
00008 <span class="comment">  </span>
00009 <span class="comment">  This program is distributed in the hope that it will be useful,</span>
00010 <span class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00011 <span class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00012 <span class="comment">  GNU General Public License for more details. (http://www.gnu.org)</span>
00013 <span class="comment">  </span>
00014 <span class="comment">  You should have received a copy of the GNU General Public License</span>
00015 <span class="comment">  along with this program; if not, write to the Free Software</span>
00016 <span class="comment">  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00017 <span class="comment">  </span>
00018 <span class="comment">  $Id: Externalizer 1067 2004-02-27 21:09:46Z jungd $</span>
00019 <span class="comment">  $Revision: 1.5 $</span>
00020 <span class="comment">  $Date: 2004-02-27 16:09:46 -0500 (Fri, 27 Feb 2004) $</span>
00021 <span class="comment">  $Author: jungd $</span>
00022 <span class="comment"> </span>
00023 <span class="comment">****************************************************************************/</span>
00024 
00025 <span class="preprocessor">#ifndef _BASE_EXTERNALIZER_</span>
00026 <span class="preprocessor"></span><span class="preprocessor">#define _BASE_EXTERNALIZER_</span>
00027 <span class="preprocessor"></span>
00028 <span class="preprocessor">#include &lt;<a class="code" href="base.html">base/base</a>&gt;</span>
00029 <span class="preprocessor">#include &lt;<a class="code" href="Externalizable.html">base/Externalizable</a>&gt;</span>
00030 <span class="preprocessor">#include &lt;<a class="code" href="Referenced.html">base/Referenced</a>&gt;</span>
00031 <span class="preprocessor">#include &lt;<a class="code" href="PathName.html">base/PathName</a>&gt;</span>
00032 <span class="preprocessor">#include &lt;<a class="code" href="VFile.html">base/VFile</a>&gt;</span>
00033 <span class="preprocessor">#include &lt;<a class="code" href="Vector.html">base/Vector</a>&gt;</span>
00034 <span class="preprocessor">#include &lt;<a class="code" href="Vector3.html">base/Vector3</a>&gt;</span>
00035 <span class="preprocessor">#include &lt;<a class="code" href="Matrix4.html">base/Matrix4</a>&gt;</span>
00036 <span class="preprocessor">#include &lt;<a class="code" href="Matrix.html">base/Matrix</a>&gt;</span>
00037 
00038 <span class="preprocessor">#include &lt;<a class="code" href="DOM.html">base/DOM</a>&gt;</span>
00039 
00040 <span class="preprocessor">#include &lt;iostream&gt;</span>
00041 <span class="preprocessor">#include &lt;list&gt;</span>
00042 <span class="preprocessor">#include &lt;stack&gt;</span>
00043 
00044 
00045 
00046 
00047 
00048 
00049 
00050 <span class="keyword">namespace </span><a class="code" href="base_2Jamfile_8ft.html#a0">base</a> {
00051 
00052 <span class="comment"></span>
00053 <span class="comment">  /// Helper class for transcoding between char* or String ASCII and XML Unicode strings</span>
00054 <span class="comment">  ///  Use like XS("ascii") - has automatic conversion to XMLCh*</span>
00055 <span class="comment">  ///        or XS(domElement-&gt;getTagName()) - has auto conversion to String</span>
<a name="l00056"></a><a class="code" href="classbase_1_1XS.html">00056</a> <span class="comment"></span>  <span class="keyword">class </span><a class="code" href="classbase_1_1XS.html">XS</a>
00057   {
00058   <span class="keyword">public</span>:
<a name="l00059"></a><a class="code" href="classbase_1_1XS.html#base_1_1XSa0">00059</a>     <a class="code" href="classbase_1_1XS.html#base_1_1XSa0">XS</a>(<a class="code" href="namespacebase.html#a4">String</a> str)
00060     { 
00061       <span class="keyword">const</span> <a class="code" href="namespacebase.html#a2">Int</a> len = str.length();
00062       unicode = <span class="keyword">new</span> <a class="code" href="namespacebase.html#a14">XCh</a>[len+8];
00063       dom::XMLString::transcode(str.c_str(), unicode, len+4);
00064     }
00065 
<a name="l00066"></a><a class="code" href="classbase_1_1XS.html#base_1_1XSa1">00066</a>     <a class="code" href="classbase_1_1XS.html#base_1_1XSa0">XS</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *cstr) 
00067     {
00068       <span class="keyword">const</span> <a class="code" href="namespacebase.html#a2">Int</a> len = strlen(cstr);
00069       unicode = <span class="keyword">new</span> <a class="code" href="namespacebase.html#a14">XCh</a>[len+8];
00070       dom::XMLString::transcode(cstr, unicode, len+4);
00071     }
00072 
<a name="l00073"></a><a class="code" href="classbase_1_1XS.html#base_1_1XSa2">00073</a>     <a class="code" href="classbase_1_1XS.html#base_1_1XSa0">XS</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a14">XCh</a>* xstr)
00074     {
00075       unicode = <span class="keyword">new</span> <a class="code" href="namespacebase.html#a14">XCh</a>[dom::XMLString::stringLen(xstr)+4];
00076       dom::XMLString::copyString(unicode, xstr);
00077     }
00078 
<a name="l00079"></a><a class="code" href="classbase_1_1XS.html#base_1_1XSa3">00079</a>     <a class="code" href="classbase_1_1XS.html#base_1_1XSa3">~XS</a>() { <span class="keyword">delete</span>[] unicode; }
00080 
<a name="l00081"></a><a class="code" href="classbase_1_1XS.html#base_1_1XSa4">00081</a>     <a class="code" href="classbase_1_1XS.html#base_1_1XSa4">operator XCh*</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> unicode; }
00082 
<a name="l00083"></a><a class="code" href="classbase_1_1XS.html#base_1_1XSa5">00083</a>     <a class="code" href="classbase_1_1XS.html#base_1_1XSa5">operator String</a>()<span class="keyword"> const</span>
00084 <span class="keyword">    </span>{ 
00085       <span class="keywordtype">char</span>* cstr = dom::XMLString::transcode(unicode);
00086       <a class="code" href="namespacebase.html#a4">String</a> str(cstr);
00087       <span class="keyword">delete</span>[] cstr;
00088       <span class="keywordflow">return</span> str;
00089     }
00090 
00091   <span class="keyword">private</span>:
00092     <a class="code" href="namespacebase.html#a14">XCh</a>* unicode;
00093   };
00094 
00095 
00096 
00097 
<a name="l00098"></a><a class="code" href="classbase_1_1Externalizer.html">00098</a> <span class="keyword">class </span><a class="code" href="classbase_1_1Externalizer.html">Externalizer</a> : <span class="keyword">public</span> <a class="code" href="classbase_1_1Object.html">Object</a>
00099 {
00100 <span class="keyword">public</span>:
00101   <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera0">Externalizer</a>(Externalizable::ExternalizationType type, <a class="code" href="classbase_1_1ref.html">ref&lt;VFile&gt;</a> archive); 
00102   <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera0">Externalizer</a>(Externalizable::ExternalizationType type, std::ios&amp; stream);
00103   <span class="keyword">virtual</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera2">~Externalizer</a>();
00104 
<a name="l00105"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera3">00105</a>   <span class="keyword">virtual</span> <a class="code" href="namespacebase.html#a4">String</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera3">className</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacebase.html#a4">String</a>(<span class="stringliteral">"Externalizer"</span>); }
00106 
<a name="l00107"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera4">00107</a>   <span class="keywordtype">bool</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera4">isOutput</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp7">isoutput</a>; }     <span class="comment">///&lt; true is this is an output serialization stream</span>
<a name="l00108"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera5">00108</a> <span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera5">isInput</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera4">isOutput</a>(); } <span class="comment">///&lt; true if this is an input serialization stream</span>
<a name="l00109"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera6">00109</a> <span class="comment"></span>  Externalizable::ExternalizationType <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera6">ioType</a>() { <span class="keywordflow">return</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera4">isOutput</a>()?Externalizable::Output:Externalizable::Input; }
00110 <span class="comment"></span>
00111 <span class="comment">  /// return the filesystem path of the stream to which this Externalizer is</span>
00112 <span class="comment">  ///  attached; or the empty String (if unknown - i.e. instantiated from an iostream)</span>
<a name="l00113"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera7">00113</a> <span class="comment"></span>  <a class="code" href="classbase_1_1PathName.html">PathName</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera7">getArchivePath</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp11">path</a>; }
00114 
00115   <span class="keywordtype">void</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera8">flush</a>(); <span class="comment">///&lt; flush output stream (no-op on input).  Should use this before closing an output file before Externalizer goes out-of-scope.</span>
00116 <span class="comment"></span>
<a name="l00117"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera9">00117</a>   <span class="keywordtype">bool</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera9">moreInput</a>() <span class="comment">///&lt; still input remaining in current context?</span>
00118 <span class="comment"></span>    { <a class="code" href="base.html#a19">Assert</a>(<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera5">isInput</a>()); <span class="keywordflow">return</span> bool(<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb1">input</a>()); } 
00119   <a class="code" href="namespacebase.html#a4">String</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera10">readLine</a>();                      <span class="comment">///&lt; read until end of line</span>
00120 <span class="comment"></span>  <a class="code" href="namespacebase.html#a4">String</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera11">readString</a>(<a class="code" href="namespacebase.html#a1">SInt</a> maxLength=-1);   <span class="comment">///&lt; read maxLength chars (or until end of context if -1)</span>
00121 <span class="comment"></span>  <span class="keywordtype">void</span>   <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera12">writeLine</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; line);   <span class="comment">///&lt; write 'line' followed by end-of-line char </span>
00122 <span class="comment"></span>  <span class="keywordtype">void</span>   <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera13">writeString</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; str);  <span class="comment">///&lt; write String str (may contain end-of-line chars)</span>
00123 <span class="comment"></span>
00124   <span class="keywordtype">void</span>   <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera14">writeComment</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; comment); <span class="comment">///&lt; output a comment ('# &lt;text&gt; &lt;newline&gt;' in raw mode, xml comment in XML mode)</span>
00125 <span class="comment"></span>
<a name="l00126"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere0">00126</a>   <span class="keyword">static</span> <a class="code" href="namespacebase.html#a4">String</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere0">readLineFromStream</a>(std::istream&amp; istream)
00127   {
00128     <span class="keywordtype">char</span> linebuf[1024];
00129     istream.getline(linebuf,1024);
00130     linebuf[1023]=char(0);
00131     <span class="keywordflow">return</span> <a class="code" href="namespacebase.html#a4">String</a>(linebuf);
00132   }
00133 
00134 
00135   <span class="comment">// XML IO methods</span>
00136 
<a name="l00137"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera15">00137</a>   dom::DOMDocument* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera15">doc</a>() { <span class="keywordflow">if</span> (!<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp0">xmlMode</a>) <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb3">initXMLDoc</a>(); <span class="keywordflow">return</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp4">xmldoc</a>; }
<a name="l00138"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera16">00138</a>   dom::DOMNode* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera16">context</a>() { <span class="keywordflow">if</span> (!<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp0">xmlMode</a>) <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb3">initXMLDoc</a>(); <span class="keywordflow">return</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp5">xmlcontext</a>.top(); }
00139 
00140   <span class="comment">// for writing</span>
00141 <span class="comment"></span>
00142 <span class="comment">  /// if a DOCTYPE is to be set, always call setDocumentType() first on a new output Externalizer.  </span>
00143 <span class="comment">  /// Subsequent calls will be ignored.  Only then can createElement() be called to create an element.</span>
00144 <span class="comment">  ///  createElement() must be the first 'write' method called on a new output Externalizer - in which</span>
00145 <span class="comment">  ///  case the element will be the root element of the document.</span>
00146 <span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera17">setDocumentType</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; name, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; publicid, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; sysid);
00147   dom::DOMElement* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera18">createElement</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; tagname, <span class="keywordtype">bool</span> indenting=<span class="keyword">true</span>);
00148   
<a name="l00149"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera19">00149</a>   <span class="keywordtype">void</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera19">pushContext</a>(dom::DOMNode* context) { <a class="code" href="base.html#a19">Assert</a>(<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp0">xmlMode</a>); <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp5">xmlcontext</a>.push(context); }
<a name="l00150"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera20">00150</a>   dom::DOMNode* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera20">popContext</a>() { <a class="code" href="base.html#a19">Assert</a>(<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp0">xmlMode</a>); dom::DOMNode* top = <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp5">xmlcontext</a>.top(); <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp5">xmlcontext</a>.pop(); <span class="keywordflow">return</span> top; }
00151 
<a name="l00152"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera21">00152</a>   <span class="keywordtype">void</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera21">appendElement</a>(dom::DOMElement* e) { <a class="code" href="base.html#a19">Assert</a>(<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp0">xmlMode</a>); <span class="keywordflow">if</span> (e != <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp5">xmlcontext</a>.top()) { <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp5">xmlcontext</a>.top()-&gt;appendChild(e); <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp6">lastAppendedElem</a>=e;} }
<a name="l00153"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera22">00153</a>   <span class="keywordtype">void</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera22">appendBreak</a>() { <a class="code" href="base.html#a19">Assert</a>(<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp0">xmlMode</a>); <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera29">appendText</a>(<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp5">xmlcontext</a>.top(), <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizers0">newline</a>); }
<a name="l00154"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera23">00154</a>   dom::DOMElement* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera23">lastAppendedElement</a>() { <a class="code" href="base.html#a19">Assert</a>(<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp0">xmlMode</a>); <span class="keywordflow">return</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp6">lastAppendedElem</a>; }
<a name="l00155"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera24">00155</a>   <a class="code" href="namespacebase.html#a4">String</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera24">elementTagName</a>(dom::DOMNode* n) { <a class="code" href="base.html#a19">Assert</a>(<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp0">xmlMode</a>); <span class="keywordflow">return</span> !<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb10">isElement</a>(n)?<a class="code" href="namespacebase.html#a4">String</a>():<a class="code" href="namespacebase.html#a4">String</a>(<a class="code" href="classbase_1_1XS.html">XS</a>(dynamic_cast&lt;dom::DOMElement*&gt;(n)-&gt;getTagName())); }
00156 
00157   <span class="keywordtype">void</span>        <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera21">appendElement</a>(dom::DOMNode* n, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; tagname, <span class="keywordtype">bool</span> indenting=<span class="keyword">true</span>);
<a name="l00158"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera26">00158</a>   <span class="keywordtype">void</span>        <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera26">setElementAttribute</a>(dom::DOMElement* e, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; attrname, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; value) { e-&gt;setAttribute(<a class="code" href="classbase_1_1XS.html">XS</a>(attrname),<a class="code" href="classbase_1_1XS.html">XS</a>(value)); }
00159   <span class="keywordtype">void</span>        <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera27">appendProcessingInstruction</a>(dom::DOMNode* n, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; target, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; data);
00160   dom::DOMText*    <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera28">createText</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; text);
00161   <span class="keywordtype">void</span>        <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera29">appendText</a>(dom::DOMNode* n, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; text);
00162   dom::DOMComment* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera30">createComment</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; comment);
00163   <span class="keywordtype">void</span>        <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera31">appendComment</a>(dom::DOMNode* n, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; comment);
00164   dom::DOMCDATASection* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera32">createCDATA</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; text);
00165   <span class="keywordtype">void</span>             <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera33">appendCDATA</a>(dom::DOMNode* n, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; text);
<a name="l00166"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera34">00166</a>   <span class="keywordtype">void</span>        <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera34">appendNode</a>(dom::DOMNode* n, dom::DOMNode* n2) { <a class="code" href="base.html#a19">Assert</a>(<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp0">xmlMode</a>); n-&gt;appendChild(n2); }
<a name="l00167"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera35">00167</a>   <span class="keywordtype">void</span>        <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera22">appendBreak</a>(dom::DOMNode* n) { <a class="code" href="base.html#a19">Assert</a>(<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp0">xmlMode</a>); <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera29">appendText</a>(n, <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizers0">newline</a>); }
00168 
00169   <span class="comment">// for reading</span>
00170   dom::DOMElement* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera36">getFirstElement</a>(dom::DOMNode* n, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; tagname, <span class="keywordtype">bool</span> required=<span class="keyword">true</span>);
00171   dom::DOMElement* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera37">getFirstChildElement</a>(dom::DOMNode* n, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; tagname, <span class="keywordtype">bool</span> required=<span class="keyword">true</span>);
00172   dom::DOMElement* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera38">getNextSiblingElement</a>(dom::DOMNode* n, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; tagname, <span class="keywordtype">bool</span> required=<span class="keyword">true</span>);
00173   <span class="keywordtype">void</span>             <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera39">removeElement</a>(dom::DOMElement* e);
00174   <a class="code" href="namespacebase.html#a4">String</a>           <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera40">getContainedText</a>(dom::DOMNode* n, <span class="keywordtype">bool</span> removeIndentation=<span class="keyword">false</span>);
00175   <a class="code" href="namespacebase.html#a4">String</a>           <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera41">getElementAttribute</a>(dom::DOMElement* e, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; attrname, <span class="keywordtype">bool</span> required=<span class="keyword">true</span>);
00176   <a class="code" href="namespacebase.html#a4">String</a>           <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera42">getDefaultedElementAttribute</a>(dom::DOMElement* e, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; attrname, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; defaultValue);
00177 
00178   <span class="comment">// useful String processing</span>
00179   <span class="keyword">static</span> <a class="code" href="classbase_1_1array.html">array&lt;String&gt;</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere1">splitIntoLines</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; text, <span class="keywordtype">bool</span> removeBlankLines=<span class="keyword">true</span>);
00180   <span class="keyword">static</span> <a class="code" href="classbase_1_1array.html">array&lt;String&gt;</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere2">splitAtDelimiter</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; line, <span class="keywordtype">char</span> delimiter=<span class="charliteral">','</span>);
00181   <span class="keyword">static</span> <a class="code" href="classbase_1_1vector.html">base::Vector</a>  <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere3">stringsToReals</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1array.html">array&lt;String&gt;</a>&amp; strings, <span class="keywordtype">bool</span> acceptUnits = <span class="keyword">true</span>);
00182   <span class="keyword">static</span> <a class="code" href="classbase_1_1Matrix4.html">base::Matrix4</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere4">toMatrix4</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; text);
00183   <span class="keyword">static</span> <a class="code" href="namespacebase.html#a4">String</a>        <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere5">toString</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1Matrix4.html">base::Matrix4</a>&amp; m);
00184   <span class="keyword">static</span> <a class="code" href="classbase_1_1Vector3.html">base::Vector3</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere6">toVector3</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; text, <span class="keywordtype">bool</span> acceptUnits = <span class="keyword">true</span>);
00185   <span class="keyword">static</span> <a class="code" href="classbase_1_1vector.html">base::Vector</a>  <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere7">toVector</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; text, <span class="keywordtype">bool</span> commasep=<span class="keyword">false</span>, <span class="keywordtype">bool</span> acceptUnits = <span class="keyword">true</span>);
00186   <span class="keyword">static</span> <a class="code" href="namespacebase.html#a4">String</a>        <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere5">toString</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1Vector3.html">base::Vector3</a>&amp; v);
00187   <span class="keyword">static</span> <a class="code" href="namespacebase.html#a4">String</a>        <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere5">toString</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1vector.html">base::Vector</a>&amp; v, <span class="keywordtype">bool</span> commasep=<span class="keyword">false</span>);
00188   <span class="keyword">static</span> <a class="code" href="namespacebase.html#a4">String</a>        <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere5">toString</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1matrix.html">base::Matrix</a>&amp; m);
00189   <span class="keyword">static</span> <a class="code" href="namespacebase.html#a4">String</a>        <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere5">toString</a>(<a class="code" href="namespacebase.html#a5">Real</a> v, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; units=<span class="stringliteral">"m"</span>);
00190   <span class="keyword">static</span> <a class="code" href="namespacebase.html#a5">Real</a>          <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere12">toReal</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; text, <span class="keywordtype">bool</span> acceptUnits = <span class="keyword">true</span>);
00191   <span class="keyword">static</span> <a class="code" href="classbase_1_1matrix.html">base::Matrix</a>  <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere13">toMatrix</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; text);
00192   <span class="keyword">static</span> <a class="code" href="namespacebase.html#a4">String</a>        <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere14">removeChar</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; text, <span class="keywordtype">char</span> toRemove);
00193   <span class="keyword">static</span> <span class="keywordtype">bool</span>          <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizere15">isNumeric</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; text);
00194   
00195 
00196 
00197 
<a name="l00198"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizers0">00198</a>   <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizers0">newline</a>;
<a name="l00199"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizers1">00199</a>   <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="namespacebase.html#a2">Int</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizers1">indentSpaces</a> = 2;
00200 
00201 <span class="keyword">protected</span>:  
<a name="l00202"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb0">00202</a>   <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera0">Externalizer</a>(<span class="keyword">const</span> <a class="code" href="classbase_1_1Externalizer.html">Externalizer</a>&amp; e) 
00203     : <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp0">xmlMode</a>(e.<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp0">xmlMode</a>), <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp1">parser</a>(e.<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp1">parser</a>), 
00204       <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp2">impl</a>(e.<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp2">impl</a>), <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp3">doctype</a>(e.<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp3">doctype</a>),
00205       <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp4">xmldoc</a>(e.<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp4">xmldoc</a>), <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp5">xmlcontext</a>(e.<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp5">xmlcontext</a>),
00206       <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp7">isoutput</a>(e.<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp7">isoutput</a>), <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp8">aborted</a>(e.<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp8">aborted</a>)
00207   {}
00208 
<a name="l00209"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb1">00209</a>   std::istream&amp; <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb1">input</a>() { <a class="code" href="base.html#a19">Assert</a>(<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera5">isInput</a>()); <span class="keywordflow">return</span> *<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp9">istream</a>; }
<a name="l00210"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb2">00210</a>   std::ostream&amp; <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb2">output</a>() { <a class="code" href="base.html#a19">Assert</a>(<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizera4">isOutput</a>()); <span class="keywordflow">return</span> *<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp10">ostream</a>; }
00211 
<a name="l00212"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp0">00212</a>   <span class="keywordtype">bool</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp0">xmlMode</a>;
00213 
00214 
<a name="l00215"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizert0">00215</a>   <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizert0">xmlInitialized</a>;
00216   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerf0">xmlInitialize</a>();
00217 
00218   <span class="keywordtype">void</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb3">initXMLDoc</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; rootElementName = <span class="stringliteral">""</span>);
00219 
<a name="l00220"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp1">00220</a>   dom::DOMBuilder*  <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp1">parser</a>;
<a name="l00221"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp2">00221</a>   dom::DOMImplementation *<a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp2">impl</a>;
<a name="l00222"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp3">00222</a>   dom::DOMDocumentType* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp3">doctype</a>;
<a name="l00223"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp4">00223</a>   dom::DOMDocument* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp4">xmldoc</a>;
<a name="l00224"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp5">00224</a>   std::stack&lt;dom::DOMNode*&gt; <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp5">xmlcontext</a>;
<a name="l00225"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp6">00225</a>   dom::DOMElement* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp6">lastAppendedElem</a>;
00226 
00227   dom::DOMDocument* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb4">xmlParseDocument</a>();
00228   <span class="keywordtype">void</span>         <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb5">xmlWriteDocument</a>(dom::DOMDocument* doc);
00229   <span class="keywordtype">void</span>         <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb6">xmlReleaseDocument</a>();
00230   <span class="keywordtype">void</span>         <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb7">xmlFormat</a>(dom::DOMNode* n, <a class="code" href="namespacebase.html#a2">Int</a> indent);
00231 
00232   <span class="keywordtype">bool</span>         <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb8">isNewline</a>(dom::DOMNode* n);
00233   <span class="keywordtype">bool</span>         <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb9">equals</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a14">XCh</a>* str1, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; str2);
<a name="l00234"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb10">00234</a>   <span class="keywordtype">bool</span>         <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb10">isElement</a>(dom::DOMNode* n) { <span class="keywordflow">return</span> n-&gt;getNodeType() == dom::DOMNode::ELEMENT_NODE; }
00235   <span class="keywordtype">bool</span>         <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb10">isElement</a>(dom::DOMNode* n, <span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; tagname);
00236 
00237 
00238 
<a name="l00239"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizert1">00239</a>   <span class="keyword">const</span> <span class="keyword">static</span> <a class="code" href="namespacebase.html#a4">String</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizert1">inputToConstErrorString</a>;
<a name="l00240"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizert2">00240</a>   <span class="keyword">const</span> <span class="keyword">static</span> <a class="code" href="namespacebase.html#a4">String</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizert2">inputDuringOutputErrorString</a>;
00241 
00242   <span class="comment">// helpers</span>
00243   <span class="keywordtype">void</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerb12">abort</a>(<span class="keyword">const</span> <a class="code" href="namespacebase.html#a4">String</a>&amp; exceptionString); <span class="comment">// flags the externalization as aborted and throws an exception</span>
00244 
00245 
<a name="l00246"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp7">00246</a>   <span class="keywordtype">bool</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp7">isoutput</a>;
<a name="l00247"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp8">00247</a>   <span class="keywordtype">bool</span> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp8">aborted</a>;
00248 
<a name="l00249"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp9">00249</a>   std::istream* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp9">istream</a>;
<a name="l00250"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp10">00250</a>   std::ostream* <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp10">ostream</a>;
<a name="l00251"></a><a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp11">00251</a>   <a class="code" href="classbase_1_1PathName.html">PathName</a> <a class="code" href="classbase_1_1Externalizer.html#base_1_1Externalizerp11">path</a>;
00252   
00253 };
00254 
00255 
00256 } <span class="comment">// base</span>
00257 
00258 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Jul 29 15:56:05 2004 for OpenSim by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
